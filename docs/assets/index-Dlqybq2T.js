(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var kh={exports:{}},ua={},xh={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm;function eE(){if(pm)return Oe;pm=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.iterator;function I(C){return C===null||typeof C!="object"?null:(C=S&&C[S]||C["@@iterator"],typeof C=="function"?C:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,q={};function F(C,z,Z){this.props=C,this.context=z,this.refs=q,this.updater=Z||M}F.prototype.isReactComponent={},F.prototype.setState=function(C,z){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,z,"setState")},F.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function W(){}W.prototype=F.prototype;function ie(C,z,Z){this.props=C,this.context=z,this.refs=q,this.updater=Z||M}var Q=ie.prototype=new W;Q.constructor=ie,B(Q,F.prototype),Q.isPureReactComponent=!0;var oe=Array.isArray,Te=Object.prototype.hasOwnProperty,ge={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function T(C,z,Z){var me,ae={},ue=null,ce=null;if(z!=null)for(me in z.ref!==void 0&&(ce=z.ref),z.key!==void 0&&(ue=""+z.key),z)Te.call(z,me)&&!x.hasOwnProperty(me)&&(ae[me]=z[me]);var de=arguments.length-2;if(de===1)ae.children=Z;else if(1<de){for(var we=Array(de),Ne=0;Ne<de;Ne++)we[Ne]=arguments[Ne+2];ae.children=we}if(C&&C.defaultProps)for(me in de=C.defaultProps,de)ae[me]===void 0&&(ae[me]=de[me]);return{$$typeof:i,type:C,key:ue,ref:ce,props:ae,_owner:ge.current}}function R(C,z){return{$$typeof:i,type:C.type,key:z,ref:C.ref,props:C.props,_owner:C._owner}}function k(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function D(C){var z={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(Z){return z[Z]})}var L=/\/+/g;function A(C,z){return typeof C=="object"&&C!==null&&C.key!=null?D(""+C.key):z.toString(36)}function be(C,z,Z,me,ae){var ue=typeof C;(ue==="undefined"||ue==="boolean")&&(C=null);var ce=!1;if(C===null)ce=!0;else switch(ue){case"string":case"number":ce=!0;break;case"object":switch(C.$$typeof){case i:case e:ce=!0}}if(ce)return ce=C,ae=ae(ce),C=me===""?"."+A(ce,0):me,oe(ae)?(Z="",C!=null&&(Z=C.replace(L,"$&/")+"/"),be(ae,z,Z,"",function(Ne){return Ne})):ae!=null&&(k(ae)&&(ae=R(ae,Z+(!ae.key||ce&&ce.key===ae.key?"":(""+ae.key).replace(L,"$&/")+"/")+C)),z.push(ae)),1;if(ce=0,me=me===""?".":me+":",oe(C))for(var de=0;de<C.length;de++){ue=C[de];var we=me+A(ue,de);ce+=be(ue,z,Z,we,ae)}else if(we=I(C),typeof we=="function")for(C=we.call(C),de=0;!(ue=C.next()).done;)ue=ue.value,we=me+A(ue,de++),ce+=be(ue,z,Z,we,ae);else if(ue==="object")throw z=String(C),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return ce}function fe(C,z,Z){if(C==null)return C;var me=[],ae=0;return be(C,me,"","",function(ue){return z.call(Z,ue,ae++)}),me}function pe(C){if(C._status===-1){var z=C._result;z=z(),z.then(function(Z){(C._status===0||C._status===-1)&&(C._status=1,C._result=Z)},function(Z){(C._status===0||C._status===-1)&&(C._status=2,C._result=Z)}),C._status===-1&&(C._status=0,C._result=z)}if(C._status===1)return C._result.default;throw C._result}var se={current:null},Y={transition:null},ne={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:Y,ReactCurrentOwner:ge};function K(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:fe,forEach:function(C,z,Z){fe(C,function(){z.apply(this,arguments)},Z)},count:function(C){var z=0;return fe(C,function(){z++}),z},toArray:function(C){return fe(C,function(z){return z})||[]},only:function(C){if(!k(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Oe.Component=F,Oe.Fragment=n,Oe.Profiler=a,Oe.PureComponent=ie,Oe.StrictMode=s,Oe.Suspense=g,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Oe.act=K,Oe.cloneElement=function(C,z,Z){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var me=B({},C.props),ae=C.key,ue=C.ref,ce=C._owner;if(z!=null){if(z.ref!==void 0&&(ue=z.ref,ce=ge.current),z.key!==void 0&&(ae=""+z.key),C.type&&C.type.defaultProps)var de=C.type.defaultProps;for(we in z)Te.call(z,we)&&!x.hasOwnProperty(we)&&(me[we]=z[we]===void 0&&de!==void 0?de[we]:z[we])}var we=arguments.length-2;if(we===1)me.children=Z;else if(1<we){de=Array(we);for(var Ne=0;Ne<we;Ne++)de[Ne]=arguments[Ne+2];me.children=de}return{$$typeof:i,type:C.type,key:ae,ref:ue,props:me,_owner:ce}},Oe.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:u,_context:C},C.Consumer=C},Oe.createElement=T,Oe.createFactory=function(C){var z=T.bind(null,C);return z.type=C,z},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(C){return{$$typeof:m,render:C}},Oe.isValidElement=k,Oe.lazy=function(C){return{$$typeof:E,_payload:{_status:-1,_result:C},_init:pe}},Oe.memo=function(C,z){return{$$typeof:v,type:C,compare:z===void 0?null:z}},Oe.startTransition=function(C){var z=Y.transition;Y.transition={};try{C()}finally{Y.transition=z}},Oe.unstable_act=K,Oe.useCallback=function(C,z){return se.current.useCallback(C,z)},Oe.useContext=function(C){return se.current.useContext(C)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(C){return se.current.useDeferredValue(C)},Oe.useEffect=function(C,z){return se.current.useEffect(C,z)},Oe.useId=function(){return se.current.useId()},Oe.useImperativeHandle=function(C,z,Z){return se.current.useImperativeHandle(C,z,Z)},Oe.useInsertionEffect=function(C,z){return se.current.useInsertionEffect(C,z)},Oe.useLayoutEffect=function(C,z){return se.current.useLayoutEffect(C,z)},Oe.useMemo=function(C,z){return se.current.useMemo(C,z)},Oe.useReducer=function(C,z,Z){return se.current.useReducer(C,z,Z)},Oe.useRef=function(C){return se.current.useRef(C)},Oe.useState=function(C){return se.current.useState(C)},Oe.useSyncExternalStore=function(C,z,Z){return se.current.useSyncExternalStore(C,z,Z)},Oe.useTransition=function(){return se.current.useTransition()},Oe.version="18.3.1",Oe}var mm;function gf(){return mm||(mm=1,xh.exports=eE()),xh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm;function tE(){if(gm)return ua;gm=1;var i=gf(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,v){var E,S={},I=null,M=null;v!==void 0&&(I=""+v),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(M=g.ref);for(E in g)s.call(g,E)&&!u.hasOwnProperty(E)&&(S[E]=g[E]);if(m&&m.defaultProps)for(E in g=m.defaultProps,g)S[E]===void 0&&(S[E]=g[E]);return{$$typeof:e,type:m,key:I,ref:M,props:S,_owner:a.current}}return ua.Fragment=n,ua.jsx=h,ua.jsxs=h,ua}var ym;function nE(){return ym||(ym=1,kh.exports=tE()),kh.exports}var V=nE(),b=gf(),iu={},Nh={exports:{}},sn={},Vh={exports:{}},Dh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function rE(){return vm||(vm=1,(function(i){function e(Y,ne){var K=Y.length;Y.push(ne);e:for(;0<K;){var C=K-1>>>1,z=Y[C];if(0<a(z,ne))Y[C]=ne,Y[K]=z,K=C;else break e}}function n(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var ne=Y[0],K=Y.pop();if(K!==ne){Y[0]=K;e:for(var C=0,z=Y.length,Z=z>>>1;C<Z;){var me=2*(C+1)-1,ae=Y[me],ue=me+1,ce=Y[ue];if(0>a(ae,K))ue<z&&0>a(ce,ae)?(Y[C]=ce,Y[ue]=K,C=ue):(Y[C]=ae,Y[me]=K,C=me);else if(ue<z&&0>a(ce,K))Y[C]=ce,Y[ue]=K,C=ue;else break e}}return ne}function a(Y,ne){var K=Y.sortIndex-ne.sortIndex;return K!==0?K:Y.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var g=[],v=[],E=1,S=null,I=3,M=!1,B=!1,q=!1,F=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(Y){for(var ne=n(v);ne!==null;){if(ne.callback===null)s(v);else if(ne.startTime<=Y)s(v),ne.sortIndex=ne.expirationTime,e(g,ne);else break;ne=n(v)}}function oe(Y){if(q=!1,Q(Y),!B)if(n(g)!==null)B=!0,pe(Te);else{var ne=n(v);ne!==null&&se(oe,ne.startTime-Y)}}function Te(Y,ne){B=!1,q&&(q=!1,W(T),T=-1),M=!0;var K=I;try{for(Q(ne),S=n(g);S!==null&&(!(S.expirationTime>ne)||Y&&!D());){var C=S.callback;if(typeof C=="function"){S.callback=null,I=S.priorityLevel;var z=C(S.expirationTime<=ne);ne=i.unstable_now(),typeof z=="function"?S.callback=z:S===n(g)&&s(g),Q(ne)}else s(g);S=n(g)}if(S!==null)var Z=!0;else{var me=n(v);me!==null&&se(oe,me.startTime-ne),Z=!1}return Z}finally{S=null,I=K,M=!1}}var ge=!1,x=null,T=-1,R=5,k=-1;function D(){return!(i.unstable_now()-k<R)}function L(){if(x!==null){var Y=i.unstable_now();k=Y;var ne=!0;try{ne=x(!0,Y)}finally{ne?A():(ge=!1,x=null)}}else ge=!1}var A;if(typeof ie=="function")A=function(){ie(L)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,fe=be.port2;be.port1.onmessage=L,A=function(){fe.postMessage(null)}}else A=function(){F(L,0)};function pe(Y){x=Y,ge||(ge=!0,A())}function se(Y,ne){T=F(function(){Y(i.unstable_now())},ne)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_continueExecution=function(){B||M||(B=!0,pe(Te))},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_getFirstCallbackNode=function(){return n(g)},i.unstable_next=function(Y){switch(I){case 1:case 2:case 3:var ne=3;break;default:ne=I}var K=I;I=ne;try{return Y()}finally{I=K}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Y,ne){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var K=I;I=Y;try{return ne()}finally{I=K}},i.unstable_scheduleCallback=function(Y,ne,K){var C=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?C+K:C):K=C,Y){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=K+z,Y={id:E++,callback:ne,priorityLevel:Y,startTime:K,expirationTime:z,sortIndex:-1},K>C?(Y.sortIndex=K,e(v,Y),n(g)===null&&Y===n(v)&&(q?(W(T),T=-1):q=!0,se(oe,K-C))):(Y.sortIndex=z,e(g,Y),B||M||(B=!0,pe(Te))),Y},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(Y){var ne=I;return function(){var K=I;I=ne;try{return Y.apply(this,arguments)}finally{I=K}}}})(Dh)),Dh}var _m;function iE(){return _m||(_m=1,Vh.exports=rE()),Vh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em;function sE(){if(Em)return sn;Em=1;var i=gf(),e=iE();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function u(t,r){h(t,r),h(t+"Capture",r)}function h(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},S={};function I(t){return g.call(S,t)?!0:g.call(E,t)?!1:v.test(t)?S[t]=!0:(E[t]=!0,!1)}function M(t,r,o,c){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function B(t,r,o,c){if(r===null||typeof r>"u"||M(t,r,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function q(t,r,o,c,f,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){F[t]=new q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];F[r]=new q(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){F[t]=new q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){F[t]=new q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){F[t]=new q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){F[t]=new q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){F[t]=new q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){F[t]=new q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){F[t]=new q(t,5,!1,t.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function ie(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(W,ie);F[r]=new q(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(W,ie);F[r]=new q(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(W,ie);F[r]=new q(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){F[t]=new q(t,1,!1,t.toLowerCase(),null,!1,!1)}),F.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){F[t]=new q(t,1,!1,t.toLowerCase(),null,!0,!0)});function Q(t,r,o,c){var f=F.hasOwnProperty(r)?F[r]:null;(f!==null?f.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(B(r,o,f,c)&&(o=null),c||f===null?I(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):f.mustUseProperty?t[f.propertyName]=o===null?f.type===3?!1:"":o:(r=f.attributeName,c=f.attributeNamespace,o===null?t.removeAttribute(r):(f=f.type,o=f===3||f===4&&o===!0?"":""+o,c?t.setAttributeNS(c,r,o):t.setAttribute(r,o))))}var oe=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Te=Symbol.for("react.element"),ge=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),Y=Symbol.iterator;function ne(t){return t===null||typeof t!="object"?null:(t=Y&&t[Y]||t["@@iterator"],typeof t=="function"?t:null)}var K=Object.assign,C;function z(t){if(C===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);C=r&&r[1]||""}return`
`+C+t}var Z=!1;function me(t,r){if(!t||Z)return"";Z=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(G){var c=G}Reflect.construct(t,[],r)}else{try{r.call()}catch(G){c=G}t.call(r.prototype)}else{try{throw Error()}catch(G){c=G}t()}}catch(G){if(G&&c&&typeof G.stack=="string"){for(var f=G.stack.split(`
`),p=c.stack.split(`
`),_=f.length-1,P=p.length-1;1<=_&&0<=P&&f[_]!==p[P];)P--;for(;1<=_&&0<=P;_--,P--)if(f[_]!==p[P]){if(_!==1||P!==1)do if(_--,P--,0>P||f[_]!==p[P]){var N=`
`+f[_].replace(" at new "," at ");return t.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",t.displayName)),N}while(1<=_&&0<=P);break}}}finally{Z=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?z(t):""}function ae(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=me(t.type,!1),t;case 11:return t=me(t.type.render,!1),t;case 1:return t=me(t.type,!0),t;default:return""}}function ue(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case ge:return"Portal";case R:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case be:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case L:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fe:return r=t.displayName||null,r!==null?r:ue(t.type)||"Memo";case pe:r=t._payload,t=t._init;try{return ue(t(r))}catch{}}return null}function ce(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(r);case 8:return r===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function de(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function we(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ne(t){var r=we(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),c=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){c=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ge(t){t._valueTracker||(t._valueTracker=Ne(t))}function _t(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=we(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function Gn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qe(t,r){var o=r.checked;return K({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function lt(t,r){var o=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;o=de(r.value!=null?r.value:o),t._wrapperState={initialChecked:c,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function mo(t,r){r=r.checked,r!=null&&Q(t,"checked",r,!1)}function go(t,r){mo(t,r);var o=de(r.value),c=r.type;if(o!=null)c==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?rs(t,r.type,o):r.hasOwnProperty("defaultValue")&&rs(t,r.type,de(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function $a(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function rs(t,r,o){(r!=="number"||Gn(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var cr=Array.isArray;function hr(t,r,o,c){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&c&&(t[o].defaultSelected=!0)}else{for(o=""+de(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function yo(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return K({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function is(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(cr(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:de(o)}}function ss(t,r){var o=de(r.value),c=de(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),c!=null&&(t.defaultValue=""+c)}function vo(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Et(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Et(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fr,_o=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,c,f){MSApp.execUnsafeLocalFunction(function(){return t(r,o,c,f)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(fr=fr||document.createElement("div"),fr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=fr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Mr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var Ti={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Si=["Webkit","ms","Moz","O"];Object.keys(Ti).forEach(function(t){Si.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Ti[r]=Ti[t]})});function Eo(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Ti.hasOwnProperty(t)&&Ti[t]?(""+r).trim():r+"px"}function wo(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var c=o.indexOf("--")===0,f=Eo(o,r[o],c);o==="float"&&(o="cssFloat"),c?t.setProperty(o,f):t[o]=f}}var To=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function So(t,r){if(r){if(To[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function Io(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ii=null;function os(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var as=null,gn=null,Hn=null;function ls(t){if(t=Qo(t)){if(typeof as!="function")throw Error(n(280));var r=t.stateNode;r&&(r=_l(r),as(t.stateNode,t.type,r))}}function qn(t){gn?Hn?Hn.push(t):Hn=[t]:gn=t}function Ao(){if(gn){var t=gn,r=Hn;if(Hn=gn=null,ls(t),r)for(t=0;t<r.length;t++)ls(r[t])}}function Ai(t,r){return t(r)}function Ro(){}var dr=!1;function Co(t,r,o){if(dr)return t(r,o);dr=!0;try{return Ai(t,r,o)}finally{dr=!1,(gn!==null||Hn!==null)&&(Ro(),Ao())}}function ct(t,r){var o=t.stateNode;if(o===null)return null;var c=_l(o);if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var us=!1;if(m)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){us=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{us=!1}function Ri(t,r,o,c,f,p,_,P,N){var G=Array.prototype.slice.call(arguments,3);try{r.apply(o,G)}catch(te){this.onError(te)}}var Ci=!1,cs=null,kn=!1,Po=null,rc={onError:function(t){Ci=!0,cs=t}};function hs(t,r,o,c,f,p,_,P,N){Ci=!1,cs=null,Ri.apply(rc,arguments)}function Wa(t,r,o,c,f,p,_,P,N){if(hs.apply(this,arguments),Ci){if(Ci){var G=cs;Ci=!1,cs=null}else throw Error(n(198));kn||(kn=!0,Po=G)}}function xn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function Pi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Nn(t){if(xn(t)!==t)throw Error(n(188))}function Ga(t){var r=t.alternate;if(!r){if(r=xn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,c=r;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return Nn(f),t;if(p===c)return Nn(f),r;p=p.sibling}throw Error(n(188))}if(o.return!==c.return)o=f,c=p;else{for(var _=!1,P=f.child;P;){if(P===o){_=!0,o=f,c=p;break}if(P===c){_=!0,c=f,o=p;break}P=P.sibling}if(!_){for(P=p.child;P;){if(P===o){_=!0,o=p,c=f;break}if(P===c){_=!0,c=p,o=f;break}P=P.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==c)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function ko(t){return t=Ga(t),t!==null?fs(t):null}function fs(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=fs(t);if(r!==null)return r;t=t.sibling}return null}var ds=e.unstable_scheduleCallback,xo=e.unstable_cancelCallback,Ha=e.unstable_shouldYield,ic=e.unstable_requestPaint,Ye=e.unstable_now,qa=e.unstable_getCurrentPriorityLevel,ki=e.unstable_ImmediatePriority,Fr=e.unstable_UserBlockingPriority,yn=e.unstable_NormalPriority,No=e.unstable_LowPriority,Qa=e.unstable_IdlePriority,xi=null,ln=null;function Ka(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(xi,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:Xa,Vo=Math.log,Ya=Math.LN2;function Xa(t){return t>>>=0,t===0?32:31-(Vo(t)/Ya|0)|0}var ps=64,ms=4194304;function br(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ni(t,r){var o=t.pendingLanes;if(o===0)return 0;var c=0,f=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var P=_&~f;P!==0?c=br(P):(p&=_,p!==0&&(c=br(p)))}else _=o&~f,_!==0?c=br(_):p!==0&&(c=br(p));if(c===0)return 0;if(r!==0&&r!==c&&(r&f)===0&&(f=c&-c,p=r&-r,f>=p||f===16&&(p&4194240)!==0))return r;if((c&4)!==0&&(c|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=c;0<r;)o=31-qt(r),f=1<<o,c|=t[o],r&=~f;return c}function sc(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-qt(p),P=1<<_,N=f[_];N===-1?((P&o)===0||(P&c)!==0)&&(f[_]=sc(P,r)):N<=r&&(t.expiredLanes|=P),p&=~P}}function un(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vi(){var t=ps;return ps<<=1,(ps&4194240)===0&&(ps=64),t}function jr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Ur(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-qt(r),t[r]=o}function Qe(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<o;){var f=31-qt(o),p=1<<f;r[f]=0,c[f]=-1,t[f]=-1,o&=~p}}function Br(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-qt(o),f=1<<c;f&r|t[c]&r&&(t[c]|=r),o&=~f}}var Fe=0;function zr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ja,gs,Za,el,tl,Do=!1,Qn=[],Dt=null,Vn=null,Dn=null,$r=new Map,vn=new Map,Kn=[],oc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nl(t,r){switch(t){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":$r.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":vn.delete(r.pointerId)}}function Xt(t,r,o,c,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},r!==null&&(r=Qo(r),r!==null&&gs(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function ac(t,r,o,c,f){switch(r){case"focusin":return Dt=Xt(Dt,t,r,o,c,f),!0;case"dragenter":return Vn=Xt(Vn,t,r,o,c,f),!0;case"mouseover":return Dn=Xt(Dn,t,r,o,c,f),!0;case"pointerover":var p=f.pointerId;return $r.set(p,Xt($r.get(p)||null,t,r,o,c,f)),!0;case"gotpointercapture":return p=f.pointerId,vn.set(p,Xt(vn.get(p)||null,t,r,o,c,f)),!0}return!1}function rl(t){var r=Fi(t.target);if(r!==null){var o=xn(r);if(o!==null){if(r=o.tag,r===13){if(r=Pi(o),r!==null){t.blockedOn=r,tl(t.priority,function(){Za(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=ys(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);Ii=c,o.target.dispatchEvent(c),Ii=null}else return r=Qo(o),r!==null&&gs(r),t.blockedOn=o,!1;r.shift()}return!0}function Di(t,r,o){mr(t)&&o.delete(r)}function il(){Do=!1,Dt!==null&&mr(Dt)&&(Dt=null),Vn!==null&&mr(Vn)&&(Vn=null),Dn!==null&&mr(Dn)&&(Dn=null),$r.forEach(Di),vn.forEach(Di)}function Ln(t,r){t.blockedOn===r&&(t.blockedOn=null,Do||(Do=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,il)))}function On(t){function r(f){return Ln(f,t)}if(0<Qn.length){Ln(Qn[0],t);for(var o=1;o<Qn.length;o++){var c=Qn[o];c.blockedOn===t&&(c.blockedOn=null)}}for(Dt!==null&&Ln(Dt,t),Vn!==null&&Ln(Vn,t),Dn!==null&&Ln(Dn,t),$r.forEach(r),vn.forEach(r),o=0;o<Kn.length;o++)c=Kn[o],c.blockedOn===t&&(c.blockedOn=null);for(;0<Kn.length&&(o=Kn[0],o.blockedOn===null);)rl(o),o.blockedOn===null&&Kn.shift()}var gr=oe.ReactCurrentBatchConfig,Wr=!0;function nt(t,r,o,c){var f=Fe,p=gr.transition;gr.transition=null;try{Fe=1,Lo(t,r,o,c)}finally{Fe=f,gr.transition=p}}function lc(t,r,o,c){var f=Fe,p=gr.transition;gr.transition=null;try{Fe=4,Lo(t,r,o,c)}finally{Fe=f,gr.transition=p}}function Lo(t,r,o,c){if(Wr){var f=ys(t,r,o,c);if(f===null)_c(t,r,c,Li,o),nl(t,c);else if(ac(f,t,r,o,c))c.stopPropagation();else if(nl(t,c),r&4&&-1<oc.indexOf(t)){for(;f!==null;){var p=Qo(f);if(p!==null&&Ja(p),p=ys(t,r,o,c),p===null&&_c(t,r,c,Li,o),p===f)break;f=p}f!==null&&c.stopPropagation()}else _c(t,r,c,null,o)}}var Li=null;function ys(t,r,o,c){if(Li=null,t=os(c),t=Fi(t),t!==null)if(r=xn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=Pi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Li=t,null}function Oo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qa()){case ki:return 1;case Fr:return 4;case yn:case No:return 16;case Qa:return 536870912;default:return 16}default:return 16}}var cn=null,vs=null,Jt=null;function Mo(){if(Jt)return Jt;var t,r=vs,o=r.length,c,f="value"in cn?cn.value:cn.textContent,p=f.length;for(t=0;t<o&&r[t]===f[t];t++);var _=o-t;for(c=1;c<=_&&r[o-c]===f[p-c];c++);return Jt=f.slice(t,1<c?1-c:void 0)}function _s(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Yn(){return!0}function Fo(){return!1}function Lt(t){function r(o,c,f,p,_){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var P in t)t.hasOwnProperty(P)&&(o=t[P],this[P]=o?o(p):p[P]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Yn:Fo,this.isPropagationStopped=Fo,this}return K(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),r}var Mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Es=Lt(Mn),Xn=K({},Mn,{view:0,detail:0}),uc=Lt(Xn),ws,yr,Gr,Oi=K({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gr&&(Gr&&t.type==="mousemove"?(ws=t.screenX-Gr.screenX,yr=t.screenY-Gr.screenY):yr=ws=0,Gr=t),ws)},movementY:function(t){return"movementY"in t?t.movementY:yr}}),Ts=Lt(Oi),bo=K({},Oi,{dataTransfer:0}),sl=Lt(bo),Ss=K({},Xn,{relatedTarget:0}),Is=Lt(Ss),ol=K({},Mn,{animationName:0,elapsedTime:0,pseudoElement:0}),vr=Lt(ol),al=K({},Mn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ll=Lt(al),ul=K({},Mn,{data:0}),jo=Lt(ul),As={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hl(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=cl[t])?!!r[t]:!1}function Jn(){return hl}var l=K({},Xn,{key:function(t){if(t.key){var r=As[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=_s(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jn,charCode:function(t){return t.type==="keypress"?_s(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_s(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=Lt(l),y=K({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=Lt(y),j=K({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jn}),H=Lt(j),he=K({},Mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Lt(he),Tt=K({},Oi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),je=Lt(Tt),Ct=[9,13,27,32],dt=m&&"CompositionEvent"in window,_n=null;m&&"documentMode"in document&&(_n=document.documentMode);var hn=m&&"TextEvent"in window&&!_n,Mi=m&&(!dt||_n&&8<_n&&11>=_n),Rs=" ",ld=!1;function ud(t,r){switch(t){case"keyup":return Ct.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cs=!1;function Xv(t,r){switch(t){case"compositionend":return cd(r);case"keypress":return r.which!==32?null:(ld=!0,Rs);case"textInput":return t=r.data,t===Rs&&ld?null:t;default:return null}}function Jv(t,r){if(Cs)return t==="compositionend"||!dt&&ud(t,r)?(t=Mo(),Jt=vs=cn=null,Cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Mi&&r.locale!=="ko"?null:r.data;default:return null}}var Zv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Zv[t.type]:r==="textarea"}function fd(t,r,o,c){qn(c),r=gl(r,"onChange"),0<r.length&&(o=new Es("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var Uo=null,Bo=null;function e_(t){xd(t,0)}function fl(t){var r=Vs(t);if(_t(r))return t}function t_(t,r){if(t==="change")return r}var dd=!1;if(m){var cc;if(m){var hc="oninput"in document;if(!hc){var pd=document.createElement("div");pd.setAttribute("oninput","return;"),hc=typeof pd.oninput=="function"}cc=hc}else cc=!1;dd=cc&&(!document.documentMode||9<document.documentMode)}function md(){Uo&&(Uo.detachEvent("onpropertychange",gd),Bo=Uo=null)}function gd(t){if(t.propertyName==="value"&&fl(Bo)){var r=[];fd(r,Bo,t,os(t)),Co(e_,r)}}function n_(t,r,o){t==="focusin"?(md(),Uo=r,Bo=o,Uo.attachEvent("onpropertychange",gd)):t==="focusout"&&md()}function r_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fl(Bo)}function i_(t,r){if(t==="click")return fl(r)}function s_(t,r){if(t==="input"||t==="change")return fl(r)}function o_(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Fn=typeof Object.is=="function"?Object.is:o_;function zo(t,r){if(Fn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!g.call(r,f)||!Fn(t[f],r[f]))return!1}return!0}function yd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vd(t,r){var o=yd(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=yd(o)}}function _d(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?_d(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ed(){for(var t=window,r=Gn();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Gn(t.document)}return r}function fc(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function a_(t){var r=Ed(),o=t.focusedElem,c=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&_d(o.ownerDocument.documentElement,o)){if(c!==null&&fc(o)){if(r=c.start,t=c.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var f=o.textContent.length,p=Math.min(c.start,f);c=c.end===void 0?p:Math.min(c.end,f),!t.extend&&p>c&&(f=c,c=p,p=f),f=vd(o,p);var _=vd(o,c);f&&_&&(t.rangeCount!==1||t.anchorNode!==f.node||t.anchorOffset!==f.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),t.removeAllRanges(),p>c?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var l_=m&&"documentMode"in document&&11>=document.documentMode,Ps=null,dc=null,$o=null,pc=!1;function wd(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;pc||Ps==null||Ps!==Gn(c)||(c=Ps,"selectionStart"in c&&fc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),$o&&zo($o,c)||($o=c,c=gl(dc,"onSelect"),0<c.length&&(r=new Es("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=Ps)))}function dl(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var ks={animationend:dl("Animation","AnimationEnd"),animationiteration:dl("Animation","AnimationIteration"),animationstart:dl("Animation","AnimationStart"),transitionend:dl("Transition","TransitionEnd")},mc={},Td={};m&&(Td=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function pl(t){if(mc[t])return mc[t];if(!ks[t])return t;var r=ks[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Td)return mc[t]=r[o];return t}var Sd=pl("animationend"),Id=pl("animationiteration"),Ad=pl("animationstart"),Rd=pl("transitionend"),Cd=new Map,Pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(t,r){Cd.set(t,r),u(r,[t])}for(var gc=0;gc<Pd.length;gc++){var yc=Pd[gc],u_=yc.toLowerCase(),c_=yc[0].toUpperCase()+yc.slice(1);Hr(u_,"on"+c_)}Hr(Sd,"onAnimationEnd"),Hr(Id,"onAnimationIteration"),Hr(Ad,"onAnimationStart"),Hr("dblclick","onDoubleClick"),Hr("focusin","onFocus"),Hr("focusout","onBlur"),Hr(Rd,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function kd(t,r,o){var c=t.type||"unknown-event";t.currentTarget=o,Wa(c,r,void 0,t),t.currentTarget=null}function xd(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],f=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var _=c.length-1;0<=_;_--){var P=c[_],N=P.instance,G=P.currentTarget;if(P=P.listener,N!==p&&f.isPropagationStopped())break e;kd(f,P,G),p=N}else for(_=0;_<c.length;_++){if(P=c[_],N=P.instance,G=P.currentTarget,P=P.listener,N!==p&&f.isPropagationStopped())break e;kd(f,P,G),p=N}}}if(kn)throw t=Po,kn=!1,Po=null,t}function Ze(t,r){var o=r[Ac];o===void 0&&(o=r[Ac]=new Set);var c=t+"__bubble";o.has(c)||(Nd(r,t,2,!1),o.add(c))}function vc(t,r,o){var c=0;r&&(c|=4),Nd(o,t,c,r)}var ml="_reactListening"+Math.random().toString(36).slice(2);function Go(t){if(!t[ml]){t[ml]=!0,s.forEach(function(o){o!=="selectionchange"&&(h_.has(o)||vc(o,!1,t),vc(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[ml]||(r[ml]=!0,vc("selectionchange",!1,r))}}function Nd(t,r,o,c){switch(Oo(r)){case 1:var f=nt;break;case 4:f=lc;break;default:f=Lo}o=f.bind(null,r,o,t),f=void 0,!us||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function _c(t,r,o,c,f){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var P=c.stateNode.containerInfo;if(P===f||P.nodeType===8&&P.parentNode===f)break;if(_===4)for(_=c.return;_!==null;){var N=_.tag;if((N===3||N===4)&&(N=_.stateNode.containerInfo,N===f||N.nodeType===8&&N.parentNode===f))return;_=_.return}for(;P!==null;){if(_=Fi(P),_===null)return;if(N=_.tag,N===5||N===6){c=p=_;continue e}P=P.parentNode}}c=c.return}Co(function(){var G=p,te=os(o),re=[];e:{var ee=Cd.get(t);if(ee!==void 0){var ve=Es,Se=t;switch(t){case"keypress":if(_s(o)===0)break e;case"keydown":case"keyup":ve=d;break;case"focusin":Se="focus",ve=Is;break;case"focusout":Se="blur",ve=Is;break;case"beforeblur":case"afterblur":ve=Is;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Ts;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=sl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=H;break;case Sd:case Id:case Ad:ve=vr;break;case Rd:ve=He;break;case"scroll":ve=uc;break;case"wheel":ve=je;break;case"copy":case"cut":case"paste":ve=ll;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=w}var Ie=(r&4)!==0,ht=!Ie&&t==="scroll",U=Ie?ee!==null?ee+"Capture":null:ee;Ie=[];for(var O=G,$;O!==null;){$=O;var le=$.stateNode;if($.tag===5&&le!==null&&($=le,U!==null&&(le=ct(O,U),le!=null&&Ie.push(Ho(O,le,$)))),ht)break;O=O.return}0<Ie.length&&(ee=new ve(ee,Se,null,o,te),re.push({event:ee,listeners:Ie}))}}if((r&7)===0){e:{if(ee=t==="mouseover"||t==="pointerover",ve=t==="mouseout"||t==="pointerout",ee&&o!==Ii&&(Se=o.relatedTarget||o.fromElement)&&(Fi(Se)||Se[_r]))break e;if((ve||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ve?(Se=o.relatedTarget||o.toElement,ve=G,Se=Se?Fi(Se):null,Se!==null&&(ht=xn(Se),Se!==ht||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(ve=null,Se=G),ve!==Se)){if(Ie=Ts,le="onMouseLeave",U="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(Ie=w,le="onPointerLeave",U="onPointerEnter",O="pointer"),ht=ve==null?ee:Vs(ve),$=Se==null?ee:Vs(Se),ee=new Ie(le,O+"leave",ve,o,te),ee.target=ht,ee.relatedTarget=$,le=null,Fi(te)===G&&(Ie=new Ie(U,O+"enter",Se,o,te),Ie.target=$,Ie.relatedTarget=ht,le=Ie),ht=le,ve&&Se)t:{for(Ie=ve,U=Se,O=0,$=Ie;$;$=xs($))O++;for($=0,le=U;le;le=xs(le))$++;for(;0<O-$;)Ie=xs(Ie),O--;for(;0<$-O;)U=xs(U),$--;for(;O--;){if(Ie===U||U!==null&&Ie===U.alternate)break t;Ie=xs(Ie),U=xs(U)}Ie=null}else Ie=null;ve!==null&&Vd(re,ee,ve,Ie,!1),Se!==null&&ht!==null&&Vd(re,ht,Se,Ie,!0)}}e:{if(ee=G?Vs(G):window,ve=ee.nodeName&&ee.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ee.type==="file")var Ae=t_;else if(hd(ee))if(dd)Ae=s_;else{Ae=r_;var Ce=n_}else(ve=ee.nodeName)&&ve.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(Ae=i_);if(Ae&&(Ae=Ae(t,G))){fd(re,Ae,o,te);break e}Ce&&Ce(t,ee,G),t==="focusout"&&(Ce=ee._wrapperState)&&Ce.controlled&&ee.type==="number"&&rs(ee,"number",ee.value)}switch(Ce=G?Vs(G):window,t){case"focusin":(hd(Ce)||Ce.contentEditable==="true")&&(Ps=Ce,dc=G,$o=null);break;case"focusout":$o=dc=Ps=null;break;case"mousedown":pc=!0;break;case"contextmenu":case"mouseup":case"dragend":pc=!1,wd(re,o,te);break;case"selectionchange":if(l_)break;case"keydown":case"keyup":wd(re,o,te)}var Pe;if(dt)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Cs?ud(t,o)&&(xe="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(xe="onCompositionStart");xe&&(Mi&&o.locale!=="ko"&&(Cs||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Cs&&(Pe=Mo()):(cn=te,vs="value"in cn?cn.value:cn.textContent,Cs=!0)),Ce=gl(G,xe),0<Ce.length&&(xe=new jo(xe,t,null,o,te),re.push({event:xe,listeners:Ce}),Pe?xe.data=Pe:(Pe=cd(o),Pe!==null&&(xe.data=Pe)))),(Pe=hn?Xv(t,o):Jv(t,o))&&(G=gl(G,"onBeforeInput"),0<G.length&&(te=new jo("onBeforeInput","beforeinput",null,o,te),re.push({event:te,listeners:G}),te.data=Pe))}xd(re,r)})}function Ho(t,r,o){return{instance:t,listener:r,currentTarget:o}}function gl(t,r){for(var o=r+"Capture",c=[];t!==null;){var f=t,p=f.stateNode;f.tag===5&&p!==null&&(f=p,p=ct(t,o),p!=null&&c.unshift(Ho(t,p,f)),p=ct(t,r),p!=null&&c.push(Ho(t,p,f))),t=t.return}return c}function xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vd(t,r,o,c,f){for(var p=r._reactName,_=[];o!==null&&o!==c;){var P=o,N=P.alternate,G=P.stateNode;if(N!==null&&N===c)break;P.tag===5&&G!==null&&(P=G,f?(N=ct(o,p),N!=null&&_.unshift(Ho(o,N,P))):f||(N=ct(o,p),N!=null&&_.push(Ho(o,N,P)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var f_=/\r\n?/g,d_=/\u0000|\uFFFD/g;function Dd(t){return(typeof t=="string"?t:""+t).replace(f_,`
`).replace(d_,"")}function yl(t,r,o){if(r=Dd(r),Dd(t)!==r&&o)throw Error(n(425))}function vl(){}var Ec=null,wc=null;function Tc(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Sc=typeof setTimeout=="function"?setTimeout:void 0,p_=typeof clearTimeout=="function"?clearTimeout:void 0,Ld=typeof Promise=="function"?Promise:void 0,m_=typeof queueMicrotask=="function"?queueMicrotask:typeof Ld<"u"?function(t){return Ld.resolve(null).then(t).catch(g_)}:Sc;function g_(t){setTimeout(function(){throw t})}function Ic(t,r){var o=r,c=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(c===0){t.removeChild(f),On(r);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=f}while(o);On(r)}function qr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Od(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Ns,qo="__reactProps$"+Ns,_r="__reactContainer$"+Ns,Ac="__reactEvents$"+Ns,y_="__reactListeners$"+Ns,v_="__reactHandles$"+Ns;function Fi(t){var r=t[Zn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[_r]||o[Zn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Od(t);t!==null;){if(o=t[Zn])return o;t=Od(t)}return r}t=o,o=t.parentNode}return null}function Qo(t){return t=t[Zn]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function _l(t){return t[qo]||null}var Rc=[],Ds=-1;function Qr(t){return{current:t}}function et(t){0>Ds||(t.current=Rc[Ds],Rc[Ds]=null,Ds--)}function Xe(t,r){Ds++,Rc[Ds]=t.current,t.current=r}var Kr={},Ut=Qr(Kr),Zt=Qr(!1),bi=Kr;function Ls(t,r){var o=t.type.contextTypes;if(!o)return Kr;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var f={},p;for(p in o)f[p]=r[p];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=f),f}function en(t){return t=t.childContextTypes,t!=null}function El(){et(Zt),et(Ut)}function Md(t,r,o){if(Ut.current!==Kr)throw Error(n(168));Xe(Ut,r),Xe(Zt,o)}function Fd(t,r,o){var c=t.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var f in c)if(!(f in r))throw Error(n(108,ce(t)||"Unknown",f));return K({},o,c)}function wl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kr,bi=Ut.current,Xe(Ut,t),Xe(Zt,Zt.current),!0}function bd(t,r,o){var c=t.stateNode;if(!c)throw Error(n(169));o?(t=Fd(t,r,bi),c.__reactInternalMemoizedMergedChildContext=t,et(Zt),et(Ut),Xe(Ut,t)):et(Zt),Xe(Zt,o)}var Er=null,Tl=!1,Cc=!1;function jd(t){Er===null?Er=[t]:Er.push(t)}function __(t){Tl=!0,jd(t)}function Yr(){if(!Cc&&Er!==null){Cc=!0;var t=0,r=Fe;try{var o=Er;for(Fe=1;t<o.length;t++){var c=o[t];do c=c(!0);while(c!==null)}Er=null,Tl=!1}catch(f){throw Er!==null&&(Er=Er.slice(t+1)),ds(ki,Yr),f}finally{Fe=r,Cc=!1}}return null}var Os=[],Ms=0,Sl=null,Il=0,En=[],wn=0,ji=null,wr=1,Tr="";function Ui(t,r){Os[Ms++]=Il,Os[Ms++]=Sl,Sl=t,Il=r}function Ud(t,r,o){En[wn++]=wr,En[wn++]=Tr,En[wn++]=ji,ji=t;var c=wr;t=Tr;var f=32-qt(c)-1;c&=~(1<<f),o+=1;var p=32-qt(r)+f;if(30<p){var _=f-f%5;p=(c&(1<<_)-1).toString(32),c>>=_,f-=_,wr=1<<32-qt(r)+f|o<<f|c,Tr=p+t}else wr=1<<p|o<<f|c,Tr=t}function Pc(t){t.return!==null&&(Ui(t,1),Ud(t,1,0))}function kc(t){for(;t===Sl;)Sl=Os[--Ms],Os[Ms]=null,Il=Os[--Ms],Os[Ms]=null;for(;t===ji;)ji=En[--wn],En[wn]=null,Tr=En[--wn],En[wn]=null,wr=En[--wn],En[wn]=null}var fn=null,dn=null,rt=!1,bn=null;function Bd(t,r){var o=An(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function zd(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,fn=t,dn=qr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,fn=t,dn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=ji!==null?{id:wr,overflow:Tr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=An(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,fn=t,dn=null,!0):!1;default:return!1}}function xc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nc(t){if(rt){var r=dn;if(r){var o=r;if(!zd(t,r)){if(xc(t))throw Error(n(418));r=qr(o.nextSibling);var c=fn;r&&zd(t,r)?Bd(c,o):(t.flags=t.flags&-4097|2,rt=!1,fn=t)}}else{if(xc(t))throw Error(n(418));t.flags=t.flags&-4097|2,rt=!1,fn=t}}}function $d(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function Al(t){if(t!==fn)return!1;if(!rt)return $d(t),rt=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Tc(t.type,t.memoizedProps)),r&&(r=dn)){if(xc(t))throw Wd(),Error(n(418));for(;r;)Bd(t,r),r=qr(r.nextSibling)}if($d(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){dn=qr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}dn=null}}else dn=fn?qr(t.stateNode.nextSibling):null;return!0}function Wd(){for(var t=dn;t;)t=qr(t.nextSibling)}function Fs(){dn=fn=null,rt=!1}function Vc(t){bn===null?bn=[t]:bn.push(t)}var E_=oe.ReactCurrentBatchConfig;function Ko(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var c=o.stateNode}if(!c)throw Error(n(147,t));var f=c,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var P=f.refs;_===null?delete P[p]:P[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Rl(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Gd(t){var r=t._init;return r(t._payload)}function Hd(t){function r(U,O){if(t){var $=U.deletions;$===null?(U.deletions=[O],U.flags|=16):$.push(O)}}function o(U,O){if(!t)return null;for(;O!==null;)r(U,O),O=O.sibling;return null}function c(U,O){for(U=new Map;O!==null;)O.key!==null?U.set(O.key,O):U.set(O.index,O),O=O.sibling;return U}function f(U,O){return U=ii(U,O),U.index=0,U.sibling=null,U}function p(U,O,$){return U.index=$,t?($=U.alternate,$!==null?($=$.index,$<O?(U.flags|=2,O):$):(U.flags|=2,O)):(U.flags|=1048576,O)}function _(U){return t&&U.alternate===null&&(U.flags|=2),U}function P(U,O,$,le){return O===null||O.tag!==6?(O=Sh($,U.mode,le),O.return=U,O):(O=f(O,$),O.return=U,O)}function N(U,O,$,le){var Ae=$.type;return Ae===x?te(U,O,$.props.children,le,$.key):O!==null&&(O.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===pe&&Gd(Ae)===O.type)?(le=f(O,$.props),le.ref=Ko(U,O,$),le.return=U,le):(le=Yl($.type,$.key,$.props,null,U.mode,le),le.ref=Ko(U,O,$),le.return=U,le)}function G(U,O,$,le){return O===null||O.tag!==4||O.stateNode.containerInfo!==$.containerInfo||O.stateNode.implementation!==$.implementation?(O=Ih($,U.mode,le),O.return=U,O):(O=f(O,$.children||[]),O.return=U,O)}function te(U,O,$,le,Ae){return O===null||O.tag!==7?(O=Qi($,U.mode,le,Ae),O.return=U,O):(O=f(O,$),O.return=U,O)}function re(U,O,$){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Sh(""+O,U.mode,$),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Te:return $=Yl(O.type,O.key,O.props,null,U.mode,$),$.ref=Ko(U,null,O),$.return=U,$;case ge:return O=Ih(O,U.mode,$),O.return=U,O;case pe:var le=O._init;return re(U,le(O._payload),$)}if(cr(O)||ne(O))return O=Qi(O,U.mode,$,null),O.return=U,O;Rl(U,O)}return null}function ee(U,O,$,le){var Ae=O!==null?O.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return Ae!==null?null:P(U,O,""+$,le);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Te:return $.key===Ae?N(U,O,$,le):null;case ge:return $.key===Ae?G(U,O,$,le):null;case pe:return Ae=$._init,ee(U,O,Ae($._payload),le)}if(cr($)||ne($))return Ae!==null?null:te(U,O,$,le,null);Rl(U,$)}return null}function ve(U,O,$,le,Ae){if(typeof le=="string"&&le!==""||typeof le=="number")return U=U.get($)||null,P(O,U,""+le,Ae);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case Te:return U=U.get(le.key===null?$:le.key)||null,N(O,U,le,Ae);case ge:return U=U.get(le.key===null?$:le.key)||null,G(O,U,le,Ae);case pe:var Ce=le._init;return ve(U,O,$,Ce(le._payload),Ae)}if(cr(le)||ne(le))return U=U.get($)||null,te(O,U,le,Ae,null);Rl(O,le)}return null}function Se(U,O,$,le){for(var Ae=null,Ce=null,Pe=O,xe=O=0,xt=null;Pe!==null&&xe<$.length;xe++){Pe.index>xe?(xt=Pe,Pe=null):xt=Pe.sibling;var $e=ee(U,Pe,$[xe],le);if($e===null){Pe===null&&(Pe=xt);break}t&&Pe&&$e.alternate===null&&r(U,Pe),O=p($e,O,xe),Ce===null?Ae=$e:Ce.sibling=$e,Ce=$e,Pe=xt}if(xe===$.length)return o(U,Pe),rt&&Ui(U,xe),Ae;if(Pe===null){for(;xe<$.length;xe++)Pe=re(U,$[xe],le),Pe!==null&&(O=p(Pe,O,xe),Ce===null?Ae=Pe:Ce.sibling=Pe,Ce=Pe);return rt&&Ui(U,xe),Ae}for(Pe=c(U,Pe);xe<$.length;xe++)xt=ve(Pe,U,xe,$[xe],le),xt!==null&&(t&&xt.alternate!==null&&Pe.delete(xt.key===null?xe:xt.key),O=p(xt,O,xe),Ce===null?Ae=xt:Ce.sibling=xt,Ce=xt);return t&&Pe.forEach(function(si){return r(U,si)}),rt&&Ui(U,xe),Ae}function Ie(U,O,$,le){var Ae=ne($);if(typeof Ae!="function")throw Error(n(150));if($=Ae.call($),$==null)throw Error(n(151));for(var Ce=Ae=null,Pe=O,xe=O=0,xt=null,$e=$.next();Pe!==null&&!$e.done;xe++,$e=$.next()){Pe.index>xe?(xt=Pe,Pe=null):xt=Pe.sibling;var si=ee(U,Pe,$e.value,le);if(si===null){Pe===null&&(Pe=xt);break}t&&Pe&&si.alternate===null&&r(U,Pe),O=p(si,O,xe),Ce===null?Ae=si:Ce.sibling=si,Ce=si,Pe=xt}if($e.done)return o(U,Pe),rt&&Ui(U,xe),Ae;if(Pe===null){for(;!$e.done;xe++,$e=$.next())$e=re(U,$e.value,le),$e!==null&&(O=p($e,O,xe),Ce===null?Ae=$e:Ce.sibling=$e,Ce=$e);return rt&&Ui(U,xe),Ae}for(Pe=c(U,Pe);!$e.done;xe++,$e=$.next())$e=ve(Pe,U,xe,$e.value,le),$e!==null&&(t&&$e.alternate!==null&&Pe.delete($e.key===null?xe:$e.key),O=p($e,O,xe),Ce===null?Ae=$e:Ce.sibling=$e,Ce=$e);return t&&Pe.forEach(function(Z_){return r(U,Z_)}),rt&&Ui(U,xe),Ae}function ht(U,O,$,le){if(typeof $=="object"&&$!==null&&$.type===x&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case Te:e:{for(var Ae=$.key,Ce=O;Ce!==null;){if(Ce.key===Ae){if(Ae=$.type,Ae===x){if(Ce.tag===7){o(U,Ce.sibling),O=f(Ce,$.props.children),O.return=U,U=O;break e}}else if(Ce.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===pe&&Gd(Ae)===Ce.type){o(U,Ce.sibling),O=f(Ce,$.props),O.ref=Ko(U,Ce,$),O.return=U,U=O;break e}o(U,Ce);break}else r(U,Ce);Ce=Ce.sibling}$.type===x?(O=Qi($.props.children,U.mode,le,$.key),O.return=U,U=O):(le=Yl($.type,$.key,$.props,null,U.mode,le),le.ref=Ko(U,O,$),le.return=U,U=le)}return _(U);case ge:e:{for(Ce=$.key;O!==null;){if(O.key===Ce)if(O.tag===4&&O.stateNode.containerInfo===$.containerInfo&&O.stateNode.implementation===$.implementation){o(U,O.sibling),O=f(O,$.children||[]),O.return=U,U=O;break e}else{o(U,O);break}else r(U,O);O=O.sibling}O=Ih($,U.mode,le),O.return=U,U=O}return _(U);case pe:return Ce=$._init,ht(U,O,Ce($._payload),le)}if(cr($))return Se(U,O,$,le);if(ne($))return Ie(U,O,$,le);Rl(U,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,O!==null&&O.tag===6?(o(U,O.sibling),O=f(O,$),O.return=U,U=O):(o(U,O),O=Sh($,U.mode,le),O.return=U,U=O),_(U)):o(U,O)}return ht}var bs=Hd(!0),qd=Hd(!1),Cl=Qr(null),Pl=null,js=null,Dc=null;function Lc(){Dc=js=Pl=null}function Oc(t){var r=Cl.current;et(Cl),t._currentValue=r}function Mc(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function Us(t,r){Pl=t,Dc=js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(tn=!0),t.firstContext=null)}function Tn(t){var r=t._currentValue;if(Dc!==t)if(t={context:t,memoizedValue:r,next:null},js===null){if(Pl===null)throw Error(n(308));js=t,Pl.dependencies={lanes:0,firstContext:t}}else js=js.next=t;return r}var Bi=null;function Fc(t){Bi===null?Bi=[t]:Bi.push(t)}function Qd(t,r,o,c){var f=r.interleaved;return f===null?(o.next=o,Fc(r)):(o.next=f.next,f.next=o),r.interleaved=o,Sr(t,c)}function Sr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Xr=!1;function bc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ir(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Jr(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(ze&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,Sr(t,o)}return f=c.interleaved,f===null?(r.next=r,Fc(c)):(r.next=f.next,f.next=r),c.interleaved=r,Sr(t,o)}function kl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Br(t,o)}}function Yd(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?f=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?f=p=r:p=p.next=r}else f=p=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,effects:c.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function xl(t,r,o,c){var f=t.updateQueue;Xr=!1;var p=f.firstBaseUpdate,_=f.lastBaseUpdate,P=f.shared.pending;if(P!==null){f.shared.pending=null;var N=P,G=N.next;N.next=null,_===null?p=G:_.next=G,_=N;var te=t.alternate;te!==null&&(te=te.updateQueue,P=te.lastBaseUpdate,P!==_&&(P===null?te.firstBaseUpdate=G:P.next=G,te.lastBaseUpdate=N))}if(p!==null){var re=f.baseState;_=0,te=G=N=null,P=p;do{var ee=P.lane,ve=P.eventTime;if((c&ee)===ee){te!==null&&(te=te.next={eventTime:ve,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var Se=t,Ie=P;switch(ee=r,ve=o,Ie.tag){case 1:if(Se=Ie.payload,typeof Se=="function"){re=Se.call(ve,re,ee);break e}re=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ie.payload,ee=typeof Se=="function"?Se.call(ve,re,ee):Se,ee==null)break e;re=K({},re,ee);break e;case 2:Xr=!0}}P.callback!==null&&P.lane!==0&&(t.flags|=64,ee=f.effects,ee===null?f.effects=[P]:ee.push(P))}else ve={eventTime:ve,lane:ee,tag:P.tag,payload:P.payload,callback:P.callback,next:null},te===null?(G=te=ve,N=re):te=te.next=ve,_|=ee;if(P=P.next,P===null){if(P=f.shared.pending,P===null)break;ee=P,P=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);if(te===null&&(N=re),f.baseState=N,f.firstBaseUpdate=G,f.lastBaseUpdate=te,r=f.shared.interleaved,r!==null){f=r;do _|=f.lane,f=f.next;while(f!==r)}else p===null&&(f.shared.lanes=0);Wi|=_,t.lanes=_,t.memoizedState=re}}function Xd(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var c=t[r],f=c.callback;if(f!==null){if(c.callback=null,c=o,typeof f!="function")throw Error(n(191,f));f.call(c)}}}var Yo={},er=Qr(Yo),Xo=Qr(Yo),Jo=Qr(Yo);function zi(t){if(t===Yo)throw Error(n(174));return t}function jc(t,r){switch(Xe(Jo,r),Xe(Xo,t),Xe(er,Yo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:wt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=wt(r,t)}et(er),Xe(er,r)}function Bs(){et(er),et(Xo),et(Jo)}function Jd(t){zi(Jo.current);var r=zi(er.current),o=wt(r,t.type);r!==o&&(Xe(Xo,t),Xe(er,o))}function Uc(t){Xo.current===t&&(et(er),et(Xo))}var it=Qr(0);function Nl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Bc=[];function zc(){for(var t=0;t<Bc.length;t++)Bc[t]._workInProgressVersionPrimary=null;Bc.length=0}var Vl=oe.ReactCurrentDispatcher,$c=oe.ReactCurrentBatchConfig,$i=0,st=null,St=null,Pt=null,Dl=!1,Zo=!1,ea=0,w_=0;function Bt(){throw Error(n(321))}function Wc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Fn(t[o],r[o]))return!1;return!0}function Gc(t,r,o,c,f,p){if($i=p,st=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Vl.current=t===null||t.memoizedState===null?A_:R_,t=o(c,f),Zo){p=0;do{if(Zo=!1,ea=0,25<=p)throw Error(n(301));p+=1,Pt=St=null,r.updateQueue=null,Vl.current=C_,t=o(c,f)}while(Zo)}if(Vl.current=Ml,r=St!==null&&St.next!==null,$i=0,Pt=St=st=null,Dl=!1,r)throw Error(n(300));return t}function Hc(){var t=ea!==0;return ea=0,t}function tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?st.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function Sn(){if(St===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var r=Pt===null?st.memoizedState:Pt.next;if(r!==null)Pt=r,St=t;else{if(t===null)throw Error(n(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Pt===null?st.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function ta(t,r){return typeof r=="function"?r(t):r}function qc(t){var r=Sn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var c=St,f=c.baseQueue,p=o.pending;if(p!==null){if(f!==null){var _=f.next;f.next=p.next,p.next=_}c.baseQueue=f=p,o.pending=null}if(f!==null){p=f.next,c=c.baseState;var P=_=null,N=null,G=p;do{var te=G.lane;if(($i&te)===te)N!==null&&(N=N.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),c=G.hasEagerState?G.eagerState:t(c,G.action);else{var re={lane:te,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};N===null?(P=N=re,_=c):N=N.next=re,st.lanes|=te,Wi|=te}G=G.next}while(G!==null&&G!==p);N===null?_=c:N.next=P,Fn(c,r.memoizedState)||(tn=!0),r.memoizedState=c,r.baseState=_,r.baseQueue=N,o.lastRenderedState=c}if(t=o.interleaved,t!==null){f=t;do p=f.lane,st.lanes|=p,Wi|=p,f=f.next;while(f!==t)}else f===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Qc(t){var r=Sn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var c=o.dispatch,f=o.pending,p=r.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do p=t(p,_.action),_=_.next;while(_!==f);Fn(p,r.memoizedState)||(tn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,c]}function Zd(){}function ep(t,r){var o=st,c=Sn(),f=r(),p=!Fn(c.memoizedState,f);if(p&&(c.memoizedState=f,tn=!0),c=c.queue,Kc(rp.bind(null,o,c,t),[t]),c.getSnapshot!==r||p||Pt!==null&&Pt.memoizedState.tag&1){if(o.flags|=2048,na(9,np.bind(null,o,c,f,r),void 0,null),kt===null)throw Error(n(349));($i&30)!==0||tp(o,r,f)}return f}function tp(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=st.updateQueue,r===null?(r={lastEffect:null,stores:null},st.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function np(t,r,o,c){r.value=o,r.getSnapshot=c,ip(r)&&sp(t)}function rp(t,r,o){return o(function(){ip(r)&&sp(t)})}function ip(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Fn(t,o)}catch{return!0}}function sp(t){var r=Sr(t,1);r!==null&&zn(r,t,1,-1)}function op(t){var r=tr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:t},r.queue=t,t=t.dispatch=I_.bind(null,st,t),[r.memoizedState,t]}function na(t,r,o,c){return t={tag:t,create:r,destroy:o,deps:c,next:null},r=st.updateQueue,r===null?(r={lastEffect:null,stores:null},st.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t)),t}function ap(){return Sn().memoizedState}function Ll(t,r,o,c){var f=tr();st.flags|=t,f.memoizedState=na(1|r,o,void 0,c===void 0?null:c)}function Ol(t,r,o,c){var f=Sn();c=c===void 0?null:c;var p=void 0;if(St!==null){var _=St.memoizedState;if(p=_.destroy,c!==null&&Wc(c,_.deps)){f.memoizedState=na(r,o,p,c);return}}st.flags|=t,f.memoizedState=na(1|r,o,p,c)}function lp(t,r){return Ll(8390656,8,t,r)}function Kc(t,r){return Ol(2048,8,t,r)}function up(t,r){return Ol(4,2,t,r)}function cp(t,r){return Ol(4,4,t,r)}function hp(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function fp(t,r,o){return o=o!=null?o.concat([t]):null,Ol(4,4,hp.bind(null,r,t),o)}function Yc(){}function dp(t,r){var o=Sn();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&Wc(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function pp(t,r){var o=Sn();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&Wc(r,c[1])?c[0]:(t=t(),o.memoizedState=[t,r],t)}function mp(t,r,o){return($i&21)===0?(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=o):(Fn(o,r)||(o=Vi(),st.lanes|=o,Wi|=o,t.baseState=!0),r)}function T_(t,r){var o=Fe;Fe=o!==0&&4>o?o:4,t(!0);var c=$c.transition;$c.transition={};try{t(!1),r()}finally{Fe=o,$c.transition=c}}function gp(){return Sn().memoizedState}function S_(t,r,o){var c=ni(t);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},yp(t))vp(r,o);else if(o=Qd(t,r,o,c),o!==null){var f=Yt();zn(o,t,c,f),_p(o,r,c)}}function I_(t,r,o){var c=ni(t),f={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(yp(t))vp(r,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,P=p(_,o);if(f.hasEagerState=!0,f.eagerState=P,Fn(P,_)){var N=r.interleaved;N===null?(f.next=f,Fc(r)):(f.next=N.next,N.next=f),r.interleaved=f;return}}catch{}finally{}o=Qd(t,r,f,c),o!==null&&(f=Yt(),zn(o,t,c,f),_p(o,r,c))}}function yp(t){var r=t.alternate;return t===st||r!==null&&r===st}function vp(t,r){Zo=Dl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function _p(t,r,o){if((o&4194240)!==0){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Br(t,o)}}var Ml={readContext:Tn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},A_={readContext:Tn,useCallback:function(t,r){return tr().memoizedState=[t,r===void 0?null:r],t},useContext:Tn,useEffect:lp,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,Ll(4194308,4,hp.bind(null,r,t),o)},useLayoutEffect:function(t,r){return Ll(4194308,4,t,r)},useInsertionEffect:function(t,r){return Ll(4,2,t,r)},useMemo:function(t,r){var o=tr();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var c=tr();return r=o!==void 0?o(r):r,c.memoizedState=c.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},c.queue=t,t=t.dispatch=S_.bind(null,st,t),[c.memoizedState,t]},useRef:function(t){var r=tr();return t={current:t},r.memoizedState=t},useState:op,useDebugValue:Yc,useDeferredValue:function(t){return tr().memoizedState=t},useTransition:function(){var t=op(!1),r=t[0];return t=T_.bind(null,t[1]),tr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var c=st,f=tr();if(rt){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),kt===null)throw Error(n(349));($i&30)!==0||tp(c,r,o)}f.memoizedState=o;var p={value:o,getSnapshot:r};return f.queue=p,lp(rp.bind(null,c,p,t),[t]),c.flags|=2048,na(9,np.bind(null,c,p,o,r),void 0,null),o},useId:function(){var t=tr(),r=kt.identifierPrefix;if(rt){var o=Tr,c=wr;o=(c&~(1<<32-qt(c)-1)).toString(32)+o,r=":"+r+"R"+o,o=ea++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=w_++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},R_={readContext:Tn,useCallback:dp,useContext:Tn,useEffect:Kc,useImperativeHandle:fp,useInsertionEffect:up,useLayoutEffect:cp,useMemo:pp,useReducer:qc,useRef:ap,useState:function(){return qc(ta)},useDebugValue:Yc,useDeferredValue:function(t){var r=Sn();return mp(r,St.memoizedState,t)},useTransition:function(){var t=qc(ta)[0],r=Sn().memoizedState;return[t,r]},useMutableSource:Zd,useSyncExternalStore:ep,useId:gp,unstable_isNewReconciler:!1},C_={readContext:Tn,useCallback:dp,useContext:Tn,useEffect:Kc,useImperativeHandle:fp,useInsertionEffect:up,useLayoutEffect:cp,useMemo:pp,useReducer:Qc,useRef:ap,useState:function(){return Qc(ta)},useDebugValue:Yc,useDeferredValue:function(t){var r=Sn();return St===null?r.memoizedState=t:mp(r,St.memoizedState,t)},useTransition:function(){var t=Qc(ta)[0],r=Sn().memoizedState;return[t,r]},useMutableSource:Zd,useSyncExternalStore:ep,useId:gp,unstable_isNewReconciler:!1};function jn(t,r){if(t&&t.defaultProps){r=K({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function Xc(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:K({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Fl={isMounted:function(t){return(t=t._reactInternals)?xn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var c=Yt(),f=ni(t),p=Ir(c,f);p.payload=r,o!=null&&(p.callback=o),r=Jr(t,p,f),r!==null&&(zn(r,t,f,c),kl(r,t,f))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=Yt(),f=ni(t),p=Ir(c,f);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Jr(t,p,f),r!==null&&(zn(r,t,f,c),kl(r,t,f))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Yt(),c=ni(t),f=Ir(o,c);f.tag=2,r!=null&&(f.callback=r),r=Jr(t,f,c),r!==null&&(zn(r,t,c,o),kl(r,t,c))}};function Ep(t,r,o,c,f,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,p,_):r.prototype&&r.prototype.isPureReactComponent?!zo(o,c)||!zo(f,p):!0}function wp(t,r,o){var c=!1,f=Kr,p=r.contextType;return typeof p=="object"&&p!==null?p=Tn(p):(f=en(r)?bi:Ut.current,c=r.contextTypes,p=(c=c!=null)?Ls(t,f):Kr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Fl,t.stateNode=r,r._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=f,t.__reactInternalMemoizedMaskedChildContext=p),r}function Tp(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&Fl.enqueueReplaceState(r,r.state,null)}function Jc(t,r,o,c){var f=t.stateNode;f.props=o,f.state=t.memoizedState,f.refs={},bc(t);var p=r.contextType;typeof p=="object"&&p!==null?f.context=Tn(p):(p=en(r)?bi:Ut.current,f.context=Ls(t,p)),f.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Xc(t,r,p,o),f.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(r=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),r!==f.state&&Fl.enqueueReplaceState(f,f.state,null),xl(t,o,f,c),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308)}function zs(t,r){try{var o="",c=r;do o+=ae(c),c=c.return;while(c);var f=o}catch(p){f=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:f,digest:null}}function Zc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function eh(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var P_=typeof WeakMap=="function"?WeakMap:Map;function Sp(t,r,o){o=Ir(-1,o),o.tag=3,o.payload={element:null};var c=r.value;return o.callback=function(){Wl||(Wl=!0,mh=c),eh(t,r)},o}function Ip(t,r,o){o=Ir(-1,o),o.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var f=r.value;o.payload=function(){return c(f)},o.callback=function(){eh(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){eh(t,r),typeof c!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function Ap(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new P_;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(f.add(o),t=z_.bind(null,t,r,o),r.then(t,t))}function Rp(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Cp(t,r,o,c,f){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=Ir(-1,1),r.tag=2,Jr(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=f,t)}var k_=oe.ReactCurrentOwner,tn=!1;function Kt(t,r,o,c){r.child=t===null?qd(r,null,o,c):bs(r,t.child,o,c)}function Pp(t,r,o,c,f){o=o.render;var p=r.ref;return Us(r,f),c=Gc(t,r,o,c,p,f),o=Hc(),t!==null&&!tn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~f,Ar(t,r,f)):(rt&&o&&Pc(r),r.flags|=1,Kt(t,r,c,f),r.child)}function kp(t,r,o,c,f){if(t===null){var p=o.type;return typeof p=="function"&&!Th(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,xp(t,r,p,c,f)):(t=Yl(o.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&f)===0){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:zo,o(_,c)&&t.ref===r.ref)return Ar(t,r,f)}return r.flags|=1,t=ii(p,c),t.ref=r.ref,t.return=r,r.child=t}function xp(t,r,o,c,f){if(t!==null){var p=t.memoizedProps;if(zo(p,c)&&t.ref===r.ref)if(tn=!1,r.pendingProps=c=p,(t.lanes&f)!==0)(t.flags&131072)!==0&&(tn=!0);else return r.lanes=t.lanes,Ar(t,r,f)}return th(t,r,o,c,f)}function Np(t,r,o){var c=r.pendingProps,f=c.children,p=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Ws,pn),pn|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Xe(Ws,pn),pn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:o,Xe(Ws,pn),pn|=c}else p!==null?(c=p.baseLanes|o,r.memoizedState=null):c=o,Xe(Ws,pn),pn|=c;return Kt(t,r,f,o),r.child}function Vp(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function th(t,r,o,c,f){var p=en(o)?bi:Ut.current;return p=Ls(r,p),Us(r,f),o=Gc(t,r,o,c,p,f),c=Hc(),t!==null&&!tn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~f,Ar(t,r,f)):(rt&&c&&Pc(r),r.flags|=1,Kt(t,r,o,f),r.child)}function Dp(t,r,o,c,f){if(en(o)){var p=!0;wl(r)}else p=!1;if(Us(r,f),r.stateNode===null)jl(t,r),wp(r,o,c),Jc(r,o,c,f),c=!0;else if(t===null){var _=r.stateNode,P=r.memoizedProps;_.props=P;var N=_.context,G=o.contextType;typeof G=="object"&&G!==null?G=Tn(G):(G=en(o)?bi:Ut.current,G=Ls(r,G));var te=o.getDerivedStateFromProps,re=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function";re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==c||N!==G)&&Tp(r,_,c,G),Xr=!1;var ee=r.memoizedState;_.state=ee,xl(r,c,_,f),N=r.memoizedState,P!==c||ee!==N||Zt.current||Xr?(typeof te=="function"&&(Xc(r,o,te,c),N=r.memoizedState),(P=Xr||Ep(r,o,P,c,ee,N,G))?(re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=N),_.props=c,_.state=N,_.context=G,c=P):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Kd(t,r),P=r.memoizedProps,G=r.type===r.elementType?P:jn(r.type,P),_.props=G,re=r.pendingProps,ee=_.context,N=o.contextType,typeof N=="object"&&N!==null?N=Tn(N):(N=en(o)?bi:Ut.current,N=Ls(r,N));var ve=o.getDerivedStateFromProps;(te=typeof ve=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==re||ee!==N)&&Tp(r,_,c,N),Xr=!1,ee=r.memoizedState,_.state=ee,xl(r,c,_,f);var Se=r.memoizedState;P!==re||ee!==Se||Zt.current||Xr?(typeof ve=="function"&&(Xc(r,o,ve,c),Se=r.memoizedState),(G=Xr||Ep(r,o,G,c,ee,Se,N)||!1)?(te||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Se,N),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Se,N)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||P===t.memoizedProps&&ee===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===t.memoizedProps&&ee===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Se),_.props=c,_.state=Se,_.context=N,c=G):(typeof _.componentDidUpdate!="function"||P===t.memoizedProps&&ee===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===t.memoizedProps&&ee===t.memoizedState||(r.flags|=1024),c=!1)}return nh(t,r,o,c,p,f)}function nh(t,r,o,c,f,p){Vp(t,r);var _=(r.flags&128)!==0;if(!c&&!_)return f&&bd(r,o,!1),Ar(t,r,p);c=r.stateNode,k_.current=r;var P=_&&typeof o.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,t!==null&&_?(r.child=bs(r,t.child,null,p),r.child=bs(r,null,P,p)):Kt(t,r,P,p),r.memoizedState=c.state,f&&bd(r,o,!0),r.child}function Lp(t){var r=t.stateNode;r.pendingContext?Md(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Md(t,r.context,!1),jc(t,r.containerInfo)}function Op(t,r,o,c,f){return Fs(),Vc(f),r.flags|=256,Kt(t,r,o,c),r.child}var rh={dehydrated:null,treeContext:null,retryLane:0};function ih(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mp(t,r,o){var c=r.pendingProps,f=it.current,p=!1,_=(r.flags&128)!==0,P;if((P=_)||(P=t!==null&&t.memoizedState===null?!1:(f&2)!==0),P?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(f|=1),Xe(it,f&1),t===null)return Nc(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=c.children,t=c.fallback,p?(c=r.mode,p=r.child,_={mode:"hidden",children:_},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Xl(_,c,0,null),t=Qi(t,c,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=ih(o),r.memoizedState=rh,t):sh(r,_));if(f=t.memoizedState,f!==null&&(P=f.dehydrated,P!==null))return x_(t,r,_,c,P,f,o);if(p){p=c.fallback,_=r.mode,f=t.child,P=f.sibling;var N={mode:"hidden",children:c.children};return(_&1)===0&&r.child!==f?(c=r.child,c.childLanes=0,c.pendingProps=N,r.deletions=null):(c=ii(f,N),c.subtreeFlags=f.subtreeFlags&14680064),P!==null?p=ii(P,p):(p=Qi(p,_,o,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,_=t.child.memoizedState,_=_===null?ih(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=rh,c}return p=t.child,t=p.sibling,c=ii(p,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=o),c.return=r,c.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=c,r.memoizedState=null,c}function sh(t,r){return r=Xl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function bl(t,r,o,c){return c!==null&&Vc(c),bs(r,t.child,null,o),t=sh(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function x_(t,r,o,c,f,p,_){if(o)return r.flags&256?(r.flags&=-257,c=Zc(Error(n(422))),bl(t,r,_,c)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=c.fallback,f=r.mode,c=Xl({mode:"visible",children:c.children},f,0,null),p=Qi(p,f,_,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,(r.mode&1)!==0&&bs(r,t.child,null,_),r.child.memoizedState=ih(_),r.memoizedState=rh,p);if((r.mode&1)===0)return bl(t,r,_,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var P=c.dgst;return c=P,p=Error(n(419)),c=Zc(p,c,void 0),bl(t,r,_,c)}if(P=(_&t.childLanes)!==0,tn||P){if(c=kt,c!==null){switch(_&-_){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|_))!==0?0:f,f!==0&&f!==p.retryLane&&(p.retryLane=f,Sr(t,f),zn(c,t,f,-1))}return wh(),c=Zc(Error(n(421))),bl(t,r,_,c)}return f.data==="$?"?(r.flags|=128,r.child=t.child,r=$_.bind(null,t),f._reactRetry=r,null):(t=p.treeContext,dn=qr(f.nextSibling),fn=r,rt=!0,bn=null,t!==null&&(En[wn++]=wr,En[wn++]=Tr,En[wn++]=ji,wr=t.id,Tr=t.overflow,ji=r),r=sh(r,c.children),r.flags|=4096,r)}function Fp(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Mc(t.return,r,o)}function oh(t,r,o,c,f){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=o,p.tailMode=f)}function bp(t,r,o){var c=r.pendingProps,f=c.revealOrder,p=c.tail;if(Kt(t,r,c.children,o),c=it.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fp(t,o,r);else if(t.tag===19)Fp(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(Xe(it,c),(r.mode&1)===0)r.memoizedState=null;else switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&Nl(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),oh(r,!1,f,o,p);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Nl(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}oh(r,!0,o,null,p);break;case"together":oh(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function jl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Ar(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Wi|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=ii(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=ii(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function N_(t,r,o){switch(r.tag){case 3:Lp(r),Fs();break;case 5:Jd(r);break;case 1:en(r.type)&&wl(r);break;case 4:jc(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,f=r.memoizedProps.value;Xe(Cl,c._currentValue),c._currentValue=f;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Xe(it,it.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Mp(t,r,o):(Xe(it,it.current&1),t=Ar(t,r,o),t!==null?t.sibling:null);Xe(it,it.current&1);break;case 19:if(c=(o&r.childLanes)!==0,(t.flags&128)!==0){if(c)return bp(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Xe(it,it.current),c)break;return null;case 22:case 23:return r.lanes=0,Np(t,r,o)}return Ar(t,r,o)}var jp,ah,Up,Bp;jp=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},ah=function(){},Up=function(t,r,o,c){var f=t.memoizedProps;if(f!==c){t=r.stateNode,zi(er.current);var p=null;switch(o){case"input":f=qe(t,f),c=qe(t,c),p=[];break;case"select":f=K({},f,{value:void 0}),c=K({},c,{value:void 0}),p=[];break;case"textarea":f=yo(t,f),c=yo(t,c),p=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=vl)}So(o,c);var _;o=null;for(G in f)if(!c.hasOwnProperty(G)&&f.hasOwnProperty(G)&&f[G]!=null)if(G==="style"){var P=f[G];for(_ in P)P.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(a.hasOwnProperty(G)?p||(p=[]):(p=p||[]).push(G,null));for(G in c){var N=c[G];if(P=f!=null?f[G]:void 0,c.hasOwnProperty(G)&&N!==P&&(N!=null||P!=null))if(G==="style")if(P){for(_ in P)!P.hasOwnProperty(_)||N&&N.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in N)N.hasOwnProperty(_)&&P[_]!==N[_]&&(o||(o={}),o[_]=N[_])}else o||(p||(p=[]),p.push(G,o)),o=N;else G==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,P=P?P.__html:void 0,N!=null&&P!==N&&(p=p||[]).push(G,N)):G==="children"?typeof N!="string"&&typeof N!="number"||(p=p||[]).push(G,""+N):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(a.hasOwnProperty(G)?(N!=null&&G==="onScroll"&&Ze("scroll",t),p||P===N||(p=[])):(p=p||[]).push(G,N))}o&&(p=p||[]).push("style",o);var G=p;(r.updateQueue=G)&&(r.flags|=4)}},Bp=function(t,r,o,c){o!==c&&(r.flags|=4)};function ra(t,r){if(!rt)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function zt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function V_(t,r,o){var c=r.pendingProps;switch(kc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(r),null;case 1:return en(r.type)&&El(),zt(r),null;case 3:return c=r.stateNode,Bs(),et(Zt),et(Ut),zc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(Al(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,bn!==null&&(vh(bn),bn=null))),ah(t,r),zt(r),null;case 5:Uc(r);var f=zi(Jo.current);if(o=r.type,t!==null&&r.stateNode!=null)Up(t,r,o,c,f),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(n(166));return zt(r),null}if(t=zi(er.current),Al(r)){c=r.stateNode,o=r.type;var p=r.memoizedProps;switch(c[Zn]=r,c[qo]=p,t=(r.mode&1)!==0,o){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(f=0;f<Wo.length;f++)Ze(Wo[f],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":lt(c,p),Ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ze("invalid",c);break;case"textarea":is(c,p),Ze("invalid",c)}So(o,p),f=null;for(var _ in p)if(p.hasOwnProperty(_)){var P=p[_];_==="children"?typeof P=="string"?c.textContent!==P&&(p.suppressHydrationWarning!==!0&&yl(c.textContent,P,t),f=["children",P]):typeof P=="number"&&c.textContent!==""+P&&(p.suppressHydrationWarning!==!0&&yl(c.textContent,P,t),f=["children",""+P]):a.hasOwnProperty(_)&&P!=null&&_==="onScroll"&&Ze("scroll",c)}switch(o){case"input":Ge(c),$a(c,p,!0);break;case"textarea":Ge(c),vo(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=vl)}c=f,r.updateQueue=c,c!==null&&(r.flags|=4)}else{_=f.nodeType===9?f:f.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Et(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=_.createElement(o,{is:c.is}):(t=_.createElement(o),o==="select"&&(_=t,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):t=_.createElementNS(t,o),t[Zn]=r,t[qo]=c,jp(t,r,!1,!1),r.stateNode=t;e:{switch(_=Io(o,c),o){case"dialog":Ze("cancel",t),Ze("close",t),f=c;break;case"iframe":case"object":case"embed":Ze("load",t),f=c;break;case"video":case"audio":for(f=0;f<Wo.length;f++)Ze(Wo[f],t);f=c;break;case"source":Ze("error",t),f=c;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),f=c;break;case"details":Ze("toggle",t),f=c;break;case"input":lt(t,c),f=qe(t,c),Ze("invalid",t);break;case"option":f=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},f=K({},c,{value:void 0}),Ze("invalid",t);break;case"textarea":is(t,c),f=yo(t,c),Ze("invalid",t);break;default:f=c}So(o,f),P=f;for(p in P)if(P.hasOwnProperty(p)){var N=P[p];p==="style"?wo(t,N):p==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&_o(t,N)):p==="children"?typeof N=="string"?(o!=="textarea"||N!=="")&&Mr(t,N):typeof N=="number"&&Mr(t,""+N):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?N!=null&&p==="onScroll"&&Ze("scroll",t):N!=null&&Q(t,p,N,_))}switch(o){case"input":Ge(t),$a(t,c,!1);break;case"textarea":Ge(t),vo(t);break;case"option":c.value!=null&&t.setAttribute("value",""+de(c.value));break;case"select":t.multiple=!!c.multiple,p=c.value,p!=null?hr(t,!!c.multiple,p,!1):c.defaultValue!=null&&hr(t,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(t.onclick=vl)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return zt(r),null;case 6:if(t&&r.stateNode!=null)Bp(t,r,t.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(n(166));if(o=zi(Jo.current),zi(er.current),Al(r)){if(c=r.stateNode,o=r.memoizedProps,c[Zn]=r,(p=c.nodeValue!==o)&&(t=fn,t!==null))switch(t.tag){case 3:yl(c.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yl(c.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[Zn]=r,r.stateNode=c}return zt(r),null;case 13:if(et(it),c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&dn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Wd(),Fs(),r.flags|=98560,p=!1;else if(p=Al(r),c!==null&&c.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Zn]=r}else Fs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;zt(r),p=!1}else bn!==null&&(vh(bn),bn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(it.current&1)!==0?It===0&&(It=3):wh())),r.updateQueue!==null&&(r.flags|=4),zt(r),null);case 4:return Bs(),ah(t,r),t===null&&Go(r.stateNode.containerInfo),zt(r),null;case 10:return Oc(r.type._context),zt(r),null;case 17:return en(r.type)&&El(),zt(r),null;case 19:if(et(it),p=r.memoizedState,p===null)return zt(r),null;if(c=(r.flags&128)!==0,_=p.rendering,_===null)if(c)ra(p,!1);else{if(It!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(_=Nl(t),_!==null){for(r.flags|=128,ra(p,!1),c=_.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=o,o=r.child;o!==null;)p=o,t=c,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Xe(it,it.current&1|2),r.child}t=t.sibling}p.tail!==null&&Ye()>Gs&&(r.flags|=128,c=!0,ra(p,!1),r.lanes=4194304)}else{if(!c)if(t=Nl(_),t!==null){if(r.flags|=128,c=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),ra(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!rt)return zt(r),null}else 2*Ye()-p.renderingStartTime>Gs&&o!==1073741824&&(r.flags|=128,c=!0,ra(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Ye(),r.sibling=null,o=it.current,Xe(it,c?o&1|2:o&1),r):(zt(r),null);case 22:case 23:return Eh(),c=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(pn&1073741824)!==0&&(zt(r),r.subtreeFlags&6&&(r.flags|=8192)):zt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function D_(t,r){switch(kc(r),r.tag){case 1:return en(r.type)&&El(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Bs(),et(Zt),et(Ut),zc(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Uc(r),null;case 13:if(et(it),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Fs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return et(it),null;case 4:return Bs(),null;case 10:return Oc(r.type._context),null;case 22:case 23:return Eh(),null;case 24:return null;default:return null}}var Ul=!1,$t=!1,L_=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function $s(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){ut(t,r,c)}else o.current=null}function lh(t,r,o){try{o()}catch(c){ut(t,r,c)}}var zp=!1;function O_(t,r){if(Ec=Wr,t=Ed(),fc(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,P=-1,N=-1,G=0,te=0,re=t,ee=null;t:for(;;){for(var ve;re!==o||f!==0&&re.nodeType!==3||(P=_+f),re!==p||c!==0&&re.nodeType!==3||(N=_+c),re.nodeType===3&&(_+=re.nodeValue.length),(ve=re.firstChild)!==null;)ee=re,re=ve;for(;;){if(re===t)break t;if(ee===o&&++G===f&&(P=_),ee===p&&++te===c&&(N=_),(ve=re.nextSibling)!==null)break;re=ee,ee=re.parentNode}re=ve}o=P===-1||N===-1?null:{start:P,end:N}}else o=null}o=o||{start:0,end:0}}else o=null;for(wc={focusedElem:t,selectionRange:o},Wr=!1,Ee=r;Ee!==null;)if(r=Ee,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Ee=t;else for(;Ee!==null;){r=Ee;try{var Se=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ie=Se.memoizedProps,ht=Se.memoizedState,U=r.stateNode,O=U.getSnapshotBeforeUpdate(r.elementType===r.type?Ie:jn(r.type,Ie),ht);U.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var $=r.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(le){ut(r,r.return,le)}if(t=r.sibling,t!==null){t.return=r.return,Ee=t;break}Ee=r.return}return Se=zp,zp=!1,Se}function ia(t,r,o){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&t)===t){var p=f.destroy;f.destroy=void 0,p!==void 0&&lh(r,o,p)}f=f.next}while(f!==c)}}function Bl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var c=o.create;o.destroy=c()}o=o.next}while(o!==r)}}function uh(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function $p(t){var r=t.alternate;r!==null&&(t.alternate=null,$p(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Zn],delete r[qo],delete r[Ac],delete r[y_],delete r[v_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wp(t){return t.tag===5||t.tag===3||t.tag===4}function Gp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ch(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=vl));else if(c!==4&&(t=t.child,t!==null))for(ch(t,r,o),t=t.sibling;t!==null;)ch(t,r,o),t=t.sibling}function hh(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(hh(t,r,o),t=t.sibling;t!==null;)hh(t,r,o),t=t.sibling}var Ot=null,Un=!1;function Zr(t,r,o){for(o=o.child;o!==null;)Hp(t,r,o),o=o.sibling}function Hp(t,r,o){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(xi,o)}catch{}switch(o.tag){case 5:$t||$s(o,r);case 6:var c=Ot,f=Un;Ot=null,Zr(t,r,o),Ot=c,Un=f,Ot!==null&&(Un?(t=Ot,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Ot.removeChild(o.stateNode));break;case 18:Ot!==null&&(Un?(t=Ot,o=o.stateNode,t.nodeType===8?Ic(t.parentNode,o):t.nodeType===1&&Ic(t,o),On(t)):Ic(Ot,o.stateNode));break;case 4:c=Ot,f=Un,Ot=o.stateNode.containerInfo,Un=!0,Zr(t,r,o),Ot=c,Un=f;break;case 0:case 11:case 14:case 15:if(!$t&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var p=f,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&lh(o,r,_),f=f.next}while(f!==c)}Zr(t,r,o);break;case 1:if(!$t&&($s(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(P){ut(o,r,P)}Zr(t,r,o);break;case 21:Zr(t,r,o);break;case 22:o.mode&1?($t=(c=$t)||o.memoizedState!==null,Zr(t,r,o),$t=c):Zr(t,r,o);break;default:Zr(t,r,o)}}function qp(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new L_),r.forEach(function(c){var f=W_.bind(null,t,c);o.has(c)||(o.add(c),c.then(f,f))})}}function Bn(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];try{var p=t,_=r,P=_;e:for(;P!==null;){switch(P.tag){case 5:Ot=P.stateNode,Un=!1;break e;case 3:Ot=P.stateNode.containerInfo,Un=!0;break e;case 4:Ot=P.stateNode.containerInfo,Un=!0;break e}P=P.return}if(Ot===null)throw Error(n(160));Hp(p,_,f),Ot=null,Un=!1;var N=f.alternate;N!==null&&(N.return=null),f.return=null}catch(G){ut(f,r,G)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Qp(r,t),r=r.sibling}function Qp(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(r,t),nr(t),c&4){try{ia(3,t,t.return),Bl(3,t)}catch(Ie){ut(t,t.return,Ie)}try{ia(5,t,t.return)}catch(Ie){ut(t,t.return,Ie)}}break;case 1:Bn(r,t),nr(t),c&512&&o!==null&&$s(o,o.return);break;case 5:if(Bn(r,t),nr(t),c&512&&o!==null&&$s(o,o.return),t.flags&32){var f=t.stateNode;try{Mr(f,"")}catch(Ie){ut(t,t.return,Ie)}}if(c&4&&(f=t.stateNode,f!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,P=t.type,N=t.updateQueue;if(t.updateQueue=null,N!==null)try{P==="input"&&p.type==="radio"&&p.name!=null&&mo(f,p),Io(P,_);var G=Io(P,p);for(_=0;_<N.length;_+=2){var te=N[_],re=N[_+1];te==="style"?wo(f,re):te==="dangerouslySetInnerHTML"?_o(f,re):te==="children"?Mr(f,re):Q(f,te,re,G)}switch(P){case"input":go(f,p);break;case"textarea":ss(f,p);break;case"select":var ee=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!p.multiple;var ve=p.value;ve!=null?hr(f,!!p.multiple,ve,!1):ee!==!!p.multiple&&(p.defaultValue!=null?hr(f,!!p.multiple,p.defaultValue,!0):hr(f,!!p.multiple,p.multiple?[]:"",!1))}f[qo]=p}catch(Ie){ut(t,t.return,Ie)}}break;case 6:if(Bn(r,t),nr(t),c&4){if(t.stateNode===null)throw Error(n(162));f=t.stateNode,p=t.memoizedProps;try{f.nodeValue=p}catch(Ie){ut(t,t.return,Ie)}}break;case 3:if(Bn(r,t),nr(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{On(r.containerInfo)}catch(Ie){ut(t,t.return,Ie)}break;case 4:Bn(r,t),nr(t);break;case 13:Bn(r,t),nr(t),f=t.child,f.flags&8192&&(p=f.memoizedState!==null,f.stateNode.isHidden=p,!p||f.alternate!==null&&f.alternate.memoizedState!==null||(ph=Ye())),c&4&&qp(t);break;case 22:if(te=o!==null&&o.memoizedState!==null,t.mode&1?($t=(G=$t)||te,Bn(r,t),$t=G):Bn(r,t),nr(t),c&8192){if(G=t.memoizedState!==null,(t.stateNode.isHidden=G)&&!te&&(t.mode&1)!==0)for(Ee=t,te=t.child;te!==null;){for(re=Ee=te;Ee!==null;){switch(ee=Ee,ve=ee.child,ee.tag){case 0:case 11:case 14:case 15:ia(4,ee,ee.return);break;case 1:$s(ee,ee.return);var Se=ee.stateNode;if(typeof Se.componentWillUnmount=="function"){c=ee,o=ee.return;try{r=c,Se.props=r.memoizedProps,Se.state=r.memoizedState,Se.componentWillUnmount()}catch(Ie){ut(c,o,Ie)}}break;case 5:$s(ee,ee.return);break;case 22:if(ee.memoizedState!==null){Xp(re);continue}}ve!==null?(ve.return=ee,Ee=ve):Xp(re)}te=te.sibling}e:for(te=null,re=t;;){if(re.tag===5){if(te===null){te=re;try{f=re.stateNode,G?(p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(P=re.stateNode,N=re.memoizedProps.style,_=N!=null&&N.hasOwnProperty("display")?N.display:null,P.style.display=Eo("display",_))}catch(Ie){ut(t,t.return,Ie)}}}else if(re.tag===6){if(te===null)try{re.stateNode.nodeValue=G?"":re.memoizedProps}catch(Ie){ut(t,t.return,Ie)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===t)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===t)break e;for(;re.sibling===null;){if(re.return===null||re.return===t)break e;te===re&&(te=null),re=re.return}te===re&&(te=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Bn(r,t),nr(t),c&4&&qp(t);break;case 21:break;default:Bn(r,t),nr(t)}}function nr(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Wp(o)){var c=o;break e}o=o.return}throw Error(n(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Mr(f,""),c.flags&=-33);var p=Gp(t);hh(t,p,f);break;case 3:case 4:var _=c.stateNode.containerInfo,P=Gp(t);ch(t,P,_);break;default:throw Error(n(161))}}catch(N){ut(t,t.return,N)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function M_(t,r,o){Ee=t,Kp(t)}function Kp(t,r,o){for(var c=(t.mode&1)!==0;Ee!==null;){var f=Ee,p=f.child;if(f.tag===22&&c){var _=f.memoizedState!==null||Ul;if(!_){var P=f.alternate,N=P!==null&&P.memoizedState!==null||$t;P=Ul;var G=$t;if(Ul=_,($t=N)&&!G)for(Ee=f;Ee!==null;)_=Ee,N=_.child,_.tag===22&&_.memoizedState!==null?Jp(f):N!==null?(N.return=_,Ee=N):Jp(f);for(;p!==null;)Ee=p,Kp(p),p=p.sibling;Ee=f,Ul=P,$t=G}Yp(t)}else(f.subtreeFlags&8772)!==0&&p!==null?(p.return=f,Ee=p):Yp(t)}}function Yp(t){for(;Ee!==null;){var r=Ee;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:$t||Bl(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!$t)if(o===null)c.componentDidMount();else{var f=r.elementType===r.type?o.memoizedProps:jn(r.type,o.memoizedProps);c.componentDidUpdate(f,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Xd(r,p,c);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Xd(r,_,o)}break;case 5:var P=r.stateNode;if(o===null&&r.flags&4){o=P;var N=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&o.focus();break;case"img":N.src&&(o.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var G=r.alternate;if(G!==null){var te=G.memoizedState;if(te!==null){var re=te.dehydrated;re!==null&&On(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}$t||r.flags&512&&uh(r)}catch(ee){ut(r,r.return,ee)}}if(r===t){Ee=null;break}if(o=r.sibling,o!==null){o.return=r.return,Ee=o;break}Ee=r.return}}function Xp(t){for(;Ee!==null;){var r=Ee;if(r===t){Ee=null;break}var o=r.sibling;if(o!==null){o.return=r.return,Ee=o;break}Ee=r.return}}function Jp(t){for(;Ee!==null;){var r=Ee;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Bl(4,r)}catch(N){ut(r,o,N)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var f=r.return;try{c.componentDidMount()}catch(N){ut(r,f,N)}}var p=r.return;try{uh(r)}catch(N){ut(r,p,N)}break;case 5:var _=r.return;try{uh(r)}catch(N){ut(r,_,N)}}}catch(N){ut(r,r.return,N)}if(r===t){Ee=null;break}var P=r.sibling;if(P!==null){P.return=r.return,Ee=P;break}Ee=r.return}}var F_=Math.ceil,zl=oe.ReactCurrentDispatcher,fh=oe.ReactCurrentOwner,In=oe.ReactCurrentBatchConfig,ze=0,kt=null,pt=null,Mt=0,pn=0,Ws=Qr(0),It=0,sa=null,Wi=0,$l=0,dh=0,oa=null,nn=null,ph=0,Gs=1/0,Rr=null,Wl=!1,mh=null,ei=null,Gl=!1,ti=null,Hl=0,aa=0,gh=null,ql=-1,Ql=0;function Yt(){return(ze&6)!==0?Ye():ql!==-1?ql:ql=Ye()}function ni(t){return(t.mode&1)===0?1:(ze&2)!==0&&Mt!==0?Mt&-Mt:E_.transition!==null?(Ql===0&&(Ql=Vi()),Ql):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:Oo(t.type)),t)}function zn(t,r,o,c){if(50<aa)throw aa=0,gh=null,Error(n(185));Ur(t,o,c),((ze&2)===0||t!==kt)&&(t===kt&&((ze&2)===0&&($l|=o),It===4&&ri(t,Mt)),rn(t,c),o===1&&ze===0&&(r.mode&1)===0&&(Gs=Ye()+500,Tl&&Yr()))}function rn(t,r){var o=t.callbackNode;pr(t,r);var c=Ni(t,t===kt?Mt:0);if(c===0)o!==null&&xo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=c&-c,t.callbackPriority!==r){if(o!=null&&xo(o),r===1)t.tag===0?__(em.bind(null,t)):jd(em.bind(null,t)),m_(function(){(ze&6)===0&&Yr()}),o=null;else{switch(zr(c)){case 1:o=ki;break;case 4:o=Fr;break;case 16:o=yn;break;case 536870912:o=Qa;break;default:o=yn}o=lm(o,Zp.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Zp(t,r){if(ql=-1,Ql=0,(ze&6)!==0)throw Error(n(327));var o=t.callbackNode;if(Hs()&&t.callbackNode!==o)return null;var c=Ni(t,t===kt?Mt:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||r)r=Kl(t,c);else{r=c;var f=ze;ze|=2;var p=nm();(kt!==t||Mt!==r)&&(Rr=null,Gs=Ye()+500,Hi(t,r));do try{U_();break}catch(P){tm(t,P)}while(!0);Lc(),zl.current=p,ze=f,pt!==null?r=0:(kt=null,Mt=0,r=It)}if(r!==0){if(r===2&&(f=un(t),f!==0&&(c=f,r=yh(t,f))),r===1)throw o=sa,Hi(t,0),ri(t,c),rn(t,Ye()),o;if(r===6)ri(t,c);else{if(f=t.current.alternate,(c&30)===0&&!b_(f)&&(r=Kl(t,c),r===2&&(p=un(t),p!==0&&(c=p,r=yh(t,p))),r===1))throw o=sa,Hi(t,0),ri(t,c),rn(t,Ye()),o;switch(t.finishedWork=f,t.finishedLanes=c,r){case 0:case 1:throw Error(n(345));case 2:qi(t,nn,Rr);break;case 3:if(ri(t,c),(c&130023424)===c&&(r=ph+500-Ye(),10<r)){if(Ni(t,0)!==0)break;if(f=t.suspendedLanes,(f&c)!==c){Yt(),t.pingedLanes|=t.suspendedLanes&f;break}t.timeoutHandle=Sc(qi.bind(null,t,nn,Rr),r);break}qi(t,nn,Rr);break;case 4:if(ri(t,c),(c&4194240)===c)break;for(r=t.eventTimes,f=-1;0<c;){var _=31-qt(c);p=1<<_,_=r[_],_>f&&(f=_),c&=~p}if(c=f,c=Ye()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*F_(c/1960))-c,10<c){t.timeoutHandle=Sc(qi.bind(null,t,nn,Rr),c);break}qi(t,nn,Rr);break;case 5:qi(t,nn,Rr);break;default:throw Error(n(329))}}}return rn(t,Ye()),t.callbackNode===o?Zp.bind(null,t):null}function yh(t,r){var o=oa;return t.current.memoizedState.isDehydrated&&(Hi(t,r).flags|=256),t=Kl(t,r),t!==2&&(r=nn,nn=o,r!==null&&vh(r)),t}function vh(t){nn===null?nn=t:nn.push.apply(nn,t)}function b_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var f=o[c],p=f.getSnapshot;f=f.value;try{if(!Fn(p(),f))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ri(t,r){for(r&=~dh,r&=~$l,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-qt(r),c=1<<o;t[o]=-1,r&=~c}}function em(t){if((ze&6)!==0)throw Error(n(327));Hs();var r=Ni(t,0);if((r&1)===0)return rn(t,Ye()),null;var o=Kl(t,r);if(t.tag!==0&&o===2){var c=un(t);c!==0&&(r=c,o=yh(t,c))}if(o===1)throw o=sa,Hi(t,0),ri(t,r),rn(t,Ye()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,qi(t,nn,Rr),rn(t,Ye()),null}function _h(t,r){var o=ze;ze|=1;try{return t(r)}finally{ze=o,ze===0&&(Gs=Ye()+500,Tl&&Yr())}}function Gi(t){ti!==null&&ti.tag===0&&(ze&6)===0&&Hs();var r=ze;ze|=1;var o=In.transition,c=Fe;try{if(In.transition=null,Fe=1,t)return t()}finally{Fe=c,In.transition=o,ze=r,(ze&6)===0&&Yr()}}function Eh(){pn=Ws.current,et(Ws)}function Hi(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,p_(o)),pt!==null)for(o=pt.return;o!==null;){var c=o;switch(kc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&El();break;case 3:Bs(),et(Zt),et(Ut),zc();break;case 5:Uc(c);break;case 4:Bs();break;case 13:et(it);break;case 19:et(it);break;case 10:Oc(c.type._context);break;case 22:case 23:Eh()}o=o.return}if(kt=t,pt=t=ii(t.current,null),Mt=pn=r,It=0,sa=null,dh=$l=Wi=0,nn=oa=null,Bi!==null){for(r=0;r<Bi.length;r++)if(o=Bi[r],c=o.interleaved,c!==null){o.interleaved=null;var f=c.next,p=o.pending;if(p!==null){var _=p.next;p.next=f,c.next=_}o.pending=c}Bi=null}return t}function tm(t,r){do{var o=pt;try{if(Lc(),Vl.current=Ml,Dl){for(var c=st.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Dl=!1}if($i=0,Pt=St=st=null,Zo=!1,ea=0,fh.current=null,o===null||o.return===null){It=1,sa=r,pt=null;break}e:{var p=t,_=o.return,P=o,N=r;if(r=Mt,P.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var G=N,te=P,re=te.tag;if((te.mode&1)===0&&(re===0||re===11||re===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ve=Rp(_);if(ve!==null){ve.flags&=-257,Cp(ve,_,P,p,r),ve.mode&1&&Ap(p,G,r),r=ve,N=G;var Se=r.updateQueue;if(Se===null){var Ie=new Set;Ie.add(N),r.updateQueue=Ie}else Se.add(N);break e}else{if((r&1)===0){Ap(p,G,r),wh();break e}N=Error(n(426))}}else if(rt&&P.mode&1){var ht=Rp(_);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),Cp(ht,_,P,p,r),Vc(zs(N,P));break e}}p=N=zs(N,P),It!==4&&(It=2),oa===null?oa=[p]:oa.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var U=Sp(p,N,r);Yd(p,U);break e;case 1:P=N;var O=p.type,$=p.stateNode;if((p.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(ei===null||!ei.has($)))){p.flags|=65536,r&=-r,p.lanes|=r;var le=Ip(p,P,r);Yd(p,le);break e}}p=p.return}while(p!==null)}im(o)}catch(Ae){r=Ae,pt===o&&o!==null&&(pt=o=o.return);continue}break}while(!0)}function nm(){var t=zl.current;return zl.current=Ml,t===null?Ml:t}function wh(){(It===0||It===3||It===2)&&(It=4),kt===null||(Wi&268435455)===0&&($l&268435455)===0||ri(kt,Mt)}function Kl(t,r){var o=ze;ze|=2;var c=nm();(kt!==t||Mt!==r)&&(Rr=null,Hi(t,r));do try{j_();break}catch(f){tm(t,f)}while(!0);if(Lc(),ze=o,zl.current=c,pt!==null)throw Error(n(261));return kt=null,Mt=0,It}function j_(){for(;pt!==null;)rm(pt)}function U_(){for(;pt!==null&&!Ha();)rm(pt)}function rm(t){var r=am(t.alternate,t,pn);t.memoizedProps=t.pendingProps,r===null?im(t):pt=r,fh.current=null}function im(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=V_(o,r,pn),o!==null){pt=o;return}}else{if(o=D_(o,r),o!==null){o.flags&=32767,pt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,pt=null;return}}if(r=r.sibling,r!==null){pt=r;return}pt=r=t}while(r!==null);It===0&&(It=5)}function qi(t,r,o){var c=Fe,f=In.transition;try{In.transition=null,Fe=1,B_(t,r,o,c)}finally{In.transition=f,Fe=c}return null}function B_(t,r,o,c){do Hs();while(ti!==null);if((ze&6)!==0)throw Error(n(327));o=t.finishedWork;var f=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(Qe(t,p),t===kt&&(pt=kt=null,Mt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Gl||(Gl=!0,lm(yn,function(){return Hs(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=In.transition,In.transition=null;var _=Fe;Fe=1;var P=ze;ze|=4,fh.current=null,O_(t,o),Qp(o,t),a_(wc),Wr=!!Ec,wc=Ec=null,t.current=o,M_(o),ic(),ze=P,Fe=_,In.transition=p}else t.current=o;if(Gl&&(Gl=!1,ti=t,Hl=f),p=t.pendingLanes,p===0&&(ei=null),Ka(o.stateNode),rn(t,Ye()),r!==null)for(c=t.onRecoverableError,o=0;o<r.length;o++)f=r[o],c(f.value,{componentStack:f.stack,digest:f.digest});if(Wl)throw Wl=!1,t=mh,mh=null,t;return(Hl&1)!==0&&t.tag!==0&&Hs(),p=t.pendingLanes,(p&1)!==0?t===gh?aa++:(aa=0,gh=t):aa=0,Yr(),null}function Hs(){if(ti!==null){var t=zr(Hl),r=In.transition,o=Fe;try{if(In.transition=null,Fe=16>t?16:t,ti===null)var c=!1;else{if(t=ti,ti=null,Hl=0,(ze&6)!==0)throw Error(n(331));var f=ze;for(ze|=4,Ee=t.current;Ee!==null;){var p=Ee,_=p.child;if((Ee.flags&16)!==0){var P=p.deletions;if(P!==null){for(var N=0;N<P.length;N++){var G=P[N];for(Ee=G;Ee!==null;){var te=Ee;switch(te.tag){case 0:case 11:case 15:ia(8,te,p)}var re=te.child;if(re!==null)re.return=te,Ee=re;else for(;Ee!==null;){te=Ee;var ee=te.sibling,ve=te.return;if($p(te),te===G){Ee=null;break}if(ee!==null){ee.return=ve,Ee=ee;break}Ee=ve}}}var Se=p.alternate;if(Se!==null){var Ie=Se.child;if(Ie!==null){Se.child=null;do{var ht=Ie.sibling;Ie.sibling=null,Ie=ht}while(Ie!==null)}}Ee=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,Ee=_;else e:for(;Ee!==null;){if(p=Ee,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:ia(9,p,p.return)}var U=p.sibling;if(U!==null){U.return=p.return,Ee=U;break e}Ee=p.return}}var O=t.current;for(Ee=O;Ee!==null;){_=Ee;var $=_.child;if((_.subtreeFlags&2064)!==0&&$!==null)$.return=_,Ee=$;else e:for(_=O;Ee!==null;){if(P=Ee,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Bl(9,P)}}catch(Ae){ut(P,P.return,Ae)}if(P===_){Ee=null;break e}var le=P.sibling;if(le!==null){le.return=P.return,Ee=le;break e}Ee=P.return}}if(ze=f,Yr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(xi,t)}catch{}c=!0}return c}finally{Fe=o,In.transition=r}}return!1}function sm(t,r,o){r=zs(o,r),r=Sp(t,r,1),t=Jr(t,r,1),r=Yt(),t!==null&&(Ur(t,1,r),rn(t,r))}function ut(t,r,o){if(t.tag===3)sm(t,t,o);else for(;r!==null;){if(r.tag===3){sm(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ei===null||!ei.has(c))){t=zs(o,t),t=Ip(r,t,1),r=Jr(r,t,1),t=Yt(),r!==null&&(Ur(r,1,t),rn(r,t));break}}r=r.return}}function z_(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),r=Yt(),t.pingedLanes|=t.suspendedLanes&o,kt===t&&(Mt&o)===o&&(It===4||It===3&&(Mt&130023424)===Mt&&500>Ye()-ph?Hi(t,0):dh|=o),rn(t,r)}function om(t,r){r===0&&((t.mode&1)===0?r=1:(r=ms,ms<<=1,(ms&130023424)===0&&(ms=4194304)));var o=Yt();t=Sr(t,r),t!==null&&(Ur(t,r,o),rn(t,o))}function $_(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),om(t,o)}function W_(t,r){var o=0;switch(t.tag){case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(r),om(t,o)}var am;am=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Zt.current)tn=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return tn=!1,N_(t,r,o);tn=(t.flags&131072)!==0}else tn=!1,rt&&(r.flags&1048576)!==0&&Ud(r,Il,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;jl(t,r),t=r.pendingProps;var f=Ls(r,Ut.current);Us(r,o),f=Gc(null,r,c,t,f,o);var p=Hc();return r.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,en(c)?(p=!0,wl(r)):p=!1,r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,bc(r),f.updater=Fl,r.stateNode=f,f._reactInternals=r,Jc(r,c,t,o),r=nh(null,r,c,!0,p,o)):(r.tag=0,rt&&p&&Pc(r),Kt(null,r,f,o),r=r.child),r;case 16:c=r.elementType;e:{switch(jl(t,r),t=r.pendingProps,f=c._init,c=f(c._payload),r.type=c,f=r.tag=H_(c),t=jn(c,t),f){case 0:r=th(null,r,c,t,o);break e;case 1:r=Dp(null,r,c,t,o);break e;case 11:r=Pp(null,r,c,t,o);break e;case 14:r=kp(null,r,c,jn(c.type,t),o);break e}throw Error(n(306,c,""))}return r;case 0:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:jn(c,f),th(t,r,c,f,o);case 1:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:jn(c,f),Dp(t,r,c,f,o);case 3:e:{if(Lp(r),t===null)throw Error(n(387));c=r.pendingProps,p=r.memoizedState,f=p.element,Kd(t,r),xl(r,c,null,o);var _=r.memoizedState;if(c=_.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){f=zs(Error(n(423)),r),r=Op(t,r,c,o,f);break e}else if(c!==f){f=zs(Error(n(424)),r),r=Op(t,r,c,o,f);break e}else for(dn=qr(r.stateNode.containerInfo.firstChild),fn=r,rt=!0,bn=null,o=qd(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Fs(),c===f){r=Ar(t,r,o);break e}Kt(t,r,c,o)}r=r.child}return r;case 5:return Jd(r),t===null&&Nc(r),c=r.type,f=r.pendingProps,p=t!==null?t.memoizedProps:null,_=f.children,Tc(c,f)?_=null:p!==null&&Tc(c,p)&&(r.flags|=32),Vp(t,r),Kt(t,r,_,o),r.child;case 6:return t===null&&Nc(r),null;case 13:return Mp(t,r,o);case 4:return jc(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=bs(r,null,c,o):Kt(t,r,c,o),r.child;case 11:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:jn(c,f),Pp(t,r,c,f,o);case 7:return Kt(t,r,r.pendingProps,o),r.child;case 8:return Kt(t,r,r.pendingProps.children,o),r.child;case 12:return Kt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(c=r.type._context,f=r.pendingProps,p=r.memoizedProps,_=f.value,Xe(Cl,c._currentValue),c._currentValue=_,p!==null)if(Fn(p.value,_)){if(p.children===f.children&&!Zt.current){r=Ar(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var P=p.dependencies;if(P!==null){_=p.child;for(var N=P.firstContext;N!==null;){if(N.context===c){if(p.tag===1){N=Ir(-1,o&-o),N.tag=2;var G=p.updateQueue;if(G!==null){G=G.shared;var te=G.pending;te===null?N.next=N:(N.next=te.next,te.next=N),G.pending=N}}p.lanes|=o,N=p.alternate,N!==null&&(N.lanes|=o),Mc(p.return,o,r),P.lanes|=o;break}N=N.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,P=_.alternate,P!==null&&(P.lanes|=o),Mc(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}Kt(t,r,f.children,o),r=r.child}return r;case 9:return f=r.type,c=r.pendingProps.children,Us(r,o),f=Tn(f),c=c(f),r.flags|=1,Kt(t,r,c,o),r.child;case 14:return c=r.type,f=jn(c,r.pendingProps),f=jn(c.type,f),kp(t,r,c,f,o);case 15:return xp(t,r,r.type,r.pendingProps,o);case 17:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:jn(c,f),jl(t,r),r.tag=1,en(c)?(t=!0,wl(r)):t=!1,Us(r,o),wp(r,c,f),Jc(r,c,f,o),nh(null,r,c,!0,t,o);case 19:return bp(t,r,o);case 22:return Np(t,r,o)}throw Error(n(156,r.tag))};function lm(t,r){return ds(t,r)}function G_(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,r,o,c){return new G_(t,r,o,c)}function Th(t){return t=t.prototype,!(!t||!t.isReactComponent)}function H_(t){if(typeof t=="function")return Th(t)?1:0;if(t!=null){if(t=t.$$typeof,t===L)return 11;if(t===fe)return 14}return 2}function ii(t,r){var o=t.alternate;return o===null?(o=An(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Yl(t,r,o,c,f,p){var _=2;if(c=t,typeof t=="function")Th(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case x:return Qi(o.children,f,p,r);case T:_=8,f|=8;break;case R:return t=An(12,o,r,f|2),t.elementType=R,t.lanes=p,t;case A:return t=An(13,o,r,f),t.elementType=A,t.lanes=p,t;case be:return t=An(19,o,r,f),t.elementType=be,t.lanes=p,t;case se:return Xl(o,f,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:_=10;break e;case D:_=9;break e;case L:_=11;break e;case fe:_=14;break e;case pe:_=16,c=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=An(_,o,r,f),r.elementType=t,r.type=c,r.lanes=p,r}function Qi(t,r,o,c){return t=An(7,t,c,r),t.lanes=o,t}function Xl(t,r,o,c){return t=An(22,t,c,r),t.elementType=se,t.lanes=o,t.stateNode={isHidden:!1},t}function Sh(t,r,o){return t=An(6,t,null,r),t.lanes=o,t}function Ih(t,r,o){return r=An(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function q_(t,r,o,c,f){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jr(0),this.expirationTimes=jr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Ah(t,r,o,c,f,p,_,P,N){return t=new q_(t,r,o,P,N),r===1?(r=1,p===!0&&(r|=8)):r=0,p=An(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},bc(p),t}function Q_(t,r,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ge,key:c==null?null:""+c,children:t,containerInfo:r,implementation:o}}function um(t){if(!t)return Kr;t=t._reactInternals;e:{if(xn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(en(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(en(o))return Fd(t,o,r)}return r}function cm(t,r,o,c,f,p,_,P,N){return t=Ah(o,c,!0,t,f,p,_,P,N),t.context=um(null),o=t.current,c=Yt(),f=ni(o),p=Ir(c,f),p.callback=r??null,Jr(o,p,f),t.current.lanes=f,Ur(t,f,c),rn(t,c),t}function Jl(t,r,o,c){var f=r.current,p=Yt(),_=ni(f);return o=um(o),r.context===null?r.context=o:r.pendingContext=o,r=Ir(p,_),r.payload={element:t},c=c===void 0?null:c,c!==null&&(r.callback=c),t=Jr(f,r,_),t!==null&&(zn(t,f,_,p),kl(t,f,_)),_}function Zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hm(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Rh(t,r){hm(t,r),(t=t.alternate)&&hm(t,r)}function K_(){return null}var fm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ch(t){this._internalRoot=t}eu.prototype.render=Ch.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Jl(t,r,null,null)},eu.prototype.unmount=Ch.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Gi(function(){Jl(null,t,null,null)}),r[_r]=null}};function eu(t){this._internalRoot=t}eu.prototype.unstable_scheduleHydration=function(t){if(t){var r=el();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Kn.length&&r!==0&&r<Kn[o].priority;o++);Kn.splice(o,0,t),o===0&&rl(t)}};function Ph(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dm(){}function Y_(t,r,o,c,f){if(f){if(typeof c=="function"){var p=c;c=function(){var G=Zl(_);p.call(G)}}var _=cm(r,c,t,0,null,!1,!1,"",dm);return t._reactRootContainer=_,t[_r]=_.current,Go(t.nodeType===8?t.parentNode:t),Gi(),_}for(;f=t.lastChild;)t.removeChild(f);if(typeof c=="function"){var P=c;c=function(){var G=Zl(N);P.call(G)}}var N=Ah(t,0,!1,null,null,!1,!1,"",dm);return t._reactRootContainer=N,t[_r]=N.current,Go(t.nodeType===8?t.parentNode:t),Gi(function(){Jl(r,N,o,c)}),N}function nu(t,r,o,c,f){var p=o._reactRootContainer;if(p){var _=p;if(typeof f=="function"){var P=f;f=function(){var N=Zl(_);P.call(N)}}Jl(r,_,t,f)}else _=Y_(o,r,t,f,c);return Zl(_)}Ja=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=br(r.pendingLanes);o!==0&&(Br(r,o|1),rn(r,Ye()),(ze&6)===0&&(Gs=Ye()+500,Yr()))}break;case 13:Gi(function(){var c=Sr(t,1);if(c!==null){var f=Yt();zn(c,t,1,f)}}),Rh(t,1)}},gs=function(t){if(t.tag===13){var r=Sr(t,134217728);if(r!==null){var o=Yt();zn(r,t,134217728,o)}Rh(t,134217728)}},Za=function(t){if(t.tag===13){var r=ni(t),o=Sr(t,r);if(o!==null){var c=Yt();zn(o,t,r,c)}Rh(t,r)}},el=function(){return Fe},tl=function(t,r){var o=Fe;try{return Fe=t,r()}finally{Fe=o}},as=function(t,r,o){switch(r){case"input":if(go(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var f=_l(c);if(!f)throw Error(n(90));_t(c),go(c,f)}}}break;case"textarea":ss(t,o);break;case"select":r=o.value,r!=null&&hr(t,!!o.multiple,r,!1)}},Ai=_h,Ro=Gi;var X_={usingClientEntryPoint:!1,Events:[Qo,Vs,_l,qn,Ao,_h]},la={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},J_={bundleType:la.bundleType,version:la.version,rendererPackageName:la.rendererPackageName,rendererConfig:la.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ko(t),t===null?null:t.stateNode},findFiberByHostInstance:la.findFiberByHostInstance||K_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{xi=ru.inject(J_),ln=ru}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X_,sn.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ph(r))throw Error(n(200));return Q_(t,r,null,o)},sn.createRoot=function(t,r){if(!Ph(t))throw Error(n(299));var o=!1,c="",f=fm;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),r=Ah(t,1,!1,null,null,o,!1,c,f),t[_r]=r.current,Go(t.nodeType===8?t.parentNode:t),new Ch(r)},sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=ko(r),t=t===null?null:t.stateNode,t},sn.flushSync=function(t){return Gi(t)},sn.hydrate=function(t,r,o){if(!tu(r))throw Error(n(200));return nu(null,t,r,!0,o)},sn.hydrateRoot=function(t,r,o){if(!Ph(t))throw Error(n(405));var c=o!=null&&o.hydratedSources||null,f=!1,p="",_=fm;if(o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=cm(r,null,t,1,o??null,f,!1,p,_),t[_r]=r.current,Go(t),c)for(t=0;t<c.length;t++)o=c[t],f=o._getVersion,f=f(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,f]:r.mutableSourceEagerHydrationData.push(o,f);return new eu(r)},sn.render=function(t,r,o){if(!tu(r))throw Error(n(200));return nu(null,t,r,!1,o)},sn.unmountComponentAtNode=function(t){if(!tu(t))throw Error(n(40));return t._reactRootContainer?(Gi(function(){nu(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1},sn.unstable_batchedUpdates=_h,sn.unstable_renderSubtreeIntoContainer=function(t,r,o,c){if(!tu(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return nu(t,r,o,!1,c)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var wm;function oE(){if(wm)return Nh.exports;wm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Nh.exports=sE(),Nh.exports}var Tm;function aE(){if(Tm)return iu;Tm=1;var i=oE();return iu.createRoot=i.createRoot,iu.hydrateRoot=i.hydrateRoot,iu}var lE=aE();/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Sm="popstate";function uE(i={}){function e(s,a){let{pathname:u,search:h,hash:m}=s.location;return Gh("",{pathname:u,search:h,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Sa(a)}return hE(e,n,null,i)}function ot(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function $n(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cE(){return Math.random().toString(36).substring(2,10)}function Im(i,e){return{usr:i.state,key:i.key,idx:e}}function Gh(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?oo(e):e,state:n,key:e&&e.key||s||cE()}}function Sa({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function oo(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function hE(i,e,n,s={}){let{window:a=document.defaultView,v5Compat:u=!1}=s,h=a.history,m="POP",g=null,v=E();v==null&&(v=0,h.replaceState({...h.state,idx:v},""));function E(){return(h.state||{idx:null}).idx}function S(){m="POP";let F=E(),W=F==null?null:F-v;v=F,g&&g({action:m,location:q.location,delta:W})}function I(F,W){m="PUSH";let ie=Gh(q.location,F,W);v=E()+1;let Q=Im(ie,v),oe=q.createHref(ie);try{h.pushState(Q,"",oe)}catch(Te){if(Te instanceof DOMException&&Te.name==="DataCloneError")throw Te;a.location.assign(oe)}u&&g&&g({action:m,location:q.location,delta:1})}function M(F,W){m="REPLACE";let ie=Gh(q.location,F,W);v=E();let Q=Im(ie,v),oe=q.createHref(ie);h.replaceState(Q,"",oe),u&&g&&g({action:m,location:q.location,delta:0})}function B(F){return fE(F)}let q={get action(){return m},get location(){return i(a,h)},listen(F){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(Sm,S),g=F,()=>{a.removeEventListener(Sm,S),g=null}},createHref(F){return e(a,F)},createURL:B,encodeLocation(F){let W=B(F);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:I,replace:M,go(F){return h.go(F)}};return q}function fE(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ot(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:Sa(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Bg(i,e,n="/"){return dE(i,e,n,!1)}function dE(i,e,n,s){let a=typeof e=="string"?oo(e):e,u=xr(a.pathname||"/",n);if(u==null)return null;let h=zg(i);pE(h);let m=null;for(let g=0;m==null&&g<h.length;++g){let v=AE(u);m=SE(h[g],v,s)}return m}function zg(i,e=[],n=[],s="",a=!1){let u=(h,m,g=a,v)=>{let E={relativePath:v===void 0?h.path||"":v,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&g)return;ot(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let S=Cr([s,E.relativePath]),I=n.concat(E);h.children&&h.children.length>0&&(ot(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),zg(h.children,e,I,S,g)),!(h.path==null&&!h.index)&&e.push({path:S,score:wE(S,h.index),routesMeta:I})};return i.forEach((h,m)=>{var g;if(h.path===""||!((g=h.path)!=null&&g.includes("?")))u(h,m);else for(let v of $g(h.path))u(h,m,!0,v)}),e}function $g(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return a?[u,""]:[u];let h=$g(s.join("/")),m=[];return m.push(...h.map(g=>g===""?u:[u,g].join("/"))),a&&m.push(...h),m.map(g=>i.startsWith("/")&&g===""?"/":g)}function pE(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:TE(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var mE=/^:[\w-]+$/,gE=3,yE=2,vE=1,_E=10,EE=-2,Am=i=>i==="*";function wE(i,e){let n=i.split("/"),s=n.length;return n.some(Am)&&(s+=EE),e&&(s+=yE),n.filter(a=>!Am(a)).reduce((a,u)=>a+(mE.test(u)?gE:u===""?vE:_E),s)}function TE(i,e){return i.length===e.length&&i.slice(0,-1).every((s,a)=>s===e[a])?i[i.length-1]-e[e.length-1]:0}function SE(i,e,n=!1){let{routesMeta:s}=i,a={},u="/",h=[];for(let m=0;m<s.length;++m){let g=s[m],v=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",S=wu({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},E),I=g.route;if(!S&&v&&n&&!s[s.length-1].route.index&&(S=wu({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},E)),!S)return null;Object.assign(a,S.params),h.push({params:a,pathname:Cr([u,S.pathname]),pathnameBase:kE(Cr([u,S.pathnameBase])),route:I}),S.pathnameBase!=="/"&&(u=Cr([u,S.pathnameBase]))}return h}function wu(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=IE(i.path,i.caseSensitive,i.end),a=e.match(n);if(!a)return null;let u=a[0],h=u.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:s.reduce((v,{paramName:E,isOptional:S},I)=>{if(E==="*"){let B=m[I]||"";h=u.slice(0,u.length-B.length).replace(/(.)\/+$/,"$1")}const M=m[I];return S&&!M?v[E]=void 0:v[E]=(M||"").replace(/%2F/g,"/"),v},{}),pathname:u,pathnameBase:h,pattern:i}}function IE(i,e=!1,n=!0){$n(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function AE(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $n(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function xr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}var Wg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RE=i=>Wg.test(i);function CE(i,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof i=="string"?oo(i):i,u;if(n)if(RE(n))u=n;else{if(n.includes("//")){let h=n;n=n.replace(/\/\/+/g,"/"),$n(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${n}`)}n.startsWith("/")?u=Rm(n.substring(1),"/"):u=Rm(n,e)}else u=e;return{pathname:u,search:xE(s),hash:NE(a)}}function Rm(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Lh(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PE(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gg(i){let e=PE(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Hg(i,e,n,s=!1){let a;typeof i=="string"?a=oo(i):(a={...i},ot(!a.pathname||!a.pathname.includes("?"),Lh("?","pathname","search",a)),ot(!a.pathname||!a.pathname.includes("#"),Lh("#","pathname","hash",a)),ot(!a.search||!a.search.includes("#"),Lh("#","search","hash",a)));let u=i===""||a.pathname==="",h=u?"/":a.pathname,m;if(h==null)m=n;else{let S=e.length-1;if(!s&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),S-=1;a.pathname=I.join("/")}m=S>=0?e[S]:"/"}let g=CE(a,m),v=h&&h!=="/"&&h.endsWith("/"),E=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(v||E)&&(g.pathname+="/"),g}var Cr=i=>i.join("/").replace(/\/\/+/g,"/"),kE=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),xE=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,NE=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,VE=class{constructor(i,e,n,s=!1){this.status=i,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function DE(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function LE(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var qg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qg(i,e){let n=i;if(typeof n!="string"||!Wg.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,a=!1;if(qg)try{let u=new URL(window.location.href),h=n.startsWith("//")?new URL(u.protocol+n):new URL(n),m=xr(h.pathname,e);h.origin===u.origin&&m!=null?n=m+h.search+h.hash:a=!0}catch{$n(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Kg=["POST","PUT","PATCH","DELETE"];new Set(Kg);var OE=["GET",...Kg];new Set(OE);var ao=b.createContext(null);ao.displayName="DataRouter";var bu=b.createContext(null);bu.displayName="DataRouterState";var ME=b.createContext(!1),Yg=b.createContext({isTransitioning:!1});Yg.displayName="ViewTransition";var FE=b.createContext(new Map);FE.displayName="Fetchers";var bE=b.createContext(null);bE.displayName="Await";var Cn=b.createContext(null);Cn.displayName="Navigation";var Da=b.createContext(null);Da.displayName="Location";var Or=b.createContext({outlet:null,matches:[],isDataRoute:!1});Or.displayName="Route";var yf=b.createContext(null);yf.displayName="RouteError";var Xg="REACT_ROUTER_ERROR",jE="REDIRECT",UE="ROUTE_ERROR_RESPONSE";function BE(i){if(i.startsWith(`${Xg}:${jE}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function zE(i){if(i.startsWith(`${Xg}:${UE}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new VE(e.status,e.statusText,e.data)}catch{}}function $E(i,{relative:e}={}){ot(La(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=b.useContext(Cn),{hash:a,pathname:u,search:h}=Oa(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Cr([n,u])),s.createHref({pathname:m,search:h,hash:a})}function La(){return b.useContext(Da)!=null}function es(){return ot(La(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Da).location}var Jg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Zg(i){b.useContext(Cn).static||b.useLayoutEffect(i)}function WE(){let{isDataRoute:i}=b.useContext(Or);return i?r0():GE()}function GE(){ot(La(),"useNavigate() may be used only in the context of a <Router> component.");let i=b.useContext(ao),{basename:e,navigator:n}=b.useContext(Cn),{matches:s}=b.useContext(Or),{pathname:a}=es(),u=JSON.stringify(Gg(s)),h=b.useRef(!1);return Zg(()=>{h.current=!0}),b.useCallback((g,v={})=>{if($n(h.current,Jg),!h.current)return;if(typeof g=="number"){n.go(g);return}let E=Hg(g,JSON.parse(u),a,v.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Cr([e,E.pathname])),(v.replace?n.replace:n.push)(E,v.state,v)},[e,n,u,a,i])}b.createContext(null);function Oa(i,{relative:e}={}){let{matches:n}=b.useContext(Or),{pathname:s}=es(),a=JSON.stringify(Gg(n));return b.useMemo(()=>Hg(i,JSON.parse(a),s,e==="path"),[i,a,s,e])}function HE(i,e){return ey(i,e)}function ey(i,e,n,s,a){var ie;ot(La(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=b.useContext(Cn),{matches:h}=b.useContext(Or),m=h[h.length-1],g=m?m.params:{},v=m?m.pathname:"/",E=m?m.pathnameBase:"/",S=m&&m.route;{let Q=S&&S.path||"";ny(v,!S||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let I=es(),M;if(e){let Q=typeof e=="string"?oo(e):e;ot(E==="/"||((ie=Q.pathname)==null?void 0:ie.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),M=Q}else M=I;let B=M.pathname||"/",q=B;if(E!=="/"){let Q=E.replace(/^\//,"").split("/");q="/"+B.replace(/^\//,"").split("/").slice(Q.length).join("/")}let F=Bg(i,{pathname:q});$n(S||F!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),$n(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=XE(F&&F.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:Cr([E,u.encodeLocation?u.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?E:Cr([E,u.encodeLocation?u.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),h,n,s,a);return e&&W?b.createElement(Da.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},W):W}function qE(){let i=n0(),e=DE(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:u},"ErrorBoundary")," or"," ",b.createElement("code",{style:u},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:a},n):null,h)}var QE=b.createElement(qE,null),ty=class extends b.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=zE(i.digest);n&&(i=n)}let e=i!==void 0?b.createElement(Or.Provider,{value:this.props.routeContext},b.createElement(yf.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?b.createElement(KE,{error:i},e):e}};ty.contextType=ME;var Oh=new WeakMap;function KE({children:i,error:e}){let{basename:n}=b.useContext(Cn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=BE(e.digest);if(s){let a=Oh.get(e);if(a)throw a;let u=Qg(s.location,n);if(qg&&!Oh.get(e))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw Oh.set(e,h),h}return b.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return i}function YE({routeContext:i,match:e,children:n}){let s=b.useContext(ao);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(Or.Provider,{value:i},n)}function XE(i,e=[],n=null,s=null,a=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,h=n==null?void 0:n.errors;if(h!=null){let E=u.findIndex(S=>S.route.id&&(h==null?void 0:h[S.route.id])!==void 0);ot(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,E+1))}let m=!1,g=-1;if(n)for(let E=0;E<u.length;E++){let S=u[E];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(g=E),S.route.id){let{loaderData:I,errors:M}=n,B=S.route.loader&&!I.hasOwnProperty(S.route.id)&&(!M||M[S.route.id]===void 0);if(S.route.lazy||B){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let v=n&&s?(E,S)=>{var I,M;s(E,{location:n.location,params:((M=(I=n.matches)==null?void 0:I[0])==null?void 0:M.params)??{},unstable_pattern:LE(n.matches),errorInfo:S})}:void 0;return u.reduceRight((E,S,I)=>{let M,B=!1,q=null,F=null;n&&(M=h&&S.route.id?h[S.route.id]:void 0,q=S.route.errorElement||QE,m&&(g<0&&I===0?(ny("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,F=null):g===I&&(B=!0,F=S.route.hydrateFallbackElement||null)));let W=e.concat(u.slice(0,I+1)),ie=()=>{let Q;return M?Q=q:B?Q=F:S.route.Component?Q=b.createElement(S.route.Component,null):S.route.element?Q=S.route.element:Q=E,b.createElement(YE,{match:S,routeContext:{outlet:E,matches:W,isDataRoute:n!=null},children:Q})};return n&&(S.route.ErrorBoundary||S.route.errorElement||I===0)?b.createElement(ty,{location:n.location,revalidation:n.revalidation,component:q,error:M,children:ie(),routeContext:{outlet:null,matches:W,isDataRoute:!0},onError:v}):ie()},null)}function vf(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JE(i){let e=b.useContext(ao);return ot(e,vf(i)),e}function ZE(i){let e=b.useContext(bu);return ot(e,vf(i)),e}function e0(i){let e=b.useContext(Or);return ot(e,vf(i)),e}function _f(i){let e=e0(i),n=e.matches[e.matches.length-1];return ot(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function t0(){return _f("useRouteId")}function n0(){var s;let i=b.useContext(yf),e=ZE("useRouteError"),n=_f("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function r0(){let{router:i}=JE("useNavigate"),e=_f("useNavigate"),n=b.useRef(!1);return Zg(()=>{n.current=!0}),b.useCallback(async(a,u={})=>{$n(n.current,Jg),n.current&&(typeof a=="number"?await i.navigate(a):await i.navigate(a,{fromRouteId:e,...u}))},[i,e])}var Cm={};function ny(i,e,n){!e&&!Cm[i]&&(Cm[i]=!0,$n(!1,n))}b.memo(i0);function i0({routes:i,future:e,state:n,onError:s}){return ey(i,void 0,n,s,e)}function ha(i){ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function s0({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:u=!1,unstable_useTransitions:h}){ot(!La(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=i.replace(/^\/*/,"/"),g=b.useMemo(()=>({basename:m,navigator:a,static:u,unstable_useTransitions:h,future:{}}),[m,a,u,h]);typeof n=="string"&&(n=oo(n));let{pathname:v="/",search:E="",hash:S="",state:I=null,key:M="default"}=n,B=b.useMemo(()=>{let q=xr(v,m);return q==null?null:{location:{pathname:q,search:E,hash:S,state:I,key:M},navigationType:s}},[m,v,E,S,I,M,s]);return $n(B!=null,`<Router basename="${m}"> is not able to match the URL "${v}${E}${S}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:b.createElement(Cn.Provider,{value:g},b.createElement(Da.Provider,{children:e,value:B}))}function o0({children:i,location:e}){return HE(Hh(i),e)}function Hh(i,e=[]){let n=[];return b.Children.forEach(i,(s,a)=>{if(!b.isValidElement(s))return;let u=[...e,a];if(s.type===b.Fragment){n.push.apply(n,Hh(s.props.children,u));return}ot(s.type===ha,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ot(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Hh(s.props.children,u)),n.push(h)}),n}var fu="get",du="application/x-www-form-urlencoded";function ju(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function a0(i){return ju(i)&&i.tagName.toLowerCase()==="button"}function l0(i){return ju(i)&&i.tagName.toLowerCase()==="form"}function u0(i){return ju(i)&&i.tagName.toLowerCase()==="input"}function c0(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function h0(i,e){return i.button===0&&(!e||e==="_self")&&!c0(i)}var su=null;function f0(){if(su===null)try{new FormData(document.createElement("form"),0),su=!1}catch{su=!0}return su}var d0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mh(i){return i!=null&&!d0.has(i)?($n(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${du}"`),null):i}function p0(i,e){let n,s,a,u,h;if(l0(i)){let m=i.getAttribute("action");s=m?xr(m,e):null,n=i.getAttribute("method")||fu,a=Mh(i.getAttribute("enctype"))||du,u=new FormData(i)}else if(a0(i)||u0(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||m.getAttribute("action");if(s=g?xr(g,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||fu,a=Mh(i.getAttribute("formenctype"))||Mh(m.getAttribute("enctype"))||du,u=new FormData(m,i),!f0()){let{name:v,type:E,value:S}=i;if(E==="image"){let I=v?`${v}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else v&&u.append(v,S)}}else{if(ju(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=fu,s=null,a=du,h=i}return u&&a==="text/plain"&&(h=u,u=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ef(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function m0(i,e,n){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&xr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function g0(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function y0(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function v0(i,e,n){let s=await Promise.all(i.map(async a=>{let u=e.routes[a.route.id];if(u){let h=await g0(u,n);return h.links?h.links():[]}return[]}));return T0(s.flat(1).filter(y0).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Pm(i,e,n,s,a,u){let h=(g,v)=>n[v]?g.route.id!==n[v].route.id:!0,m=(g,v)=>{var E;return n[v].pathname!==g.pathname||((E=n[v].route.path)==null?void 0:E.endsWith("*"))&&n[v].params["*"]!==g.params["*"]};return u==="assets"?e.filter((g,v)=>h(g,v)||m(g,v)):u==="data"?e.filter((g,v)=>{var S;let E=s.routes[g.route.id];if(!E||!E.hasLoader)return!1;if(h(g,v)||m(g,v))return!0;if(g.route.shouldRevalidate){let I=g.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((S=n[0])==null?void 0:S.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function _0(i,e,{includeHydrateFallback:n}={}){return E0(i.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let u=[a.module];return a.clientActionModule&&(u=u.concat(a.clientActionModule)),a.clientLoaderModule&&(u=u.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(u=u.concat(a.hydrateFallbackModule)),a.imports&&(u=u.concat(a.imports)),u}).flat(1))}function E0(i){return[...new Set(i)]}function w0(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function T0(i,e){let n=new Set;return new Set(e),i.reduce((s,a)=>{let u=JSON.stringify(w0(a));return n.has(u)||(n.add(u),s.push({key:u,link:a})),s},[])}function ry(){let i=b.useContext(ao);return Ef(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function S0(){let i=b.useContext(bu);return Ef(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var wf=b.createContext(void 0);wf.displayName="FrameworkContext";function iy(){let i=b.useContext(wf);return Ef(i,"You must render this element inside a <HydratedRouter> element"),i}function I0(i,e){let n=b.useContext(wf),[s,a]=b.useState(!1),[u,h]=b.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:v,onMouseLeave:E,onTouchStart:S}=e,I=b.useRef(null);b.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let q=W=>{W.forEach(ie=>{h(ie.isIntersecting)})},F=new IntersectionObserver(q,{threshold:.5});return I.current&&F.observe(I.current),()=>{F.disconnect()}}},[i]),b.useEffect(()=>{if(s){let q=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(q)}}},[s]);let M=()=>{a(!0)},B=()=>{a(!1),h(!1)};return n?i!=="intent"?[u,I,{}]:[u,I,{onFocus:ca(m,M),onBlur:ca(g,B),onMouseEnter:ca(v,M),onMouseLeave:ca(E,B),onTouchStart:ca(S,M)}]:[!1,I,{}]}function ca(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function A0({page:i,...e}){let{router:n}=ry(),s=b.useMemo(()=>Bg(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?b.createElement(C0,{page:i,matches:s,...e}):null}function R0(i){let{manifest:e,routeModules:n}=iy(),[s,a]=b.useState([]);return b.useEffect(()=>{let u=!1;return v0(i,e,n).then(h=>{u||a(h)}),()=>{u=!0}},[i,e,n]),s}function C0({page:i,matches:e,...n}){let s=es(),{manifest:a,routeModules:u}=iy(),{basename:h}=ry(),{loaderData:m,matches:g}=S0(),v=b.useMemo(()=>Pm(i,e,g,a,s,"data"),[i,e,g,a,s]),E=b.useMemo(()=>Pm(i,e,g,a,s,"assets"),[i,e,g,a,s]),S=b.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let B=new Set,q=!1;if(e.forEach(W=>{var Q;let ie=a.routes[W.route.id];!ie||!ie.hasLoader||(!v.some(oe=>oe.route.id===W.route.id)&&W.route.id in m&&((Q=u[W.route.id])!=null&&Q.shouldRevalidate)||ie.hasClientLoader?q=!0:B.add(W.route.id))}),B.size===0)return[];let F=m0(i,h,"data");return q&&B.size>0&&F.searchParams.set("_routes",e.filter(W=>B.has(W.route.id)).map(W=>W.route.id).join(",")),[F.pathname+F.search]},[h,m,s,a,v,e,i,u]),I=b.useMemo(()=>_0(E,a),[E,a]),M=R0(E);return b.createElement(b.Fragment,null,S.map(B=>b.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),I.map(B=>b.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),M.map(({key:B,link:q})=>b.createElement("link",{key:B,nonce:n.nonce,...q})))}function P0(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var k0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{k0&&(window.__reactRouterVersion="7.11.0")}catch{}function x0({basename:i,children:e,unstable_useTransitions:n,window:s}){let a=b.useRef();a.current==null&&(a.current=uE({window:s,v5Compat:!0}));let u=a.current,[h,m]=b.useState({action:u.action,location:u.location}),g=b.useCallback(v=>{n===!1?m(v):b.startTransition(()=>m(v))},[n]);return b.useLayoutEffect(()=>u.listen(g),[u,g]),b.createElement(s0,{basename:i,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:n})}var sy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xs=b.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:u,replace:h,state:m,target:g,to:v,preventScrollReset:E,viewTransition:S,unstable_defaultShouldRevalidate:I,...M},B){let{basename:q,unstable_useTransitions:F}=b.useContext(Cn),W=typeof v=="string"&&sy.test(v),ie=Qg(v,q);v=ie.to;let Q=$E(v,{relative:a}),[oe,Te,ge]=I0(s,M),x=L0(v,{replace:h,state:m,target:g,preventScrollReset:E,relative:a,viewTransition:S,unstable_defaultShouldRevalidate:I,unstable_useTransitions:F});function T(k){e&&e(k),k.defaultPrevented||x(k)}let R=b.createElement("a",{...M,...ge,href:ie.absoluteURL||Q,onClick:ie.isExternal||u?e:T,ref:P0(B,Te),target:g,"data-discover":!W&&n==="render"?"true":void 0});return oe&&!W?b.createElement(b.Fragment,null,R,b.createElement(A0,{page:Q})):R});Xs.displayName="Link";var N0=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:u,to:h,viewTransition:m,children:g,...v},E){let S=Oa(h,{relative:v.relative}),I=es(),M=b.useContext(bu),{navigator:B,basename:q}=b.useContext(Cn),F=M!=null&&j0(S)&&m===!0,W=B.encodeLocation?B.encodeLocation(S).pathname:S.pathname,ie=I.pathname,Q=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;n||(ie=ie.toLowerCase(),Q=Q?Q.toLowerCase():null,W=W.toLowerCase()),Q&&q&&(Q=xr(Q,q)||Q);const oe=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let Te=ie===W||!a&&ie.startsWith(W)&&ie.charAt(oe)==="/",ge=Q!=null&&(Q===W||!a&&Q.startsWith(W)&&Q.charAt(W.length)==="/"),x={isActive:Te,isPending:ge,isTransitioning:F},T=Te?e:void 0,R;typeof s=="function"?R=s(x):R=[s,Te?"active":null,ge?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let k=typeof u=="function"?u(x):u;return b.createElement(Xs,{...v,"aria-current":T,className:R,ref:E,style:k,to:h,viewTransition:m},typeof g=="function"?g(x):g)});N0.displayName="NavLink";var V0=b.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:u,method:h=fu,action:m,onSubmit:g,relative:v,preventScrollReset:E,viewTransition:S,unstable_defaultShouldRevalidate:I,...M},B)=>{let{unstable_useTransitions:q}=b.useContext(Cn),F=F0(),W=b0(m,{relative:v}),ie=h.toLowerCase()==="get"?"get":"post",Q=typeof m=="string"&&sy.test(m),oe=Te=>{if(g&&g(Te),Te.defaultPrevented)return;Te.preventDefault();let ge=Te.nativeEvent.submitter,x=(ge==null?void 0:ge.getAttribute("formmethod"))||h,T=()=>F(ge||Te.currentTarget,{fetcherKey:e,method:x,navigate:n,replace:a,state:u,relative:v,preventScrollReset:E,viewTransition:S,unstable_defaultShouldRevalidate:I});q&&n!==!1?b.startTransition(()=>T()):T()};return b.createElement("form",{ref:B,method:ie,action:W,onSubmit:s?g:oe,...M,"data-discover":!Q&&i==="render"?"true":void 0})});V0.displayName="Form";function D0(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oy(i){let e=b.useContext(ao);return ot(e,D0(i)),e}function L0(i,{target:e,replace:n,state:s,preventScrollReset:a,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g}={}){let v=WE(),E=es(),S=Oa(i,{relative:u});return b.useCallback(I=>{if(h0(I,e)){I.preventDefault();let M=n!==void 0?n:Sa(E)===Sa(S),B=()=>v(i,{replace:M,state:s,preventScrollReset:a,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:m});g?b.startTransition(()=>B()):B()}},[E,v,S,n,s,e,i,a,u,h,m,g])}var O0=0,M0=()=>`__${String(++O0)}__`;function F0(){let{router:i}=oy("useSubmit"),{basename:e}=b.useContext(Cn),n=t0(),s=i.fetch,a=i.navigate;return b.useCallback(async(u,h={})=>{let{action:m,method:g,encType:v,formData:E,body:S}=p0(u,e);if(h.navigate===!1){let I=h.fetcherKey||M0();await s(I,n,h.action||m,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:E,body:S,formMethod:h.method||g,formEncType:h.encType||v,flushSync:h.flushSync})}else await a(h.action||m,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:E,body:S,formMethod:h.method||g,formEncType:h.encType||v,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[s,a,e,n])}function b0(i,{relative:e}={}){let{basename:n}=b.useContext(Cn),s=b.useContext(Or);ot(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),u={...Oa(i||".",{relative:e})},h=es();if(i==null){u.search=h.search;let m=new URLSearchParams(u.search),g=m.getAll("index");if(g.some(E=>E==="")){m.delete("index"),g.filter(S=>S).forEach(S=>m.append("index",S));let E=m.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Cr([n,u.pathname])),Sa(u)}function j0(i,{relative:e}={}){let n=b.useContext(Yg);ot(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=oy("useViewTransitionState"),a=Oa(i,{relative:e});if(!n.isTransitioning)return!1;let u=xr(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=xr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return wu(a.pathname,h)!=null||wu(a.pathname,u)!=null}const U0=()=>{};var km={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},B0=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const u=i[n++];e[s++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=i[n++],h=i[n++],m=i[n++],g=((a&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=i[n++],h=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(u&63)<<6|h&63)}}return e.join("")},ly={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const u=i[a],h=a+1<i.length,m=h?i[a+1]:0,g=a+2<i.length,v=g?i[a+2]:0,E=u>>2,S=(u&3)<<4|m>>4;let I=(m&15)<<2|v>>6,M=v&63;g||(M=64,h||(I=64)),s.push(n[E],n[S],n[I],n[M])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(ay(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):B0(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const u=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const S=a<i.length?n[i.charAt(a)]:64;if(++a,u==null||m==null||v==null||S==null)throw new z0;const I=u<<2|m>>4;if(s.push(I),v!==64){const M=m<<4&240|v>>2;if(s.push(M),S!==64){const B=v<<6&192|S;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class z0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $0=function(i){const e=ay(i);return ly.encodeByteArray(e,!0)},Tu=function(i){return $0(i).replace(/\./g,"")},W0=function(i){try{return ly.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=()=>G0().__FIREBASE_DEFAULTS__,q0=()=>{if(typeof process>"u"||typeof km>"u")return;const i=km.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Q0=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&W0(i[1]);return e&&JSON.parse(e)},Tf=()=>{try{return U0()||H0()||q0()||Q0()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},K0=i=>{var e,n;return(n=(e=Tf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},Y0=i=>{const e=K0(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},uy=()=>{var i;return(i=Tf())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J0(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Tu(JSON.stringify(n)),Tu(JSON.stringify(h)),""].join(".")}const ga={};function ew(){const i={prod:[],emulator:[]};for(const e of Object.keys(ga))ga[e]?i.emulator.push(e):i.prod.push(e);return i}function tw(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let xm=!1;function nw(i,e){if(typeof window>"u"||typeof document>"u"||!Sf(window.location.host)||ga[i]===e||ga[i]||xm)return;ga[i]=e;function n(I){return`__firebase__banner__${I}`}const s="__firebase__banner",u=ew().prod.length>0;function h(){const I=document.getElementById(s);I&&I.remove()}function m(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,M){I.setAttribute("width","24"),I.setAttribute("id",M),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function v(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{xm=!0,h()},I}function E(I,M){I.setAttribute("id",M),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function S(){const I=tw(s),M=n("text"),B=document.getElementById(M)||document.createElement("span"),q=n("learnmore"),F=document.getElementById(q)||document.createElement("a"),W=n("preprendIcon"),ie=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const Q=I.element;m(Q),E(F,q);const oe=v();g(ie,W),Q.append(ie,B,F,oe),document.body.appendChild(Q)}u?(B.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iw(){var i;const e=(i=Tf())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sw(){return!iw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ow(){try{return typeof indexedDB=="object"}catch{return!1}}function aw(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="FirebaseError";class lo extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=lw,Object.setPrototypeOf(this,lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cy.prototype.create)}}class cy{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,u=this.errors[e],h=u?uw(u,s):"Error",m=`${this.serviceName}: ${h} (${a}).`;return new lo(a,m,s)}}function uw(i,e){return i.replace(cw,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const cw=/\{\$([^}]+)}/g;function Su(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const u=i[a],h=e[a];if(Nm(u)&&Nm(h)){if(!Su(u,h))return!1}else if(u!==h)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function Nm(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(i){return i&&i._delegate?i._delegate:i}class Ia{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new X0;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dw(e))try{this.getOrInitializeService({instanceIdentifier:Ki})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:a});s.resolve(u)}catch{}}}}clearInstance(e=Ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ki){return this.instances.has(e)}getOptions(e=Ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(a,u);const h=this.instances.get(a);return h&&e(h,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:fw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ki){return this.component?this.component.multipleInstances?e:Ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fw(i){return i===Ki?void 0:i}function dw(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Be||(Be={}));const mw={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},gw=Be.INFO,yw={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},vw=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=yw[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hy{constructor(e){this.name=e,this._logLevel=gw,this._logHandler=vw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const _w=(i,e)=>e.some(n=>i instanceof n);let Vm,Dm;function Ew(){return Vm||(Vm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ww(){return Dm||(Dm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fy=new WeakMap,qh=new WeakMap,dy=new WeakMap,Fh=new WeakMap,If=new WeakMap;function Tw(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{n(ai(i.result)),a()},h=()=>{s(i.error),a()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&fy.set(n,i)}).catch(()=>{}),If.set(e,i),e}function Sw(i){if(qh.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{n(),a()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});qh.set(i,e)}let Qh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return qh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||dy.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Iw(i){Qh=i(Qh)}function Aw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(bh(this),e,...n);return dy.set(s,e.sort?e.sort():[e]),ai(s)}:ww().includes(i)?function(...e){return i.apply(bh(this),e),ai(fy.get(this))}:function(...e){return ai(i.apply(bh(this),e))}}function Rw(i){return typeof i=="function"?Aw(i):(i instanceof IDBTransaction&&Sw(i),_w(i,Ew())?new Proxy(i,Qh):i)}function ai(i){if(i instanceof IDBRequest)return Tw(i);if(Fh.has(i))return Fh.get(i);const e=Rw(i);return e!==i&&(Fh.set(i,e),If.set(e,i)),e}const bh=i=>If.get(i);function Cw(i,e,{blocked:n,upgrade:s,blocking:a,terminated:u}={}){const h=indexedDB.open(i,e),m=ai(h);return s&&h.addEventListener("upgradeneeded",g=>{s(ai(h.result),g.oldVersion,g.newVersion,ai(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),a&&g.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const Pw=["get","getKey","getAll","getAllKeys","count"],kw=["put","add","delete","clear"],jh=new Map;function Lm(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(jh.get(e))return jh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=kw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Pw.includes(n)))return;const u=async function(h,...m){const g=this.transaction(h,a?"readwrite":"readonly");let v=g.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),a&&g.done]))[0]};return jh.set(e,u),u}Iw(i=>({...i,get:(e,n,s)=>Lm(e,n)||i.get(e,n,s),has:(e,n)=>!!Lm(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Nw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Nw(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kh="@firebase/app",Om="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new hy("@firebase/app"),Vw="@firebase/app-compat",Dw="@firebase/analytics-compat",Lw="@firebase/analytics",Ow="@firebase/app-check-compat",Mw="@firebase/app-check",Fw="@firebase/auth",bw="@firebase/auth-compat",jw="@firebase/database",Uw="@firebase/data-connect",Bw="@firebase/database-compat",zw="@firebase/functions",$w="@firebase/functions-compat",Ww="@firebase/installations",Gw="@firebase/installations-compat",Hw="@firebase/messaging",qw="@firebase/messaging-compat",Qw="@firebase/performance",Kw="@firebase/performance-compat",Yw="@firebase/remote-config",Xw="@firebase/remote-config-compat",Jw="@firebase/storage",Zw="@firebase/storage-compat",eT="@firebase/firestore",tT="@firebase/ai",nT="@firebase/firestore-compat",rT="firebase",iT="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh="[DEFAULT]",sT={[Kh]:"fire-core",[Vw]:"fire-core-compat",[Lw]:"fire-analytics",[Dw]:"fire-analytics-compat",[Mw]:"fire-app-check",[Ow]:"fire-app-check-compat",[Fw]:"fire-auth",[bw]:"fire-auth-compat",[jw]:"fire-rtdb",[Uw]:"fire-data-connect",[Bw]:"fire-rtdb-compat",[zw]:"fire-fn",[$w]:"fire-fn-compat",[Ww]:"fire-iid",[Gw]:"fire-iid-compat",[Hw]:"fire-fcm",[qw]:"fire-fcm-compat",[Qw]:"fire-perf",[Kw]:"fire-perf-compat",[Yw]:"fire-rc",[Xw]:"fire-rc-compat",[Jw]:"fire-gcs",[Zw]:"fire-gcs-compat",[eT]:"fire-fst",[nT]:"fire-fst-compat",[tT]:"fire-vertex","fire-js":"fire-js",[rT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new Map,oT=new Map,Xh=new Map;function Mm(i,e){try{i.container.addComponent(e)}catch(n){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Au(i){const e=i.name;if(Xh.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;Xh.set(e,i);for(const n of Iu.values())Mm(n,i);for(const n of oT.values())Mm(n,i);return!0}function aT(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function lT(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new cy("app","Firebase",uT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=iT;function py(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Yh,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw li.create("bad-app-name",{appName:String(a)});if(n||(n=uy()),!n)throw li.create("no-options");const u=Iu.get(a);if(u){if(Su(n,u.options)&&Su(s,u.config))return u;throw li.create("duplicate-app",{appName:a})}const h=new pw(a);for(const g of Xh.values())h.addComponent(g);const m=new cT(n,s,h);return Iu.set(a,m),m}function fT(i=Yh){const e=Iu.get(i);if(!e&&i===Yh&&uy())return py();if(!e)throw li.create("no-app",{appName:i});return e}function Js(i,e,n){var s;let a=(s=sT[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const u=a.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=[`Unable to register library "${a}" with version "${e}":`];u&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(m.join(" "));return}Au(new Ia(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firebase-heartbeat-database",pT=1,Aa="firebase-heartbeat-store";let Uh=null;function my(){return Uh||(Uh=Cw(dT,pT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Aa)}catch(n){console.warn(n)}}}}).catch(i=>{throw li.create("idb-open",{originalErrorMessage:i.message})})),Uh}async function mT(i){try{const n=(await my()).transaction(Aa),s=await n.objectStore(Aa).get(gy(i));return await n.done,s}catch(e){if(e instanceof lo)Vr.warn(e.message);else{const n=li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vr.warn(n.message)}}}async function Fm(i,e){try{const s=(await my()).transaction(Aa,"readwrite");await s.objectStore(Aa).put(e,gy(i)),await s.done}catch(n){if(n instanceof lo)Vr.warn(n.message);else{const s=li.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vr.warn(s.message)}}}function gy(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=1024,yT=30;class vT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ET(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=bm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats.length>yT){const h=wT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Vr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bm(),{heartbeatsToSend:s,unsentEntries:a}=_T(this._heartbeatsCache.heartbeats),u=Tu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Vr.warn(n),""}}}function bm(){return new Date().toISOString().substring(0,10)}function _T(i,e=gT){const n=[];let s=i.slice();for(const a of i){const u=n.find(h=>h.agent===a.agent);if(u){if(u.dates.push(a.date),jm(n)>e){u.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),jm(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ET{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ow()?aw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Fm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Fm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function jm(i){return Tu(JSON.stringify({version:2,heartbeats:i})).length}function wT(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(i){Au(new Ia("platform-logger",e=>new xw(e),"PRIVATE")),Au(new Ia("heartbeat",e=>new vT(e),"PRIVATE")),Js(Kh,Om,i),Js(Kh,Om,"esm2017"),Js("fire-js","")}TT("");var Um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ui,yy;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,T){function R(){}R.prototype=T.prototype,x.D=T.prototype,x.prototype=new R,x.prototype.constructor=x,x.C=function(k,D,L){for(var A=Array(arguments.length-2),be=2;be<arguments.length;be++)A[be-2]=arguments[be];return T.prototype[D].apply(k,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,T,R){R||(R=0);var k=Array(16);if(typeof T=="string")for(var D=0;16>D;++D)k[D]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(D=0;16>D;++D)k[D]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=x.g[0],R=x.g[1],D=x.g[2];var L=x.g[3],A=T+(L^R&(D^L))+k[0]+3614090360&4294967295;T=R+(A<<7&4294967295|A>>>25),A=L+(D^T&(R^D))+k[1]+3905402710&4294967295,L=T+(A<<12&4294967295|A>>>20),A=D+(R^L&(T^R))+k[2]+606105819&4294967295,D=L+(A<<17&4294967295|A>>>15),A=R+(T^D&(L^T))+k[3]+3250441966&4294967295,R=D+(A<<22&4294967295|A>>>10),A=T+(L^R&(D^L))+k[4]+4118548399&4294967295,T=R+(A<<7&4294967295|A>>>25),A=L+(D^T&(R^D))+k[5]+1200080426&4294967295,L=T+(A<<12&4294967295|A>>>20),A=D+(R^L&(T^R))+k[6]+2821735955&4294967295,D=L+(A<<17&4294967295|A>>>15),A=R+(T^D&(L^T))+k[7]+4249261313&4294967295,R=D+(A<<22&4294967295|A>>>10),A=T+(L^R&(D^L))+k[8]+1770035416&4294967295,T=R+(A<<7&4294967295|A>>>25),A=L+(D^T&(R^D))+k[9]+2336552879&4294967295,L=T+(A<<12&4294967295|A>>>20),A=D+(R^L&(T^R))+k[10]+4294925233&4294967295,D=L+(A<<17&4294967295|A>>>15),A=R+(T^D&(L^T))+k[11]+2304563134&4294967295,R=D+(A<<22&4294967295|A>>>10),A=T+(L^R&(D^L))+k[12]+1804603682&4294967295,T=R+(A<<7&4294967295|A>>>25),A=L+(D^T&(R^D))+k[13]+4254626195&4294967295,L=T+(A<<12&4294967295|A>>>20),A=D+(R^L&(T^R))+k[14]+2792965006&4294967295,D=L+(A<<17&4294967295|A>>>15),A=R+(T^D&(L^T))+k[15]+1236535329&4294967295,R=D+(A<<22&4294967295|A>>>10),A=T+(D^L&(R^D))+k[1]+4129170786&4294967295,T=R+(A<<5&4294967295|A>>>27),A=L+(R^D&(T^R))+k[6]+3225465664&4294967295,L=T+(A<<9&4294967295|A>>>23),A=D+(T^R&(L^T))+k[11]+643717713&4294967295,D=L+(A<<14&4294967295|A>>>18),A=R+(L^T&(D^L))+k[0]+3921069994&4294967295,R=D+(A<<20&4294967295|A>>>12),A=T+(D^L&(R^D))+k[5]+3593408605&4294967295,T=R+(A<<5&4294967295|A>>>27),A=L+(R^D&(T^R))+k[10]+38016083&4294967295,L=T+(A<<9&4294967295|A>>>23),A=D+(T^R&(L^T))+k[15]+3634488961&4294967295,D=L+(A<<14&4294967295|A>>>18),A=R+(L^T&(D^L))+k[4]+3889429448&4294967295,R=D+(A<<20&4294967295|A>>>12),A=T+(D^L&(R^D))+k[9]+568446438&4294967295,T=R+(A<<5&4294967295|A>>>27),A=L+(R^D&(T^R))+k[14]+3275163606&4294967295,L=T+(A<<9&4294967295|A>>>23),A=D+(T^R&(L^T))+k[3]+4107603335&4294967295,D=L+(A<<14&4294967295|A>>>18),A=R+(L^T&(D^L))+k[8]+1163531501&4294967295,R=D+(A<<20&4294967295|A>>>12),A=T+(D^L&(R^D))+k[13]+2850285829&4294967295,T=R+(A<<5&4294967295|A>>>27),A=L+(R^D&(T^R))+k[2]+4243563512&4294967295,L=T+(A<<9&4294967295|A>>>23),A=D+(T^R&(L^T))+k[7]+1735328473&4294967295,D=L+(A<<14&4294967295|A>>>18),A=R+(L^T&(D^L))+k[12]+2368359562&4294967295,R=D+(A<<20&4294967295|A>>>12),A=T+(R^D^L)+k[5]+4294588738&4294967295,T=R+(A<<4&4294967295|A>>>28),A=L+(T^R^D)+k[8]+2272392833&4294967295,L=T+(A<<11&4294967295|A>>>21),A=D+(L^T^R)+k[11]+1839030562&4294967295,D=L+(A<<16&4294967295|A>>>16),A=R+(D^L^T)+k[14]+4259657740&4294967295,R=D+(A<<23&4294967295|A>>>9),A=T+(R^D^L)+k[1]+2763975236&4294967295,T=R+(A<<4&4294967295|A>>>28),A=L+(T^R^D)+k[4]+1272893353&4294967295,L=T+(A<<11&4294967295|A>>>21),A=D+(L^T^R)+k[7]+4139469664&4294967295,D=L+(A<<16&4294967295|A>>>16),A=R+(D^L^T)+k[10]+3200236656&4294967295,R=D+(A<<23&4294967295|A>>>9),A=T+(R^D^L)+k[13]+681279174&4294967295,T=R+(A<<4&4294967295|A>>>28),A=L+(T^R^D)+k[0]+3936430074&4294967295,L=T+(A<<11&4294967295|A>>>21),A=D+(L^T^R)+k[3]+3572445317&4294967295,D=L+(A<<16&4294967295|A>>>16),A=R+(D^L^T)+k[6]+76029189&4294967295,R=D+(A<<23&4294967295|A>>>9),A=T+(R^D^L)+k[9]+3654602809&4294967295,T=R+(A<<4&4294967295|A>>>28),A=L+(T^R^D)+k[12]+3873151461&4294967295,L=T+(A<<11&4294967295|A>>>21),A=D+(L^T^R)+k[15]+530742520&4294967295,D=L+(A<<16&4294967295|A>>>16),A=R+(D^L^T)+k[2]+3299628645&4294967295,R=D+(A<<23&4294967295|A>>>9),A=T+(D^(R|~L))+k[0]+4096336452&4294967295,T=R+(A<<6&4294967295|A>>>26),A=L+(R^(T|~D))+k[7]+1126891415&4294967295,L=T+(A<<10&4294967295|A>>>22),A=D+(T^(L|~R))+k[14]+2878612391&4294967295,D=L+(A<<15&4294967295|A>>>17),A=R+(L^(D|~T))+k[5]+4237533241&4294967295,R=D+(A<<21&4294967295|A>>>11),A=T+(D^(R|~L))+k[12]+1700485571&4294967295,T=R+(A<<6&4294967295|A>>>26),A=L+(R^(T|~D))+k[3]+2399980690&4294967295,L=T+(A<<10&4294967295|A>>>22),A=D+(T^(L|~R))+k[10]+4293915773&4294967295,D=L+(A<<15&4294967295|A>>>17),A=R+(L^(D|~T))+k[1]+2240044497&4294967295,R=D+(A<<21&4294967295|A>>>11),A=T+(D^(R|~L))+k[8]+1873313359&4294967295,T=R+(A<<6&4294967295|A>>>26),A=L+(R^(T|~D))+k[15]+4264355552&4294967295,L=T+(A<<10&4294967295|A>>>22),A=D+(T^(L|~R))+k[6]+2734768916&4294967295,D=L+(A<<15&4294967295|A>>>17),A=R+(L^(D|~T))+k[13]+1309151649&4294967295,R=D+(A<<21&4294967295|A>>>11),A=T+(D^(R|~L))+k[4]+4149444226&4294967295,T=R+(A<<6&4294967295|A>>>26),A=L+(R^(T|~D))+k[11]+3174756917&4294967295,L=T+(A<<10&4294967295|A>>>22),A=D+(T^(L|~R))+k[2]+718787259&4294967295,D=L+(A<<15&4294967295|A>>>17),A=R+(L^(D|~T))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+T&4294967295,x.g[1]=x.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+L&4294967295}s.prototype.u=function(x,T){T===void 0&&(T=x.length);for(var R=T-this.blockSize,k=this.B,D=this.h,L=0;L<T;){if(D==0)for(;L<=R;)a(this,x,L),L+=this.blockSize;if(typeof x=="string"){for(;L<T;)if(k[D++]=x.charCodeAt(L++),D==this.blockSize){a(this,k),D=0;break}}else for(;L<T;)if(k[D++]=x[L++],D==this.blockSize){a(this,k),D=0;break}}this.h=D,this.o+=T},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var T=1;T<x.length-8;++T)x[T]=0;var R=8*this.o;for(T=x.length-8;T<x.length;++T)x[T]=R&255,R/=256;for(this.u(x),x=Array(16),T=R=0;4>T;++T)for(var k=0;32>k;k+=8)x[R++]=this.g[T]>>>k&255;return x};function u(x,T){var R=m;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=T(x)}function h(x,T){this.h=T;for(var R=[],k=!0,D=x.length-1;0<=D;D--){var L=x[D]|0;k&&L==T||(R[D]=L,k=!1)}this.g=R}var m={};function g(x){return-128<=x&&128>x?u(x,function(T){return new h([T|0],0>T?-1:0)}):new h([x|0],0>x?-1:0)}function v(x){if(isNaN(x)||!isFinite(x))return S;if(0>x)return F(v(-x));for(var T=[],R=1,k=0;x>=R;k++)T[k]=x/R|0,R*=4294967296;return new h(T,0)}function E(x,T){if(x.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x.charAt(0)=="-")return F(E(x.substring(1),T));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(T,8)),k=S,D=0;D<x.length;D+=8){var L=Math.min(8,x.length-D),A=parseInt(x.substring(D,D+L),T);8>L?(L=v(Math.pow(T,L)),k=k.j(L).add(v(A))):(k=k.j(R),k=k.add(v(A)))}return k}var S=g(0),I=g(1),M=g(16777216);i=h.prototype,i.m=function(){if(q(this))return-F(this).m();for(var x=0,T=1,R=0;R<this.g.length;R++){var k=this.i(R);x+=(0<=k?k:4294967296+k)*T,T*=4294967296}return x},i.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(B(this))return"0";if(q(this))return"-"+F(this).toString(x);for(var T=v(Math.pow(x,6)),R=this,k="";;){var D=oe(R,T).g;R=W(R,D.j(T));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(x);if(R=D,B(R))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},i.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function B(x){if(x.h!=0)return!1;for(var T=0;T<x.g.length;T++)if(x.g[T]!=0)return!1;return!0}function q(x){return x.h==-1}i.l=function(x){return x=W(this,x),q(x)?-1:B(x)?0:1};function F(x){for(var T=x.g.length,R=[],k=0;k<T;k++)R[k]=~x.g[k];return new h(R,~x.h).add(I)}i.abs=function(){return q(this)?F(this):this},i.add=function(x){for(var T=Math.max(this.g.length,x.g.length),R=[],k=0,D=0;D<=T;D++){var L=k+(this.i(D)&65535)+(x.i(D)&65535),A=(L>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);k=A>>>16,L&=65535,A&=65535,R[D]=A<<16|L}return new h(R,R[R.length-1]&-2147483648?-1:0)};function W(x,T){return x.add(F(T))}i.j=function(x){if(B(this)||B(x))return S;if(q(this))return q(x)?F(this).j(F(x)):F(F(this).j(x));if(q(x))return F(this.j(F(x)));if(0>this.l(M)&&0>x.l(M))return v(this.m()*x.m());for(var T=this.g.length+x.g.length,R=[],k=0;k<2*T;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<x.g.length;D++){var L=this.i(k)>>>16,A=this.i(k)&65535,be=x.i(D)>>>16,fe=x.i(D)&65535;R[2*k+2*D]+=A*fe,ie(R,2*k+2*D),R[2*k+2*D+1]+=L*fe,ie(R,2*k+2*D+1),R[2*k+2*D+1]+=A*be,ie(R,2*k+2*D+1),R[2*k+2*D+2]+=L*be,ie(R,2*k+2*D+2)}for(k=0;k<T;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=T;k<2*T;k++)R[k]=0;return new h(R,0)};function ie(x,T){for(;(x[T]&65535)!=x[T];)x[T+1]+=x[T]>>>16,x[T]&=65535,T++}function Q(x,T){this.g=x,this.h=T}function oe(x,T){if(B(T))throw Error("division by zero");if(B(x))return new Q(S,S);if(q(x))return T=oe(F(x),T),new Q(F(T.g),F(T.h));if(q(T))return T=oe(x,F(T)),new Q(F(T.g),T.h);if(30<x.g.length){if(q(x)||q(T))throw Error("slowDivide_ only works with positive integers.");for(var R=I,k=T;0>=k.l(x);)R=Te(R),k=Te(k);var D=ge(R,1),L=ge(k,1);for(k=ge(k,2),R=ge(R,2);!B(k);){var A=L.add(k);0>=A.l(x)&&(D=D.add(R),L=A),k=ge(k,1),R=ge(R,1)}return T=W(x,D.j(T)),new Q(D,T)}for(D=S;0<=x.l(T);){for(R=Math.max(1,Math.floor(x.m()/T.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=v(R),A=L.j(T);q(A)||0<A.l(x);)R-=k,L=v(R),A=L.j(T);B(L)&&(L=I),D=D.add(L),x=W(x,A)}return new Q(D,x)}i.A=function(x){return oe(this,x).h},i.and=function(x){for(var T=Math.max(this.g.length,x.g.length),R=[],k=0;k<T;k++)R[k]=this.i(k)&x.i(k);return new h(R,this.h&x.h)},i.or=function(x){for(var T=Math.max(this.g.length,x.g.length),R=[],k=0;k<T;k++)R[k]=this.i(k)|x.i(k);return new h(R,this.h|x.h)},i.xor=function(x){for(var T=Math.max(this.g.length,x.g.length),R=[],k=0;k<T;k++)R[k]=this.i(k)^x.i(k);return new h(R,this.h^x.h)};function Te(x){for(var T=x.g.length+1,R=[],k=0;k<T;k++)R[k]=x.i(k)<<1|x.i(k-1)>>>31;return new h(R,x.h)}function ge(x,T){var R=T>>5;T%=32;for(var k=x.g.length-R,D=[],L=0;L<k;L++)D[L]=0<T?x.i(L+R)>>>T|x.i(L+R+1)<<32-T:x.i(L+R);return new h(D,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,yy=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=E,ui=h}).apply(typeof Um<"u"?Um:typeof self<"u"?self:typeof window<"u"?window:{});var ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vy,fa,_y,pu,Jh,Ey,wy,Ty;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,y){return l==Array.prototype||l==Object.prototype||(l[d]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ou=="object"&&ou];for(var d=0;d<l.length;++d){var y=l[d];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var y=s;l=l.split(".");for(var w=0;w<l.length-1;w++){var j=l[w];if(!(j in y))break e;y=y[j]}l=l[l.length-1],w=y[l],d=d(w),d!=w&&d!=null&&e(y,l,{configurable:!0,writable:!0,value:d})}}function u(l,d){l instanceof String&&(l+="");var y=0,w=!1,j={next:function(){if(!w&&y<l.length){var H=y++;return{value:d(H,l[H]),done:!1}}return w=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}a("Array.prototype.values",function(l){return l||function(){return u(this,function(d,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function v(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function E(l,d,y){return l.call.apply(l.bind,arguments)}function S(l,d,y){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,w),l.apply(d,j)}}return function(){return l.apply(d,arguments)}}function I(l,d,y){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:S,I.apply(null,arguments)}function M(l,d){var y=Array.prototype.slice.call(arguments,1);return function(){var w=y.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function B(l,d){function y(){}y.prototype=d.prototype,l.aa=d.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(w,j,H){for(var he=Array(arguments.length-2),He=2;He<arguments.length;He++)he[He-2]=arguments[He];return d.prototype[j].apply(w,he)}}function q(l){const d=l.length;if(0<d){const y=Array(d);for(let w=0;w<d;w++)y[w]=l[w];return y}return[]}function F(l,d){for(let y=1;y<arguments.length;y++){const w=arguments[y];if(g(w)){const j=l.length||0,H=w.length||0;l.length=j+H;for(let he=0;he<H;he++)l[j+he]=w[he]}else l.push(w)}}class W{constructor(d,y){this.i=d,this.j=y,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ie(l){return/^[\s\xa0]*$/.test(l)}function Q(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function oe(l){return oe[" "](l),l}oe[" "]=function(){};var Te=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ge(l,d,y){for(const w in l)d.call(y,l[w],w,l)}function x(l,d){for(const y in l)d.call(void 0,l[y],y,l)}function T(l){const d={};for(const y in l)d[y]=l[y];return d}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,d){let y,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(y in w)l[y]=w[y];for(let H=0;H<R.length;H++)y=R[H],Object.prototype.hasOwnProperty.call(w,y)&&(l[y]=w[y])}}function D(l){var d=1;l=l.split(":");const y=[];for(;0<d&&l.length;)y.push(l.shift()),d--;return l.length&&y.push(l.join(":")),y}function L(l){m.setTimeout(()=>{throw l},0)}function A(){var l=ne;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class be{constructor(){this.h=this.g=null}add(d,y){const w=fe.get();w.set(d,y),this.h?this.h.next=w:this.g=w,this.h=w}}var fe=new W(()=>new pe,l=>l.reset());class pe{constructor(){this.next=this.g=this.h=null}set(d,y){this.h=d,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let se,Y=!1,ne=new be,K=()=>{const l=m.Promise.resolve(void 0);se=()=>{l.then(C)}};var C=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(y){L(y)}var d=fe;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}Y=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var me=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};m.addEventListener("test",y,d),m.removeEventListener("test",y,d)}catch{}return l})();function ae(l,d){if(Z.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(Te){e:{try{oe(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else y=="mouseover"?d=l.fromElement:y=="mouseout"&&(d=l.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ue[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ae.aa.h.call(this)}}B(ae,Z);var ue={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function we(l,d,y,w,j){this.listener=l,this.proxy=null,this.src=d,this.type=y,this.capture=!!w,this.ha=j,this.key=++de,this.da=this.fa=!1}function Ne(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ge(l){this.src=l,this.g={},this.h=0}Ge.prototype.add=function(l,d,y,w,j){var H=l.toString();l=this.g[H],l||(l=this.g[H]=[],this.h++);var he=Gn(l,d,w,j);return-1<he?(d=l[he],y||(d.fa=!1)):(d=new we(d,this.src,H,!!w,j),d.fa=y,l.push(d)),d};function _t(l,d){var y=d.type;if(y in l.g){var w=l.g[y],j=Array.prototype.indexOf.call(w,d,void 0),H;(H=0<=j)&&Array.prototype.splice.call(w,j,1),H&&(Ne(d),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Gn(l,d,y,w){for(var j=0;j<l.length;++j){var H=l[j];if(!H.da&&H.listener==d&&H.capture==!!y&&H.ha==w)return j}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),lt={};function mo(l,d,y,w,j){if(Array.isArray(d)){for(var H=0;H<d.length;H++)mo(l,d[H],y,w,j);return null}return y=vo(y),l&&l[ce]?l.K(d,y,v(w)?!!w.capture:!1,j):go(l,d,y,!1,w,j)}function go(l,d,y,w,j,H){if(!d)throw Error("Invalid event type");var he=v(j)?!!j.capture:!!j,He=is(l);if(He||(l[qe]=He=new Ge(l)),y=He.add(d,y,w,he,H),y.proxy)return y;if(w=$a(),y.proxy=w,w.src=l,w.listener=y,l.addEventListener)me||(j=he),j===void 0&&(j=!1),l.addEventListener(d.toString(),w,j);else if(l.attachEvent)l.attachEvent(hr(d.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return y}function $a(){function l(y){return d.call(l.src,l.listener,y)}const d=yo;return l}function rs(l,d,y,w,j){if(Array.isArray(d))for(var H=0;H<d.length;H++)rs(l,d[H],y,w,j);else w=v(w)?!!w.capture:!!w,y=vo(y),l&&l[ce]?(l=l.i,d=String(d).toString(),d in l.g&&(H=l.g[d],y=Gn(H,y,w,j),-1<y&&(Ne(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete l.g[d],l.h--)))):l&&(l=is(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Gn(d,y,w,j)),(y=-1<l?d[l]:null)&&cr(y))}function cr(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[ce])_t(d.i,l);else{var y=l.type,w=l.proxy;d.removeEventListener?d.removeEventListener(y,w,l.capture):d.detachEvent?d.detachEvent(hr(y),w):d.addListener&&d.removeListener&&d.removeListener(w),(y=is(d))?(_t(y,l),y.h==0&&(y.src=null,d[qe]=null)):Ne(l)}}}function hr(l){return l in lt?lt[l]:lt[l]="on"+l}function yo(l,d){if(l.da)l=!0;else{d=new ae(d,this);var y=l.listener,w=l.ha||l.src;l.fa&&cr(l),l=y.call(w,d)}return l}function is(l){return l=l[qe],l instanceof Ge?l:null}var ss="__closure_events_fn_"+(1e9*Math.random()>>>0);function vo(l){return typeof l=="function"?l:(l[ss]||(l[ss]=function(d){return l.handleEvent(d)}),l[ss])}function Et(){z.call(this),this.i=new Ge(this),this.M=this,this.F=null}B(Et,z),Et.prototype[ce]=!0,Et.prototype.removeEventListener=function(l,d,y,w){rs(this,l,d,y,w)};function wt(l,d){var y,w=l.F;if(w)for(y=[];w;w=w.F)y.push(w);if(l=l.M,w=d.type||d,typeof d=="string")d=new Z(d,l);else if(d instanceof Z)d.target=d.target||l;else{var j=d;d=new Z(w,l),k(d,j)}if(j=!0,y)for(var H=y.length-1;0<=H;H--){var he=d.g=y[H];j=fr(he,w,!0,d)&&j}if(he=d.g=l,j=fr(he,w,!0,d)&&j,j=fr(he,w,!1,d)&&j,y)for(H=0;H<y.length;H++)he=d.g=y[H],j=fr(he,w,!1,d)&&j}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var y=l.g[d],w=0;w<y.length;w++)Ne(y[w]);delete l.g[d],l.h--}}this.F=null},Et.prototype.K=function(l,d,y,w){return this.i.add(String(l),d,!1,y,w)},Et.prototype.L=function(l,d,y,w){return this.i.add(String(l),d,!0,y,w)};function fr(l,d,y,w){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,H=0;H<d.length;++H){var he=d[H];if(he&&!he.da&&he.capture==y){var He=he.listener,Tt=he.ha||he.src;he.fa&&_t(l.i,he),j=He.call(Tt,w)!==!1&&j}}return j&&!w.defaultPrevented}function _o(l,d,y){if(typeof l=="function")y&&(l=I(l,y));else if(l&&typeof l.handleEvent=="function")l=I(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(l,d||0)}function Mr(l){l.g=_o(()=>{l.g=null,l.i&&(l.i=!1,Mr(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class Ti extends z{constructor(d,y){super(),this.m=d,this.l=y,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Mr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(l){z.call(this),this.h=l,this.g={}}B(Si,z);var Eo=[];function wo(l){ge(l.g,function(d,y){this.g.hasOwnProperty(y)&&cr(d)},l),l.g={}}Si.prototype.N=function(){Si.aa.N.call(this),wo(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var To=m.JSON.stringify,So=m.JSON.parse,Io=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function Ii(){}Ii.prototype.h=null;function os(l){return l.h||(l.h=l.i())}function as(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hn(){Z.call(this,"d")}B(Hn,Z);function ls(){Z.call(this,"c")}B(ls,Z);var qn={},Ao=null;function Ai(){return Ao=Ao||new Et}qn.La="serverreachability";function Ro(l){Z.call(this,qn.La,l)}B(Ro,Z);function dr(l){const d=Ai();wt(d,new Ro(d))}qn.STAT_EVENT="statevent";function Co(l,d){Z.call(this,qn.STAT_EVENT,l),this.stat=d}B(Co,Z);function ct(l){const d=Ai();wt(d,new Co(d,l))}qn.Ma="timingevent";function us(l,d){Z.call(this,qn.Ma,l),this.size=d}B(us,Z);function Pn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},d)}function Ri(){this.g=!0}Ri.prototype.xa=function(){this.g=!1};function Ci(l,d,y,w,j,H){l.info(function(){if(l.g)if(H)for(var he="",He=H.split("&"),Tt=0;Tt<He.length;Tt++){var je=He[Tt].split("=");if(1<je.length){var Ct=je[0];je=je[1];var dt=Ct.split("_");he=2<=dt.length&&dt[1]=="type"?he+(Ct+"="+je+"&"):he+(Ct+"=redacted&")}}else he=null;else he=H;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+d+`
`+y+`
`+he})}function cs(l,d,y,w,j,H,he){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+d+`
`+y+`
`+H+" "+he})}function kn(l,d,y,w){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+rc(l,y)+(w?" "+w:"")})}function Po(l,d){l.info(function(){return"TIMEOUT: "+d})}Ri.prototype.info=function(){};function rc(l,d){if(!l.g)return d;if(!d)return null;try{var y=JSON.parse(d);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var w=y[l];if(!(2>w.length)){var j=w[1];if(Array.isArray(j)&&!(1>j.length)){var H=j[0];if(H!="noop"&&H!="stop"&&H!="close")for(var he=1;he<j.length;he++)j[he]=""}}}}return To(y)}catch{return d}}var hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xn;function Pi(){}B(Pi,Ii),Pi.prototype.g=function(){return new XMLHttpRequest},Pi.prototype.i=function(){return{}},xn=new Pi;function Nn(l,d,y,w){this.j=l,this.i=d,this.l=y,this.R=w||1,this.U=new Si(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ga}function Ga(){this.i=null,this.g="",this.h=!1}var ko={},fs={};function ds(l,d,y){l.L=1,l.v=Br(un(d)),l.m=y,l.P=!0,xo(l,null)}function xo(l,d){l.F=Date.now(),Ye(l),l.A=un(l.v);var y=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),$r(y.i,"t",w),l.C=0,y=l.j.J,l.h=new Ga,l.g=ul(l.j,y?d:null,!l.m),0<l.O&&(l.M=new Ti(I(l.Y,l,l.g),l.O)),d=l.U,y=l.g,w=l.ca;var j="readystatechange";Array.isArray(j)||(j&&(Eo[0]=j.toString()),j=Eo);for(var H=0;H<j.length;H++){var he=mo(y,j[H],w||d.handleEvent,!1,d.h||d);if(!he)break;d.g[he.key]=he}d=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),dr(),Ci(l.i,l.u,l.A,l.l,l.R,l.m)}Nn.prototype.ca=function(l){l=l.target;const d=this.M;d&&Jt(l)==3?d.j():this.Y(l)},Nn.prototype.Y=function(l){try{if(l==this.g)e:{const dt=Jt(this.g);var d=this.g.Ba();const _n=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||Mo(this.g)))){this.J||dt!=4||d==7||(d==8||0>=_n?dr(3):dr(2)),ki(this);var y=this.g.Z();this.X=y;t:if(Ha(this)){var w=Mo(this.g);l="";var j=w.length,H=Jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),Fr(this);var he="";break t}this.h.i=new m.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,l+=this.h.i.decode(w[d],{stream:!(H&&d==j-1)});w.length=0,this.h.g+=l,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=y==200,cs(this.i,this.u,this.A,this.l,this.R,dt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Tt=this.g;if((He=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(He)){var je=He;break t}}je=null}if(y=je)kn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,No(this,y);else{this.o=!1,this.s=3,ct(12),yn(this),Fr(this);break e}}if(this.P){y=!0;let hn;for(;!this.J&&this.C<he.length;)if(hn=ic(this,he),hn==fs){dt==4&&(this.s=4,ct(14),y=!1),kn(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==ko){this.s=4,ct(15),kn(this.i,this.l,he,"[Invalid Chunk]"),y=!1;break}else kn(this.i,this.l,hn,null),No(this,hn);if(Ha(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||he.length!=0||this.h.h||(this.s=1,ct(16),y=!1),this.o=this.o&&y,!y)kn(this.i,this.l,he,"[Invalid Chunked Response]"),yn(this),Fr(this);else if(0<he.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),bo(Ct),Ct.M=!0,ct(11))}}else kn(this.i,this.l,he,null),No(this,he);dt==4&&yn(this),this.o&&!this.J&&(dt==4?Is(this.j,this):(this.o=!1,Ye(this)))}else _s(this.g),y==400&&0<he.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),yn(this),Fr(this)}}}catch{}finally{}};function Ha(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ic(l,d){var y=l.C,w=d.indexOf(`
`,y);return w==-1?fs:(y=Number(d.substring(y,w)),isNaN(y)?ko:(w+=1,w+y>d.length?fs:(d=d.slice(w,w+y),l.C=w+y,d)))}Nn.prototype.cancel=function(){this.J=!0,yn(this)};function Ye(l){l.S=Date.now()+l.I,qa(l,l.I)}function qa(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Pn(I(l.ba,l),d)}function ki(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Nn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Po(this.i,this.A),this.L!=2&&(dr(),ct(17)),yn(this),this.s=2,Fr(this)):qa(this,this.S-l)};function Fr(l){l.j.G==0||l.J||Is(l.j,l)}function yn(l){ki(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,wo(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function No(l,d){try{var y=l.j;if(y.G!=0&&(y.g==l||qt(y.h,l))){if(!l.K&&qt(y.h,l)&&y.G==3){try{var w=y.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)Ss(y),Mn(y);else break e;Ts(y),ct(18)}}else y.za=j[1],0<y.za-y.T&&37500>j[2]&&y.F&&y.v==0&&!y.C&&(y.C=Pn(I(y.Za,y),6e3));if(1>=Ka(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else vr(y,11)}else if((l.K||y.g==l)&&Ss(y),!ie(d))for(j=y.Da.g.parse(d),d=0;d<j.length;d++){let je=j[d];if(y.T=je[0],je=je[1],y.G==2)if(je[0]=="c"){y.K=je[1],y.ia=je[2];const Ct=je[3];Ct!=null&&(y.la=Ct,y.j.info("VER="+y.la));const dt=je[4];dt!=null&&(y.Aa=dt,y.j.info("SVER="+y.Aa));const _n=je[5];_n!=null&&typeof _n=="number"&&0<_n&&(w=1.5*_n,y.L=w,y.j.info("backChannelRequestTimeoutMs_="+w)),w=y;const hn=l.g;if(hn){const Mi=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mi){var H=w.h;H.g||Mi.indexOf("spdy")==-1&&Mi.indexOf("quic")==-1&&Mi.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Vo(H,H.h),H.h=null))}if(w.D){const Rs=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rs&&(w.ya=Rs,Qe(w.I,w.D,Rs))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),w=y;var he=l;if(w.qa=ll(w,w.J?w.ia:null,w.W),he.K){Ya(w.h,he);var He=he,Tt=w.L;Tt&&(He.I=Tt),He.B&&(ki(He),Ye(He)),w.g=he}else Oi(w);0<y.i.length&&Xn(y)}else je[0]!="stop"&&je[0]!="close"||vr(y,7);else y.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?vr(y,7):Lt(y):je[0]!="noop"&&y.l&&y.l.ta(je),y.v=0)}}dr(4)}catch{}}var Qa=class{constructor(l,d){this.g=l,this.map=d}};function xi(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ln(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ka(l){return l.h?1:l.g?l.g.size:0}function qt(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Vo(l,d){l.g?l.g.add(d):l.h=d}function Ya(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}xi.prototype.cancel=function(){if(this.i=Xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Xa(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const y of l.g.values())d=d.concat(y.D);return d}return q(l.i)}function ps(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var d=[],y=l.length,w=0;w<y;w++)d.push(l[w]);return d}d=[],y=0;for(w in l)d[y++]=l[w];return d}function ms(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var d=[];l=l.length;for(var y=0;y<l;y++)d.push(y);return d}d=[],y=0;for(const w in l)d[y++]=w;return d}}}function br(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var y=ms(l),w=ps(l),j=w.length,H=0;H<j;H++)d.call(void 0,w[H],y&&y[H],l)}var Ni=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sc(l,d){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var w=l[y].indexOf("="),j=null;if(0<=w){var H=l[y].substring(0,w);j=l[y].substring(w+1)}else H=l[y];d(H,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function pr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof pr){this.h=l.h,Vi(this,l.j),this.o=l.o,this.g=l.g,jr(this,l.s),this.l=l.l;var d=l.i,y=new Qn;y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),Ur(this,y),this.m=l.m}else l&&(d=String(l).match(Ni))?(this.h=!1,Vi(this,d[1]||"",!0),this.o=Fe(d[2]||""),this.g=Fe(d[3]||"",!0),jr(this,d[4]),this.l=Fe(d[5]||"",!0),Ur(this,d[6]||"",!0),this.m=Fe(d[7]||"")):(this.h=!1,this.i=new Qn(null,this.h))}pr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(zr(d,gs,!0),":");var y=this.g;return(y||d=="file")&&(l.push("//"),(d=this.o)&&l.push(zr(d,gs,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(zr(y,y.charAt(0)=="/"?el:Za,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",zr(y,Do)),l.join("")};function un(l){return new pr(l)}function Vi(l,d,y){l.j=y?Fe(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function jr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Ur(l,d,y){d instanceof Qn?(l.i=d,Kn(l.i,l.h)):(y||(d=zr(d,tl)),l.i=new Qn(d,l.h))}function Qe(l,d,y){l.i.set(d,y)}function Br(l){return Qe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Fe(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function zr(l,d,y){return typeof l=="string"?(l=encodeURI(l).replace(d,Ja),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ja(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var gs=/[#\/\?@]/g,Za=/[#\?:]/g,el=/[#\?]/g,tl=/[#\?@]/g,Do=/#/g;function Qn(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Dt(l){l.g||(l.g=new Map,l.h=0,l.i&&sc(l.i,function(d,y){l.add(decodeURIComponent(d.replace(/\+/g," ")),y)}))}i=Qn.prototype,i.add=function(l,d){Dt(this),this.i=null,l=vn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(d),this.h+=1,this};function Vn(l,d){Dt(l),d=vn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Dn(l,d){return Dt(l),d=vn(l,d),l.g.has(d)}i.forEach=function(l,d){Dt(this),this.g.forEach(function(y,w){y.forEach(function(j){l.call(d,j,w,this)},this)},this)},i.na=function(){Dt(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),y=[];for(let w=0;w<d.length;w++){const j=l[w];for(let H=0;H<j.length;H++)y.push(d[w])}return y},i.V=function(l){Dt(this);let d=[];if(typeof l=="string")Dn(this,l)&&(d=d.concat(this.g.get(vn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)d=d.concat(l[y])}return d},i.set=function(l,d){return Dt(this),this.i=null,l=vn(this,l),Dn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function $r(l,d,y){Vn(l,d),0<y.length&&(l.i=null,l.g.set(vn(l,d),q(y)),l.h+=y.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var y=0;y<d.length;y++){var w=d[y];const H=encodeURIComponent(String(w)),he=this.V(w);for(w=0;w<he.length;w++){var j=H;he[w]!==""&&(j+="="+encodeURIComponent(String(he[w]))),l.push(j)}}return this.i=l.join("&")};function vn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Kn(l,d){d&&!l.j&&(Dt(l),l.i=null,l.g.forEach(function(y,w){var j=w.toLowerCase();w!=j&&(Vn(this,w),$r(this,j,y))},l)),l.j=d}function oc(l,d){const y=new Ri;if(m.Image){const w=new Image;w.onload=M(Xt,y,"TestLoadImage: loaded",!0,d,w),w.onerror=M(Xt,y,"TestLoadImage: error",!1,d,w),w.onabort=M(Xt,y,"TestLoadImage: abort",!1,d,w),w.ontimeout=M(Xt,y,"TestLoadImage: timeout",!1,d,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else d(!1)}function nl(l,d){const y=new Ri,w=new AbortController,j=setTimeout(()=>{w.abort(),Xt(y,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:w.signal}).then(H=>{clearTimeout(j),H.ok?Xt(y,"TestPingServer: ok",!0,d):Xt(y,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),Xt(y,"TestPingServer: error",!1,d)})}function Xt(l,d,y,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(y)}catch{}}function ac(){this.g=new Io}function rl(l,d,y){const w=y||"";try{br(l,function(j,H){let he=j;v(j)&&(he=To(j)),d.push(w+H+"="+encodeURIComponent(he))})}catch(j){throw d.push(w+"type="+encodeURIComponent("_badmap")),j}}function mr(l){this.l=l.Ub||null,this.j=l.eb||!1}B(mr,Ii),mr.prototype.g=function(){return new Di(this.l,this.j)},mr.prototype.i=(function(l){return function(){return l}})({});function Di(l,d){Et.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(Di,Et),i=Di.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,On(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ln(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,On(this)),this.g&&(this.readyState=3,On(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;il(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function il(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Ln(this):On(this),this.readyState==3&&il(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Ln(this))},i.Qa=function(l){this.g&&(this.response=l,Ln(this))},i.ga=function(){this.g&&Ln(this)};function Ln(l){l.readyState=4,l.l=null,l.j=null,l.v=null,On(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var y=d.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=d.next();return l.join(`\r
`)};function On(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function gr(l){let d="";return ge(l,function(y,w){d+=w,d+=":",d+=y,d+=`\r
`}),d}function Wr(l,d,y){e:{for(w in y){var w=!1;break e}w=!0}w||(y=gr(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Qe(l,d,y))}function nt(l){Et.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(nt,Et);var lc=/^https?$/i,Lo=["POST","PUT"];i=nt.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,y,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xn.g(),this.v=this.o?os(this.o):os(xn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(H){Li(this,H);return}if(l=y||"",y=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)y.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const H of w.keys())y.set(H,w.get(H));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),j=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Lo,d,void 0))||w||j||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,he]of y)this.g.setRequestHeader(H,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vs(this),this.u=!0,this.g.send(l),this.u=!1}catch(H){Li(this,H)}};function Li(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,ys(l),cn(l)}function ys(l){l.A||(l.A=!0,wt(l,"complete"),wt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,wt(this,"complete"),wt(this,"abort"),cn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cn(this,!0)),nt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Oo(this):this.bb())},i.bb=function(){Oo(this)};function Oo(l){if(l.h&&typeof h<"u"&&(!l.v[1]||Jt(l)!=4||l.Z()!=2)){if(l.u&&Jt(l)==4)_o(l.Ea,0,l);else if(wt(l,"readystatechange"),Jt(l)==4){l.h=!1;try{const he=l.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var y;if(!(y=d)){var w;if(w=he===0){var j=String(l.D).match(Ni)[1]||null;!j&&m.self&&m.self.location&&(j=m.self.location.protocol.slice(0,-1)),w=!lc.test(j?j.toLowerCase():"")}y=w}if(y)wt(l,"complete"),wt(l,"success");else{l.m=6;try{var H=2<Jt(l)?l.g.statusText:""}catch{H=""}l.l=H+" ["+l.Z()+"]",ys(l)}}finally{cn(l)}}}}function cn(l,d){if(l.g){vs(l);const y=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||wt(l,"ready");try{y.onreadystatechange=w}catch{}}}function vs(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function Jt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<Jt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),So(d)}};function Mo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function _s(l){const d={};l=(l.g&&2<=Jt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(ie(l[w]))continue;var y=D(l[w]);const j=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=d[j]||[];d[j]=H,H.push(y)}x(d,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(l,d,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||d}function Fo(l){this.Aa=0,this.i=[],this.j=new Ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yn("baseRetryDelayMs",5e3,l),this.cb=Yn("retryDelaySeedMs",1e4,l),this.Wa=Yn("forwardChannelMaxRetries",2,l),this.wa=Yn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new xi(l&&l.concurrentRequestLimit),this.Da=new ac,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Fo.prototype,i.la=8,i.G=1,i.connect=function(l,d,y,w){ct(0),this.W=l,this.H=d||{},y&&w!==void 0&&(this.H.OSID=y,this.H.OAID=w),this.F=this.X,this.I=ll(this,null,this.W),Xn(this)};function Lt(l){if(Es(l),l.G==3){var d=l.U++,y=un(l.I);if(Qe(y,"SID",l.K),Qe(y,"RID",d),Qe(y,"TYPE","terminate"),yr(l,y),d=new Nn(l,l.j,d),d.L=2,d.v=Br(un(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=d.v,y=!0),y||(d.g=ul(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ye(d)}al(l)}function Mn(l){l.g&&(bo(l),l.g.cancel(),l.g=null)}function Es(l){Mn(l),l.u&&(m.clearTimeout(l.u),l.u=null),Ss(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Xn(l){if(!ln(l.h)&&!l.s){l.s=!0;var d=l.Ga;se||K(),Y||(se(),Y=!0),ne.add(d,l),l.B=0}}function uc(l,d){return Ka(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Pn(I(l.Ga,l,d),ol(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const j=new Nn(this,this.j,l);let H=this.o;if(this.S&&(H?(H=T(H),k(H,this.S)):H=this.S),this.m!==null||this.O||(j.H=H,H=null),this.P)e:{for(var d=0,y=0;y<this.i.length;y++){t:{var w=this.i[y];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=y;break e}if(d===4096||y===this.i.length-1){d=y+1;break e}}d=1e3}else d=1e3;d=Gr(this,j,d),y=un(this.I),Qe(y,"RID",l),Qe(y,"CVER",22),this.D&&Qe(y,"X-HTTP-Session-Id",this.D),yr(this,y),H&&(this.O?d="headers="+encodeURIComponent(String(gr(H)))+"&"+d:this.m&&Wr(y,this.m,H)),Vo(this.h,j),this.Ua&&Qe(y,"TYPE","init"),this.P?(Qe(y,"$req",d),Qe(y,"SID","null"),j.T=!0,ds(j,y,null)):ds(j,y,d),this.G=2}}else this.G==3&&(l?ws(this,l):this.i.length==0||ln(this.h)||ws(this))};function ws(l,d){var y;d?y=d.l:y=l.U++;const w=un(l.I);Qe(w,"SID",l.K),Qe(w,"RID",y),Qe(w,"AID",l.T),yr(l,w),l.m&&l.o&&Wr(w,l.m,l.o),y=new Nn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Gr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Vo(l.h,y),ds(y,w,d)}function yr(l,d){l.H&&ge(l.H,function(y,w){Qe(d,w,y)}),l.l&&br({},function(y,w){Qe(d,w,y)})}function Gr(l,d,y){y=Math.min(l.i.length,y);var w=l.l?I(l.l.Na,l.l,l):null;e:{var j=l.i;let H=-1;for(;;){const he=["count="+y];H==-1?0<y?(H=j[0].g,he.push("ofs="+H)):H=0:he.push("ofs="+H);let He=!0;for(let Tt=0;Tt<y;Tt++){let je=j[Tt].g;const Ct=j[Tt].map;if(je-=H,0>je)H=Math.max(0,j[Tt].g-100),He=!1;else try{rl(Ct,he,"req"+je+"_")}catch{w&&w(Ct)}}if(He){w=he.join("&");break e}}}return l=l.i.splice(0,y),d.D=l,w}function Oi(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;se||K(),Y||(se(),Y=!0),ne.add(d,l),l.v=0}}function Ts(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Pn(I(l.Fa,l),ol(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,sl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Pn(I(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),Mn(this),sl(this))};function bo(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function sl(l){l.g=new Nn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=un(l.qa);Qe(d,"RID","rpc"),Qe(d,"SID",l.K),Qe(d,"AID",l.T),Qe(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Qe(d,"TO",l.ja),Qe(d,"TYPE","xmlhttp"),yr(l,d),l.m&&l.o&&Wr(d,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Br(un(d)),y.m=null,y.P=!0,xo(y,l)}i.Za=function(){this.C!=null&&(this.C=null,Mn(this),Ts(this),ct(19))};function Ss(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function Is(l,d){var y=null;if(l.g==d){Ss(l),bo(l),l.g=null;var w=2}else if(qt(l.h,d))y=d.D,Ya(l.h,d),w=1;else return;if(l.G!=0){if(d.o)if(w==1){y=d.m?d.m.length:0,d=Date.now()-d.F;var j=l.B;w=Ai(),wt(w,new us(w,y)),Xn(l)}else Oi(l);else if(j=d.s,j==3||j==0&&0<d.X||!(w==1&&uc(l,d)||w==2&&Ts(l)))switch(y&&0<y.length&&(d=l.h,d.i=d.i.concat(y)),j){case 1:vr(l,5);break;case 4:vr(l,10);break;case 3:vr(l,6);break;default:vr(l,2)}}}function ol(l,d){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*d}function vr(l,d){if(l.j.info("Error code "+d),d==2){var y=I(l.fb,l),w=l.Xa;const j=!w;w=new pr(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Vi(w,"https"),Br(w),j?oc(w.toString(),y):nl(w.toString(),y)}else ct(2);l.G=0,l.l&&l.l.sa(d),al(l),Es(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function al(l){if(l.G=0,l.ka=[],l.l){const d=Xa(l.h);(d.length!=0||l.i.length!=0)&&(F(l.ka,d),F(l.ka,l.i),l.h.i.length=0,q(l.i),l.i.length=0),l.l.ra()}}function ll(l,d,y){var w=y instanceof pr?un(y):new pr(y);if(w.g!="")d&&(w.g=d+"."+w.g),jr(w,w.s);else{var j=m.location;w=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var H=new pr(null);w&&Vi(H,w),d&&(H.g=d),j&&jr(H,j),y&&(H.l=y),w=H}return y=l.D,d=l.ya,y&&d&&Qe(w,y,d),Qe(w,"VER",l.la),yr(l,w),w}function ul(l,d,y){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new nt(new mr({eb:y})):new nt(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function jo(){}i=jo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function As(){}As.prototype.g=function(l,d){return new Qt(l,d)};function Qt(l,d){Et.call(this),this.g=new Fo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!ie(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ie(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Jn(this)}B(Qt,Et),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Lt(this.g)},Qt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=To(l),l=y);d.i.push(new Qa(d.Ya++,l)),d.G==3&&Xn(d)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Lt(this.g),delete this.g,Qt.aa.N.call(this)};function cl(l){Hn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const y in d){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}B(cl,Hn);function hl(){ls.call(this),this.status=1}B(hl,ls);function Jn(l){this.g=l}B(Jn,jo),Jn.prototype.ua=function(){wt(this.g,"a")},Jn.prototype.ta=function(l){wt(this.g,new cl(l))},Jn.prototype.sa=function(l){wt(this.g,new hl)},Jn.prototype.ra=function(){wt(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,Ty=function(){return new As},wy=function(){return Ai()},Ey=qn,Jh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,pu=hs,Wa.COMPLETE="complete",_y=Wa,as.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",Et.prototype.listen=Et.prototype.K,fa=as,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,vy=nt}).apply(typeof ou<"u"?ou:typeof self<"u"?self:typeof window<"u"?window:{});const Bm="@firebase/firestore",zm="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new hy("@firebase/firestore");function qs(){return Ji.logLevel}function _e(i,...e){if(Ji.logLevel<=Be.DEBUG){const n=e.map(Af);Ji.debug(`Firestore (${uo}): ${i}`,...n)}}function Dr(i,...e){if(Ji.logLevel<=Be.ERROR){const n=e.map(Af);Ji.error(`Firestore (${uo}): ${i}`,...n)}}function hi(i,...e){if(Ji.logLevel<=Be.WARN){const n=e.map(Af);Ji.warn(`Firestore (${uo}): ${i}`,...n)}}function Af(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Sy(i,s,n)}function Sy(i,e,n){let s=`FIRESTORE (${uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Dr(s),new Error(s)}function We(i,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,i||Sy(e,a,s)}function De(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends lo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ST{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Gt.UNAUTHENTICATED)))}shutdown(){}}class IT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class AT{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let s=this.i;const a=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Pr,e.enqueueRetryable((()=>a(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},m=g=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Pr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new Iy(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}}class RT{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CT{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new RT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $m{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PT{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const s=u=>{u.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,_e("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const a=u=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>a(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?a(u):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $m(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $m(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=kT(40);for(let u=0;u<a.length;++u)s.length<20&&a[u]<n&&(s+=e.charAt(a[u]%62))}return s}}function Le(i,e){return i<e?-1:i>e?1:0}function Zh(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),a=e.codePointAt(n);if(s!==a){if(s<128&&a<128)return Le(s,a);{const u=Ay(),h=xT(u.encode(Wm(i,n)),u.encode(Wm(e,n)));return h!==0?h:Le(s,a)}}n+=s>65535?2:1}return Le(i.length,e.length)}function Wm(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function xT(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Le(i[n],e[n]);return Le(i.length,e.length)}function to(i,e,n){return i.length===e.length&&i.every(((s,a)=>n(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="__name__";class rr{constructor(e,n,s){n===void 0?n=0:n>e.length&&ke(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ke(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return rr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const u=rr.compareSegments(e.get(a),n.get(a));if(u!==0)return u}return Le(e.length,n.length)}static compareSegments(e,n){const s=rr.isNumericId(e),a=rr.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?rr.extractNumericId(e).compare(rr.extractNumericId(n)):Zh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ui.fromString(e.substring(4,e.length-2))}}class Je extends rr{construct(e,n,s){return new Je(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((a=>a.length>0)))}return new Je(n)}static emptyPath(){return new Je([])}}const NT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends rr{construct(e,n,s){return new bt(e,n,s)}static isValidIdentifier(e){return NT.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gm}static keyField(){return new bt([Gm])}static fromServerFormat(e){const n=[];let s="",a=0;const u=()=>{if(s.length===0)throw new ye(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new ye(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else m==="`"?(h=!h,a++):m!=="."||h?(s+=m,a++):(u(),a++)}if(u(),h)throw new ye(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(Je.fromString(e))}static fromName(e){return new Re(Je.fromString(e).popFirst(5))}static empty(){return new Re(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(i,e,n){if(!n)throw new ye(X.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function VT(i,e,n,s){if(e===!0&&s===!0)throw new ye(X.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Hm(i){if(!Re.isDocumentKey(i))throw new ye(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function qm(i){if(Re.isDocumentKey(i))throw new ye(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Cy(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Uu(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ke(12329,{type:typeof i})}function fi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ye(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uu(i);throw new ye(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Ma(i,e){if(!Cy(i))throw new ye(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const h=i[s];if(a&&typeof h!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ye(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=-62135596800,Km=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Km);return new tt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Qm)throw new ye(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Km}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ma(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:yt("string",tt._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new tt(0,0))}static max(){return new Ve(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=-1;function DT(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Ve.fromTimestamp(s===1e9?new tt(n+1,0):new tt(n,s));return new di(a,Re.empty(),e)}function LT(i){return new di(i.readTime,i.key,Ra)}class di{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new di(Ve.min(),Re.empty(),Ra)}static max(){return new di(Ve.max(),Re.empty(),Ra)}}function OT(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(i.documentKey,e.documentKey),n!==0?n:Le(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(i){if(i.code!==X.FAILED_PRECONDITION||i.message!==MT)throw i;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J(((s,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,a)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):J.reject(n)}static resolve(e){return new J(((n,s)=>{n(e)}))}static reject(e){return new J(((n,s)=>{s(e)}))}static waitFor(e){return new J(((n,s)=>{let a=0,u=0,h=!1;e.forEach((m=>{++a,m.next((()=>{++u,h&&u===a&&n()}),(g=>s(g)))})),h=!0,u===a&&n()}))}static or(e){let n=J.resolve(!1);for(const s of e)n=n.next((a=>a?J.resolve(a):s()));return n}static forEach(e,n){const s=[];return e.forEach(((a,u)=>{s.push(n.call(this,a,u))})),this.waitFor(s)}static mapArray(e,n){return new J(((s,a)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const v=g;n(e[v]).next((E=>{h[v]=E,++m,m===u&&s(h)}),(E=>a(E)))}}))}static doWhile(e,n){return new J(((s,a)=>{const u=()=>{e()===!0?n().next((()=>{u()}),a):s()};u()}))}}function bT(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ho(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this._e(s),this.ae=s=>n.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Bu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=-1;function zu(i){return i==null}function Ru(i){return i===0&&1/i==-1/0}function jT(i){return typeof i=="number"&&Number.isInteger(i)&&!Ru(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="";function UT(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Ym(e)),e=BT(i.get(n),e);return Ym(e)}function BT(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const u=i.charAt(a);switch(u){case"\0":n+="";break;case Py:n+="";break;default:n+=u}}return n}function Ym(i){return i+Py+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function _i(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function ky(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new au(this.root,e,this.comparator,!1)}getReverseIterator(){return new au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new au(this.root,e,this.comparator,!0)}}class au{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,s,a,u){this.key=e,this.value=n,this.color=s??Ft.RED,this.left=a??Ft.EMPTY,this.right=u??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,u){return new Ft(e??this.key,n??this.value,s??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const u=s(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,n,s),null):u===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Ft.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,n,s,a,u){return this}insert(e,n,s){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jm(this.data.getIterator())}getIteratorFrom(e){return new Jm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=s.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class Jm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new mn([])}unionWith(e){let n=new Rt(bt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new xy("Invalid base64 string: "+u):u}})(e);return new jt(n)}static fromUint8Array(e){const n=(function(a){let u="";for(let h=0;h<a.length;++h)u+=String.fromCharCode(a[h]);return u})(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const zT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(i){if(We(!!i,39018),typeof i=="string"){let e=0;const n=zT.exec(i);if(We(!!n,46558,{timestamp:i}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ft(i.seconds),nanos:ft(i.nanos)}}function ft(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function mi(i){return typeof i=="string"?jt.fromBase64String(i):jt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="server_timestamp",Vy="__type__",Dy="__previous_value__",Ly="__local_write_time__";function Pf(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Vy])===null||n===void 0?void 0:n.stringValue)===Ny}function $u(i){const e=i.mapValue.fields[Dy];return Pf(e)?$u(e):e}function Ca(i){const e=pi(i.mapValue.fields[Ly].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,s,a,u,h,m,g,v,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=E}}const Cu="(default)";class Pa{constructor(e,n){this.projectId=e,this.database=n||Cu}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===Cu}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="__type__",WT="__max__",lu={mapValue:{}},My="__vector__",Pu="value";function gi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Pf(i)?4:HT(i)?9007199254740991:GT(i)?10:11:ke(28295,{value:i})}function ur(i,e){if(i===e)return!0;const n=gi(i);if(n!==gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ca(i).isEqual(Ca(e));case 3:return(function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const h=pi(a.timestampValue),m=pi(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,u){return mi(a.bytesValue).isEqual(mi(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,u){return ft(a.geoPointValue.latitude)===ft(u.geoPointValue.latitude)&&ft(a.geoPointValue.longitude)===ft(u.geoPointValue.longitude)})(i,e);case 2:return(function(a,u){if("integerValue"in a&&"integerValue"in u)return ft(a.integerValue)===ft(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const h=ft(a.doubleValue),m=ft(u.doubleValue);return h===m?Ru(h)===Ru(m):isNaN(h)&&isNaN(m)}return!1})(i,e);case 9:return to(i.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return(function(a,u){const h=a.mapValue.fields||{},m=u.mapValue.fields||{};if(Xm(h)!==Xm(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!ur(h[g],m[g])))return!1;return!0})(i,e);default:return ke(52216,{left:i})}}function ka(i,e){return(i.values||[]).find((n=>ur(n,e)))!==void 0}function no(i,e){if(i===e)return 0;const n=gi(i),s=gi(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(i.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=ft(u.integerValue||u.doubleValue),g=ft(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return Zm(i.timestampValue,e.timestampValue);case 4:return Zm(Ca(i),Ca(e));case 5:return Zh(i.stringValue,e.stringValue);case 6:return(function(u,h){const m=mi(u),g=mi(h);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let v=0;v<m.length&&v<g.length;v++){const E=Le(m[v],g[v]);if(E!==0)return E}return Le(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=Le(ft(u.latitude),ft(h.latitude));return m!==0?m:Le(ft(u.longitude),ft(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return eg(i.arrayValue,e.arrayValue);case 10:return(function(u,h){var m,g,v,E;const S=u.fields||{},I=h.fields||{},M=(m=S[Pu])===null||m===void 0?void 0:m.arrayValue,B=(g=I[Pu])===null||g===void 0?void 0:g.arrayValue,q=Le(((v=M==null?void 0:M.values)===null||v===void 0?void 0:v.length)||0,((E=B==null?void 0:B.values)===null||E===void 0?void 0:E.length)||0);return q!==0?q:eg(M,B)})(i.mapValue,e.mapValue);case 11:return(function(u,h){if(u===lu.mapValue&&h===lu.mapValue)return 0;if(u===lu.mapValue)return 1;if(h===lu.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),v=h.fields||{},E=Object.keys(v);g.sort(),E.sort();for(let S=0;S<g.length&&S<E.length;++S){const I=Zh(g[S],E[S]);if(I!==0)return I;const M=no(m[g[S]],v[E[S]]);if(M!==0)return M}return Le(g.length,E.length)})(i.mapValue,e.mapValue);default:throw ke(23264,{le:n})}}function Zm(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Le(i,e);const n=pi(i),s=pi(e),a=Le(n.seconds,s.seconds);return a!==0?a:Le(n.nanos,s.nanos)}function eg(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const u=no(n[a],s[a]);if(u)return u}return Le(n.length,s.length)}function ro(i){return ef(i)}function ef(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=pi(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return mi(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Re.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",a=!0;for(const u of n.values||[])a?a=!1:s+=",",s+=ef(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let a="{",u=!0;for(const h of s)u?u=!1:a+=",",a+=`${h}:${ef(n.fields[h])}`;return a+"}"})(i.mapValue):ke(61005,{value:i})}function mu(i){switch(gi(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$u(i);return e?16+mu(e):16;case 5:return 2*i.stringValue.length;case 6:return mi(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,u)=>a+mu(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let a=0;return _i(s.fields,((u,h)=>{a+=u.length+mu(h)})),a})(i.mapValue);default:throw ke(13486,{value:i})}}function tg(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function tf(i){return!!i&&"integerValue"in i}function kf(i){return!!i&&"arrayValue"in i}function ng(i){return!!i&&"nullValue"in i}function rg(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function gu(i){return!!i&&"mapValue"in i}function GT(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Oy])===null||n===void 0?void 0:n.stringValue)===My}function ya(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return _i(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=ya(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ya(i.arrayValue.values[n]);return e}return Object.assign({},i)}function HT(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===WT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!gu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ya(n)}setAll(e){let n=bt.emptyPath(),s={},a=[];e.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,a),s={},a=[],n=m.popLast()}h?s[m.lastSegment()]=ya(h):a.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,a)}delete(e){const n=this.field(e.popLast());gu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];gu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){_i(n,((a,u)=>e[a]=u));for(const a of s)delete e[a]}clone(){return new an(ya(this.value))}}function Fy(i){const e=[];return _i(i.fields,((n,s)=>{const a=new bt([n]);if(gu(s)){const u=Fy(s.mapValue).fields;if(u.length===0)e.push(a);else for(const h of u)e.push(a.child(h))}else e.push(a)})),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,s,a,u,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ht(e,0,Ve.min(),Ve.min(),Ve.min(),an.empty(),0)}static newFoundDocument(e,n,s,a){return new Ht(e,1,n,Ve.min(),s,a,0)}static newNoDocument(e,n){return new Ht(e,2,n,Ve.min(),Ve.min(),an.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,Ve.min(),Ve.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.position=e,this.inclusive=n}}function ig(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const u=e[a],h=i.position[a];if(u.field.isKeyField()?s=Re.comparator(Re.fromName(h.referenceValue),n.key):s=no(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function sg(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ur(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n="asc"){this.field=e,this.dir=n}}function qT(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{}class gt extends by{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new KT(e,n,s):n==="array-contains"?new JT(e,s):n==="in"?new ZT(e,s):n==="not-in"?new e1(e,s):n==="array-contains-any"?new t1(e,s):new gt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new YT(e,s):new XT(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(no(n,this.value)):n!==null&&gi(this.value)===gi(n)&&this.matchesComparison(no(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends by{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Wn(e,n)}matches(e){return jy(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function jy(i){return i.op==="and"}function Uy(i){return QT(i)&&jy(i)}function QT(i){for(const e of i.filters)if(e instanceof Wn)return!1;return!0}function nf(i){if(i instanceof gt)return i.field.canonicalString()+i.op.toString()+ro(i.value);if(Uy(i))return i.filters.map((e=>nf(e))).join(",");{const e=i.filters.map((n=>nf(n))).join(",");return`${i.op}(${e})`}}function By(i,e){return i instanceof gt?(function(s,a){return a instanceof gt&&s.op===a.op&&s.field.isEqual(a.field)&&ur(s.value,a.value)})(i,e):i instanceof Wn?(function(s,a){return a instanceof Wn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((u,h,m)=>u&&By(h,a.filters[m])),!0):!1})(i,e):void ke(19439)}function zy(i){return i instanceof gt?(function(n){return`${n.field.canonicalString()} ${n.op} ${ro(n.value)}`})(i):i instanceof Wn?(function(n){return n.op.toString()+" {"+n.getFilters().map(zy).join(" ,")+"}"})(i):"Filter"}class KT extends gt{constructor(e,n,s){super(e,n,s),this.key=Re.fromName(s.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class YT extends gt{constructor(e,n){super(e,"in",n),this.keys=$y("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class XT extends gt{constructor(e,n){super(e,"not-in",n),this.keys=$y("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function $y(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((s=>Re.fromName(s.referenceValue)))}class JT extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return kf(n)&&ka(n.arrayValue,this.value)}}class ZT extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ka(this.value.arrayValue,n)}}class e1 extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ka(this.value.arrayValue,n)}}class t1 extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!kf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>ka(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n=null,s=[],a=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=u,this.startAt=h,this.endAt=m,this.Pe=null}}function og(i,e=null,n=[],s=[],a=null,u=null,h=null){return new n1(i,e,n,s,a,u,h)}function xf(i){const e=De(i);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>nf(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),zu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>ro(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>ro(s))).join(",")),e.Pe=n}return e.Pe}function Nf(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!qT(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!By(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!sg(i.startAt,e.startAt)&&sg(i.endAt,e.endAt)}function rf(i){return Re.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n=null,s=[],a=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function r1(i,e,n,s,a,u,h,m){return new fo(i,e,n,s,a,u,h,m)}function Vf(i){return new fo(i)}function ag(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Wy(i){return i.collectionGroup!==null}function va(i){const e=De(i);if(e.Te===null){e.Te=[];const n=new Set;for(const u of e.explicitOrderBy)e.Te.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Rt(bt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Te.push(new xa(u,s))})),n.has(bt.keyField().canonicalString())||e.Te.push(new xa(bt.keyField(),s))}return e.Te}function ir(i){const e=De(i);return e.Ie||(e.Ie=i1(e,va(i))),e.Ie}function i1(i,e){if(i.limitType==="F")return og(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const u=a.dir==="desc"?"asc":"desc";return new xa(a.field,u)}));const n=i.endAt?new ku(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new ku(i.startAt.position,i.startAt.inclusive):null;return og(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function sf(i,e){const n=i.filters.concat([e]);return new fo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function xu(i,e,n){return new fo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Wu(i,e){return Nf(ir(i),ir(e))&&i.limitType===e.limitType}function Gy(i){return`${xf(ir(i))}|lt:${i.limitType}`}function Qs(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((a=>zy(a))).join(", ")}]`),zu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((a=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(a))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((a=>ro(a))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((a=>ro(a))).join(",")),`Target(${s})`})(ir(i))}; limitType=${i.limitType})`}function Gu(i,e){return e.isFoundDocument()&&(function(s,a){const u=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Re.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,a){for(const u of va(s))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,a){for(const u of s.filters)if(!u.matches(a))return!1;return!0})(i,e)&&(function(s,a){return!(s.startAt&&!(function(h,m,g){const v=ig(h,m,g);return h.inclusive?v<=0:v<0})(s.startAt,va(s),a)||s.endAt&&!(function(h,m,g){const v=ig(h,m,g);return h.inclusive?v>=0:v>0})(s.endAt,va(s),a))})(i,e)}function s1(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Hy(i){return(e,n)=>{let s=!1;for(const a of va(i)){const u=o1(a,e,n);if(u!==0)return u;s=s||a.field.isKeyField()}return 0}}function o1(i,e,n){const s=i.field.isKeyField()?Re.comparator(e.key,n.key):(function(u,h,m){const g=h.data.field(u),v=m.data.field(u);return g!==null&&v!==null?no(g,v):ke(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ke(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,u]of s)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,((n,s)=>{for(const[a,u]of s)e(a,u)}))}isEmpty(){return ky(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=new at(Re.comparator);function Lr(){return a1}const qy=new at(Re.comparator);function da(...i){let e=qy;for(const n of i)e=e.insert(n.key,n);return e}function Qy(i){let e=qy;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Yi(){return _a()}function Ky(){return _a()}function _a(){return new ts((i=>i.toString()),((i,e)=>i.isEqual(e)))}const l1=new at(Re.comparator),u1=new Rt(Re.comparator);function Me(...i){let e=u1;for(const n of i)e=e.add(n);return e}const c1=new Rt(Le);function h1(){return c1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(e)?"-0":e}}function Yy(i){return{integerValue:""+i}}function f1(i,e){return jT(e)?Yy(e):Df(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this._=void 0}}function d1(i,e,n){return i instanceof Nu?(function(a,u){const h={fields:{[Vy]:{stringValue:Ny},[Ly]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&Pf(u)&&(u=$u(u)),u&&(h.fields[Dy]=u),{mapValue:h}})(n,e):i instanceof Na?Jy(i,e):i instanceof Va?Zy(i,e):(function(a,u){const h=Xy(a,u),m=lg(h)+lg(a.Ee);return tf(h)&&tf(a.Ee)?Yy(m):Df(a.serializer,m)})(i,e)}function p1(i,e,n){return i instanceof Na?Jy(i,e):i instanceof Va?Zy(i,e):n}function Xy(i,e){return i instanceof Vu?(function(s){return tf(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Nu extends Hu{}class Na extends Hu{constructor(e){super(),this.elements=e}}function Jy(i,e){const n=ev(e);for(const s of i.elements)n.some((a=>ur(a,s)))||n.push(s);return{arrayValue:{values:n}}}class Va extends Hu{constructor(e){super(),this.elements=e}}function Zy(i,e){let n=ev(e);for(const s of i.elements)n=n.filter((a=>!ur(a,s)));return{arrayValue:{values:n}}}class Vu extends Hu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function lg(i){return ft(i.integerValue||i.doubleValue)}function ev(i){return kf(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function m1(i,e){return i.field.isEqual(e.field)&&(function(s,a){return s instanceof Na&&a instanceof Na||s instanceof Va&&a instanceof Va?to(s.elements,a.elements,ur):s instanceof Vu&&a instanceof Vu?ur(s.Ee,a.Ee):s instanceof Nu&&a instanceof Nu})(i.transform,e.transform)}class g1{constructor(e,n){this.version=e,this.transformResults=n}}class sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yu(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class qu{}function tv(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new rv(i.key,sr.none()):new Fa(i.key,i.data,sr.none());{const n=i.data,s=an.empty();let a=new Rt(bt.comparator);for(let u of e.fields)if(!a.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),a=a.add(u)}return new Ei(i.key,s,new mn(a.toArray()),sr.none())}}function y1(i,e,n){i instanceof Fa?(function(a,u,h){const m=a.value.clone(),g=cg(a.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(i,e,n):i instanceof Ei?(function(a,u,h){if(!yu(a.precondition,u))return void u.convertToUnknownDocument(h.version);const m=cg(a.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(nv(a)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(i,e,n):(function(a,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Ea(i,e,n,s){return i instanceof Fa?(function(u,h,m,g){if(!yu(u.precondition,h))return m;const v=u.value.clone(),E=hg(u.fieldTransforms,g,h);return v.setAll(E),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(i,e,n,s):i instanceof Ei?(function(u,h,m,g){if(!yu(u.precondition,h))return m;const v=hg(u.fieldTransforms,g,h),E=h.data;return E.setAll(nv(u)),E.setAll(v),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(i,e,n,s):(function(u,h,m){return yu(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(i,e,n)}function v1(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),u=Xy(s.transform,a||null);u!=null&&(n===null&&(n=an.empty()),n.set(s.field,u))}return n||null}function ug(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&to(s,a,((u,h)=>m1(u,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Fa extends qu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ei extends qu{constructor(e,n,s,a,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function nv(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function cg(i,e,n){const s=new Map;We(i.length===n.length,32656,{Ae:n.length,Re:i.length});for(let a=0;a<n.length;a++){const u=i[a],h=u.transform,m=e.data.field(u.field);s.set(u.field,p1(h,m,n[a]))}return s}function hg(i,e,n){const s=new Map;for(const a of i){const u=a.transform,h=n.data.field(a.field);s.set(a.field,d1(u,h,e))}return s}class rv extends qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _1 extends qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&y1(u,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ea(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ea(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Ky();return this.mutations.forEach((a=>{const u=e.get(a.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(a.key)?null:m;const g=tv(h,m);g!==null&&s.set(a.key,g),h.isValidDocument()||h.convertToNoDocument(Ve.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Me())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,((n,s)=>ug(n,s)))&&to(this.baseMutations,e.baseMutations,((n,s)=>ug(n,s)))}}class Lf{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){We(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=(function(){return l1})();const u=e.mutations;for(let h=0;h<u.length;h++)a=a.insert(u[h].key,s[h].version);return new Lf(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Ue;function S1(i){switch(i){case X.OK:return ke(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return ke(15467,{code:i})}}function iv(i){if(i===void 0)return Dr("GRPC error has no .code"),X.UNKNOWN;switch(i){case mt.OK:return X.OK;case mt.CANCELLED:return X.CANCELLED;case mt.UNKNOWN:return X.UNKNOWN;case mt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case mt.INTERNAL:return X.INTERNAL;case mt.UNAVAILABLE:return X.UNAVAILABLE;case mt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case mt.NOT_FOUND:return X.NOT_FOUND;case mt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case mt.ABORTED:return X.ABORTED;case mt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case mt.DATA_LOSS:return X.DATA_LOSS;default:return ke(39323,{code:i})}}(Ue=mt||(mt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=new ui([4294967295,4294967295],0);function fg(i){const e=Ay().encode(i),n=new yy;return n.update(e),new Uint8Array(n.digest())}function dg(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ui([n,s],0),new ui([a,u],0)]}class Of{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new pa(`Invalid padding: ${n}`);if(s<0)throw new pa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new pa(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new pa(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ui.fromNumber(this.fe)}pe(e,n,s){let a=e.add(n.multiply(ui.fromNumber(s)));return a.compare(I1)===1&&(a=new ui([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=fg(e),[s,a]=dg(n);for(let u=0;u<this.hashCount;u++){const h=this.pe(s,a,u);if(!this.ye(h))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Of(u,a,n);return s.forEach((m=>h.insert(m))),h}insert(e){if(this.fe===0)return;const n=fg(e),[s,a]=dg(n);for(let u=0;u<this.hashCount;u++){const h=this.pe(s,a,u);this.we(h)}}we(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class pa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,s,a,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ba.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Qu(Ve.min(),a,new at(Le),Lr(),Me())}}class ba{constructor(e,n,s,a,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ba(s,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,s,a){this.Se=e,this.removedTargetIds=n,this.key=s,this.be=a}}class sv{constructor(e,n){this.targetId=e,this.De=n}}class ov{constructor(e,n,s=jt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class pg{constructor(){this.ve=0,this.Ce=mg(),this.Fe=jt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Me(),n=Me(),s=Me();return this.Ce.forEach(((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:ke(38017,{changeType:u})}})),new ba(this.Fe,this.Me,e,n,s)}ke(){this.xe=!1,this.Ce=mg()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class A1{constructor(e){this.We=e,this.Ge=new Map,this.ze=Lr(),this.je=uu(),this.Je=uu(),this.He=new at(Le)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const s=this.tt(n);switch(e.state){case 0:this.nt(n)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),s.Be(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((s,a)=>{this.nt(a)&&n(a)}))}it(e){const n=e.targetId,s=e.De.count,a=this.st(n);if(a){const u=a.target;if(rf(u))if(s===0){const h=new Re(u.path);this.Xe(n,h,Ht.newNoDocument(h,Ve.min()))}else We(s===1,20013,{expectedCount:s});else{const h=this.ot(n);if(h!==s){const m=this._t(e),g=m?this.ut(m,e,h):1;if(g!==0){this.rt(n);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,v)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:u=0}=n;let h,m;try{h=mi(s).toUint8Array()}catch(g){if(g instanceof xy)return hi("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Of(h,a,u)}catch(g){return hi(g instanceof pa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.fe===0?null:m}ut(e,n,s){return n.De.count===s-this.ht(e,n.targetId)?0:2}ht(e,n){const s=this.We.getRemoteKeysForTarget(n);let a=0;return s.forEach((u=>{const h=this.We.lt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Xe(n,u,null),a++)})),a}Pt(e){const n=new Map;this.Ge.forEach(((u,h)=>{const m=this.st(h);if(m){if(u.current&&rf(m.target)){const g=new Re(m.target.path);this.Tt(g).has(h)||this.It(h,g)||this.Xe(h,g,Ht.newNoDocument(g,e))}u.Ne&&(n.set(h,u.Le()),u.ke())}}));let s=Me();this.Je.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const v=this.st(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.ze.forEach(((u,h)=>h.setReadTime(e)));const a=new Qu(e,n,this.He,this.ze,s);return this.ze=Lr(),this.je=uu(),this.Je=uu(),this.He=new at(Le),a}Ze(e,n){if(!this.nt(e))return;const s=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,s),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,n)?a.qe(n,1):a.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),s&&(this.ze=this.ze.insert(n,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new pg,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Rt(Le),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Rt(Le),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new pg),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function uu(){return new at(Re.comparator)}function mg(){return new at(Re.comparator)}const R1={asc:"ASCENDING",desc:"DESCENDING"},C1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P1={and:"AND",or:"OR"};class k1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function of(i,e){return i.useProto3Json||zu(e)?e:{value:e}}function Du(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function av(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function x1(i,e){return Du(i,e.toTimestamp())}function or(i){return We(!!i,49232),Ve.fromTimestamp((function(n){const s=pi(n);return new tt(s.seconds,s.nanos)})(i))}function Mf(i,e){return af(i,e).canonicalString()}function af(i,e){const n=(function(a){return new Je(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?n:n.child(e)}function lv(i){const e=Je.fromString(i);return We(dv(e),10190,{key:e.toString()}),e}function lf(i,e){return Mf(i.databaseId,e.path)}function Bh(i,e){const n=lv(e);if(n.get(1)!==i.databaseId.projectId)throw new ye(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ye(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Re(cv(n))}function uv(i,e){return Mf(i.databaseId,e)}function N1(i){const e=lv(i);return e.length===4?Je.emptyPath():cv(e)}function uf(i){return new Je(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function cv(i){return We(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function gg(i,e,n){return{name:lf(i,e),fields:n.value.mapValue.fields}}function V1(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ke(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=(function(v,E){return v.useProto3Json?(We(E===void 0||typeof E=="string",58123),jt.fromBase64String(E||"")):(We(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),jt.fromUint8Array(E||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(v){const E=v.code===void 0?X.UNKNOWN:iv(v.code);return new ye(E,v.message||"")})(h);n=new ov(s,a,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Bh(i,s.document.name),u=or(s.document.updateTime),h=s.document.createTime?or(s.document.createTime):Ve.min(),m=new an({mapValue:{fields:s.document.fields}}),g=Ht.newFoundDocument(a,u,h,m),v=s.targetIds||[],E=s.removedTargetIds||[];n=new vu(v,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Bh(i,s.document),u=s.readTime?or(s.readTime):Ve.min(),h=Ht.newNoDocument(a,u),m=s.removedTargetIds||[];n=new vu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Bh(i,s.document),u=s.removedTargetIds||[];n=new vu([],u,a,null)}else{if(!("filter"in e))return ke(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:u}=s,h=new T1(a,u),m=s.targetId;n=new sv(m,h)}}return n}function D1(i,e){let n;if(e instanceof Fa)n={update:gg(i,e.key,e.value)};else if(e instanceof rv)n={delete:lf(i,e.key)};else if(e instanceof Ei)n={update:gg(i,e.key,e.data),updateMask:z1(e.fieldMask)};else{if(!(e instanceof _1))return ke(16599,{Rt:e.type});n={verify:lf(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof Nu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Na)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Va)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Vu)return{fieldPath:h.field.canonicalString(),increment:m.Ee};throw ke(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(a,u){return u.updateTime!==void 0?{updateTime:x1(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ke(27497)})(i,e.precondition)),n}function L1(i,e){return i&&i.length>0?(We(e!==void 0,14353),i.map((n=>(function(a,u){let h=a.updateTime?or(a.updateTime):or(u);return h.isEqual(Ve.min())&&(h=or(u)),new g1(h,a.transformResults||[])})(n,e)))):[]}function O1(i,e){return{documents:[uv(i,e.path)]}}function M1(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=uv(i,a);const u=(function(v){if(v.length!==0)return fv(Wn.create(v,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(v){if(v.length!==0)return v.map((E=>(function(I){return{field:Ks(I.field),direction:j1(I.dir)}})(E)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=of(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:n,parent:a}}function F1(i){let e=N1(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){We(s===1,65062);const E=n.from[0];E.allDescendants?a=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(S){const I=hv(S);return I instanceof Wn&&Uy(I)?I.getFilters():[I]})(n.where));let h=[];n.orderBy&&(h=(function(S){return S.map((I=>(function(B){return new xa(Ys(B.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(I)))})(n.orderBy));let m=null;n.limit&&(m=(function(S){let I;return I=typeof S=="object"?S.value:S,zu(I)?null:I})(n.limit));let g=null;n.startAt&&(g=(function(S){const I=!!S.before,M=S.values||[];return new ku(M,I)})(n.startAt));let v=null;return n.endAt&&(v=(function(S){const I=!S.before,M=S.values||[];return new ku(M,I)})(n.endAt)),r1(e,a,h,u,m,"F",g,v)}function b1(i,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function hv(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ys(n.unaryFilter.field);return gt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Ys(n.unaryFilter.field);return gt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ys(n.unaryFilter.field);return gt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ys(n.unaryFilter.field);return gt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(i):i.fieldFilter!==void 0?(function(n){return gt.create(Ys(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Wn.create(n.compositeFilter.filters.map((s=>hv(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(n.compositeFilter.op))})(i):ke(30097,{filter:i})}function j1(i){return R1[i]}function U1(i){return C1[i]}function B1(i){return P1[i]}function Ks(i){return{fieldPath:i.canonicalString()}}function Ys(i){return bt.fromServerFormat(i.fieldPath)}function fv(i){return i instanceof gt?(function(n){if(n.op==="=="){if(rg(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(ng(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rg(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(ng(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:U1(n.op),value:n.value}}})(i):i instanceof Wn?(function(n){const s=n.getFilters().map((a=>fv(a)));return s.length===1?s[0]:{compositeFilter:{op:B1(n.op),filters:s}}})(i):ke(54877,{filter:i})}function z1(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function dv(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,s,a,u=Ve.min(),h=Ve.min(),m=jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.gt=e}}function W1(i){const e=F1({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?xu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.Dn=new H1}addToCollectionParentIndex(e,n){return this.Dn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(di.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(di.min())}updateCollectionGroup(e,n,s){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class H1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new Rt(Je.comparator),u=!a.has(s);return this.index[n]=a.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Rt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pv=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(pv,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new io(0)}static ur(){return new io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="LruGarbageCollector",q1=1048576;function _g([i,e],[n,s]){const a=Le(i,n);return a===0?Le(e,s):a}class Q1{constructor(e){this.Tr=e,this.buffer=new Rt(_g),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();_g(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class K1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){_e(vg,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ho(n)?_e(vg,"Ignoring IndexedDB error during garbage collection: ",n):await co(n)}await this.Rr(3e5)}))}}class Y1{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return J.resolve(Bu.ue);const s=new Q1(n);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(yg)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yg):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let s,a,u,h,m,g,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),a=this.params.maximumSequenceNumbersToCollect):a=S,h=Date.now(),this.nthSequenceNumber(e,a)))).next((S=>(s=S,m=Date.now(),this.removeTargets(e,s,n)))).next((S=>(u=S,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((S=>(v=Date.now(),qs()<=Be.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${a} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${S} documents in `+(v-g)+`ms
Total Duration: ${v-E}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:S}))))}}function X1(i,e){return new Y1(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.changes=new ts((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?J.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(s!==null&&Ea(s.mutation,a,mn.empty(),tt.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Me()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Me()){const a=Yi();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,s).next((u=>{let h=da();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const s=Yi();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Me())))}populateOverlays(e,n,s){const a=[];return s.forEach((u=>{n.has(u)||a.push(u)})),this.documentOverlayCache.getOverlays(e,a).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(e,n,s,a){let u=Lr();const h=_a(),m=(function(){return _a()})();return n.forEach(((g,v)=>{const E=s.get(v.key);a.has(v.key)&&(E===void 0||E.mutation instanceof Ei)?u=u.insert(v.key,v):E!==void 0?(h.set(v.key,E.mutation.getFieldMask()),Ea(E.mutation,v,E.mutation.getFieldMask(),tt.now())):h.set(v.key,mn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((v,E)=>h.set(v,E))),n.forEach(((v,E)=>{var S;return m.set(v,new Z1(E,(S=h.get(v))!==null&&S!==void 0?S:null))})),m)))}recalculateAndSaveOverlays(e,n){const s=_a();let a=new at(((h,m)=>h-m)),u=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const m of h)m.keys().forEach((g=>{const v=n.get(g);if(v===null)return;let E=s.get(g)||mn.empty();E=m.applyToLocalView(v,E),s.set(g,E);const S=(a.get(m.batchId)||Me()).add(g);a=a.insert(m.batchId,S)}))})).next((()=>{const h=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,E=g.value,S=Ky();E.forEach((I=>{if(!u.has(I)){const M=tv(n.get(I),s.get(I));M!==null&&S.set(I,M),u=u.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,S))}return J.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,a){return(function(h){return Re.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Wy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next((u=>{const h=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-u.size):J.resolve(Yi());let m=Ra,g=u;return h.next((v=>J.forEach(v,((E,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(E)?J.resolve():this.remoteDocumentCache.getEntry(e,E).next((I=>{g=g.insert(E,I)}))))).next((()=>this.populateOverlays(e,v,u))).next((()=>this.computeViews(e,g,v,Me()))).next((E=>({batchId:m,changes:Qy(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next((s=>{let a=da();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const u=n.collectionGroup;let h=da();return this.indexManager.getCollectionParents(e,u).next((m=>J.forEach(m,(g=>{const v=(function(S,I){return new fo(I,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next((E=>{E.forEach(((S,I)=>{h=h.insert(S,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,s,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,a)))).next((h=>{u.forEach(((g,v)=>{const E=v.getKey();h.get(E)===null&&(h=h.insert(E,Ht.newInvalidDocument(E)))}));let m=da();return h.forEach(((g,v)=>{const E=u.get(g);E!==void 0&&Ea(E.mutation,v,mn.empty(),tt.now()),Gu(n,v)&&(m=m.insert(g,v))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return J.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:or(a.createTime)}})(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(a){return{name:a.name,query:W1(a.bundledQuery),readTime:or(a.readTime)}})(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.overlays=new at(Re.comparator),this.kr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Yi();return J.forEach(n,(a=>this.getOverlay(e,a).next((u=>{u!==null&&s.set(a,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((a,u)=>{this.wt(e,n,u)})),J.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach((u=>this.overlays=this.overlays.remove(u))),this.kr.delete(s)),J.resolve()}getOverlaysForCollection(e,n,s){const a=Yi(),u=n.length+1,h=new Re(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===u&&g.largestBatchId>s&&a.set(g.getKey(),g)}return J.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let u=new at(((v,E)=>v-E));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let E=u.get(v.largestBatchId);E===null&&(E=Yi(),u=u.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const m=Yi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,E)=>m.set(v,E))),!(m.size()>=a)););return J.resolve(m)}wt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const h=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new w1(n,s));let u=this.kr.get(n);u===void 0&&(u=Me(),this.kr.set(n,u)),this.kr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this.qr=new Rt(Nt.Qr),this.$r=new Rt(Nt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const s=new Nt(e,n);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new Nt(e,n))}Gr(e,n){e.forEach((s=>this.removeReference(s,n)))}zr(e){const n=new Re(new Je([])),s=new Nt(n,e),a=new Nt(n,e+1),u=[];return this.$r.forEachInRange([s,a],(h=>{this.Wr(h),u.push(h.key)})),u}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Re(new Je([])),s=new Nt(n,e),a=new Nt(n,e+1);let u=Me();return this.$r.forEachInRange([s,a],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Nt(e,0),s=this.qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Nt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Re.comparator(e.key,n.key)||Le(e.Hr,n.Hr)}static Ur(e,n){return Le(e.Hr,n.Hr)||Re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Rt(Nt.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const u=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new E1(u,n,s,a);this.mutationQueue.push(h);for(const m of a)this.Yr=this.Yr.add(new Nt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return J.resolve(h)}lookupMutationBatch(e,n){return J.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Xr(s),u=a<0?0:a;return J.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Cf:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Nt(n,0),a=new Nt(n,Number.POSITIVE_INFINITY),u=[];return this.Yr.forEachInRange([s,a],(h=>{const m=this.Zr(h.Hr);u.push(m)})),J.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Rt(Le);return n.forEach((a=>{const u=new Nt(a,0),h=new Nt(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([u,h],(m=>{s=s.add(m.Hr)}))})),J.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let u=s;Re.isDocumentKey(u)||(u=u.child(""));const h=new Nt(new Re(u),0);let m=new Rt(Le);return this.Yr.forEachWhile((g=>{const v=g.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(m=m.add(g.Hr)),!0)}),h),J.resolve(this.ei(m))}ei(e){const n=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){We(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return J.forEach(n.mutations,(a=>{const u=new Nt(a.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,n){const s=new Nt(n,0),a=this.Yr.firstAfterOrEqual(s);return J.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.ni=e,this.docs=(function(){return new at(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),u=a?a.size:0,h=this.ni(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return J.resolve(s?s.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let s=Lr();return n.forEach((a=>{const u=this.docs.get(a);s=s.insert(a,u?u.document.mutableCopy():Ht.newInvalidDocument(a))})),J.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let u=Lr();const h=n.path,m=new Re(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:E}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||OT(LT(E),s)<=0||(a.has(E.key)||Gu(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return J.resolve(u)}getAllFromCollectionGroup(e,n,s,a){ke(9500)}ri(e,n){return J.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new oS(this)}getSize(e){return J.resolve(this.size)}}class oS extends J1{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?n.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)})),J.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.persistence=e,this.ii=new ts((n=>xf(n)),Nf),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.si=0,this.oi=new Ff,this.targetCount=0,this._i=io.ar()}forEachTarget(e,n){return this.ii.forEach(((s,a)=>n(a))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.si&&(this.si=n),J.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new io(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.hr(n),J.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,s){let a=0;const u=[];return this.ii.forEach(((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.ii.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),J.waitFor(u).next((()=>a))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const s=this.ii.get(n)||null;return J.resolve(s)}addMatchingKeys(e,n,s){return this.oi.Kr(n,s),J.resolve()}removeMatchingKeys(e,n,s){this.oi.Gr(n,s);const a=this.persistence.referenceDelegate,u=[];return a&&n.forEach((h=>{u.push(a.markPotentiallyOrphaned(e,h))})),J.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const s=this.oi.Jr(n);return J.resolve(s)}containsKey(e,n){return J.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n){this.ai={},this.overlays={},this.ui=new Bu(0),this.ci=!1,this.ci=!0,this.li=new rS,this.referenceDelegate=e(this),this.hi=new aS(this),this.indexManager=new G1,this.remoteDocumentCache=(function(a){return new sS(a)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new $1(n),this.Ti=new tS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ai[e.toKey()];return s||(s=new iS(n,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,s){_e("MemoryPersistence","Starting transaction:",e);const a=new lS(this.ui.next());return this.referenceDelegate.Ii(),s(a).next((u=>this.referenceDelegate.di(a).next((()=>u)))).toPromise().then((u=>(a.raiseOnCommittedEvent(),u)))}Ei(e,n){return J.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,n))))}}class lS extends FT{constructor(e){super(),this.currentSequenceNumber=e}}class bf{constructor(e){this.persistence=e,this.Ai=new Ff,this.Ri=null}static Vi(e){return new bf(e)}get mi(){if(this.Ri)return this.Ri;throw ke(60996)}addReference(e,n,s){return this.Ai.addReference(s,n),this.mi.delete(s.toString()),J.resolve()}removeReference(e,n,s){return this.Ai.removeReference(s,n),this.mi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((a=>this.mi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((u=>this.mi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,(s=>{const a=Re.fromPath(s);return this.fi(e,a).next((u=>{u||n.removeEntry(a,Ve.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((s=>{s?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return J.or([()=>J.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Lu{constructor(e,n){this.persistence=e,this.gi=new ts((s=>UT(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=X1(this,n)}static Vi(e,n){return new Lu(e,n)}Ii(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((a=>s+a))))}yr(e){let n=0;return this.gr(e,(s=>{n++})).next((()=>n))}gr(e,n){return J.forEach(this.gi,((s,a)=>this.Sr(e,s,a).next((u=>u?J.resolve():n(a)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.ri(e,(h=>this.Sr(e,h,n).next((m=>{m||(s++,u.removeEntry(h,Ve.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),J.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=mu(e.data.value)),n}Sr(e,n,s){return J.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.gi.get(n);return J.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Is=s,this.ds=a}static Es(e,n){let s=Me(),a=Me();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new jf(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return sw()?8:bT(rw())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,s,a){const u={result:null};return this.ps(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ys(e,n,a,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new uS;return this.ws(e,n,h).next((m=>{if(u.result=m,this.Rs)return this.Ss(e,n,h,m.size)}))})).next((()=>u.result))}Ss(e,n,s,a){return s.documentReadCount<this.Vs?(qs()<=Be.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(qs()<=Be.DEBUG&&_e("QueryEngine","Query:",Qs(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(qs()<=Be.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ir(n))):J.resolve())}ps(e,n){if(ag(n))return J.resolve(null);let s=ir(n);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=xu(n,null,"F"),s=ir(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=Me(...u);return this.gs.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const v=this.bs(n,m);return this.Ds(n,v,h,g.readTime)?this.ps(e,xu(n,null,"F")):this.vs(e,v,n,g)}))))})))))}ys(e,n,s,a){return ag(n)||a.isEqual(Ve.min())?J.resolve(null):this.gs.getDocuments(e,s).next((u=>{const h=this.bs(n,u);return this.Ds(n,h,s,a)?J.resolve(null):(qs()<=Be.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Qs(n)),this.vs(e,h,n,DT(a,Ra)).next((m=>m)))}))}bs(e,n){let s=new Rt(Hy(e));return n.forEach(((a,u)=>{Gu(e,u)&&(s=s.add(u))})),s}Ds(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}ws(e,n,s){return qs()<=Be.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Qs(n)),this.gs.getDocumentsMatchingQuery(e,n,di.min(),s)}vs(e,n,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="LocalStore",hS=3e8;class fS{constructor(e,n,s,a){this.persistence=e,this.Cs=n,this.serializer=a,this.Fs=new at(Le),this.Ms=new ts((u=>xf(u)),Nf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function dS(i,e,n,s){return new fS(i,e,n,s)}async function gv(i,e){const n=De(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next((u=>(a=u,n.Ns(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let g=Me();for(const v of a){h.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of u){m.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next((v=>({Bs:v,removedBatchIds:h,addedBatchIds:m})))}))}))}function pS(i,e){const n=De(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),u=n.Os.newChangeBuffer({trackRemovals:!0});return(function(m,g,v,E){const S=v.batch,I=S.keys();let M=J.resolve();return I.forEach((B=>{M=M.next((()=>E.getEntry(g,B))).next((q=>{const F=v.docVersions.get(B);We(F!==null,48541),q.version.compareTo(F)<0&&(S.applyToRemoteDocument(q,v),q.isValidDocument()&&(q.setReadTime(v.commitVersion),E.addEntry(q)))}))})),M.next((()=>m.mutationQueue.removeMutationBatch(g,S)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Me();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(g=g.add(m.batch.mutations[v].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,a)))}))}function yv(i){const e=De(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function mS(i,e){const n=De(i),s=e.snapshotVersion;let a=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Os.newChangeBuffer({trackRemovals:!0});a=n.Fs;const m=[];e.targetChanges.forEach(((E,S)=>{const I=a.get(S);if(!I)return;m.push(n.hi.removeMatchingKeys(u,E.removedDocuments,S).next((()=>n.hi.addMatchingKeys(u,E.addedDocuments,S))));let M=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?M=M.withResumeToken(jt.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,s)),a=a.insert(S,M),(function(q,F,W){return q.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=hS?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(I,M,E)&&m.push(n.hi.updateTargetData(u,M))}));let g=Lr(),v=Me();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(gS(u,h,e.documentUpdates).next((E=>{g=E.Ls,v=E.ks}))),!s.isEqual(Ve.min())){const E=n.hi.getLastRemoteSnapshotVersion(u).next((S=>n.hi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return J.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,v))).next((()=>g))})).then((u=>(n.Fs=a,u)))}function gS(i,e,n){let s=Me(),a=Me();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let h=Lr();return n.forEach(((m,g)=>{const v=u.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):_e(Uf,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)})),{Ls:h,ks:a}}))}function yS(i,e){const n=De(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Cf),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function vS(i,e){const n=De(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return n.hi.getTargetData(s,e).next((u=>u?(a=u,J.resolve(a)):n.hi.allocateTargetId(s).next((h=>(a=new oi(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.hi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=n.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(s.targetId,s),n.Ms.set(e,s.targetId)),s}))}async function cf(i,e,n){const s=De(i),a=s.Fs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!ho(h))throw h;_e(Uf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function Eg(i,e,n){const s=De(i);let a=Ve.min(),u=Me();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,v,E){const S=De(g),I=S.Ms.get(E);return I!==void 0?J.resolve(S.Fs.get(I)):S.hi.getTargetData(v,E)})(s,h,ir(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(h,e,n?a:Ve.min(),n?u:Me()))).next((m=>(_S(s,s1(e),m),{documents:m,qs:u})))))}function _S(i,e,n){let s=i.xs.get(e)||Ve.min();n.forEach(((a,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.xs.set(e,s)}class wg{constructor(){this.activeTargetIds=h1()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ES{constructor(){this.Fo=new wg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,s){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new wg,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="ConnectivityMonitor";class Sg{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){_e(Tg,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){_e(Tg,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu=null;function hf(){return cu===null?cu=(function(){return 268435456+Math.round(2147483648*Math.random())})():cu++,"0x"+cu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="RestConnection",TS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SS{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===Cu?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,n,s,a,u){const h=hf(),m=this.Go(e,n.toUriEncodedString());_e(zh,`Sending RPC '${e}' ${h}:`,m,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,a,u);const{host:v}=new URL(m),E=Sf(v);return this.jo(e,m,g,s,E).then((S=>(_e(zh,`Received RPC '${e}' ${h}: `,S),S)),(S=>{throw hi(zh,`RPC '${e}' ${h} failed with error: `,S,"url: ",m,"request:",s),S}))}Jo(e,n,s,a,u,h){return this.Wo(e,n,s,a,u)}zo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,u)=>e[u]=a)),s&&s.headers.forEach(((a,u)=>e[u]=a))}Go(e,n){const s=TS[e];return`${this.$o}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class AS extends SS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,s,a,u){const h=hf();return new Promise(((m,g)=>{const v=new vy;v.setWithCredentials(!0),v.listenOnce(_y.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case pu.NO_ERROR:const S=v.getResponseJson();_e(Wt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),m(S);break;case pu.TIMEOUT:_e(Wt,`RPC '${e}' ${h} timed out`),g(new ye(X.DEADLINE_EXCEEDED,"Request time out"));break;case pu.HTTP_ERROR:const I=v.getStatus();if(_e(Wt,`RPC '${e}' ${h} failed with status:`,I,"response text:",v.getResponseText()),I>0){let M=v.getResponseJson();Array.isArray(M)&&(M=M[0]);const B=M==null?void 0:M.error;if(B&&B.status&&B.message){const q=(function(W){const ie=W.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ie)>=0?ie:X.UNKNOWN})(B.status);g(new ye(q,B.message))}else g(new ye(X.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ye(X.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{c_:e,streamId:h,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{_e(Wt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(a);_e(Wt,`RPC '${e}' ${h} sending request:`,a),v.send(n,"POST",E,s,15)}))}P_(e,n,s){const a=hf(),u=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Ty(),m=wy(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const E=u.join("");_e(Wt,`Creating RPC '${e}' stream ${a}: ${E}`,g);const S=h.createWebChannel(E,g);this.T_(S);let I=!1,M=!1;const B=new IS({Ho:F=>{M?_e(Wt,`Not sending because RPC '${e}' stream ${a} is closed:`,F):(I||(_e(Wt,`Opening RPC '${e}' stream ${a} transport.`),S.open(),I=!0),_e(Wt,`RPC '${e}' stream ${a} sending:`,F),S.send(F))},Yo:()=>S.close()}),q=(F,W,ie)=>{F.listen(W,(Q=>{try{ie(Q)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return q(S,fa.EventType.OPEN,(()=>{M||(_e(Wt,`RPC '${e}' stream ${a} transport opened.`),B.s_())})),q(S,fa.EventType.CLOSE,(()=>{M||(M=!0,_e(Wt,`RPC '${e}' stream ${a} transport closed`),B.__(),this.I_(S))})),q(S,fa.EventType.ERROR,(F=>{M||(M=!0,hi(Wt,`RPC '${e}' stream ${a} transport errored. Name:`,F.name,"Message:",F.message),B.__(new ye(X.UNAVAILABLE,"The operation could not be completed")))})),q(S,fa.EventType.MESSAGE,(F=>{var W;if(!M){const ie=F.data[0];We(!!ie,16349);const Q=ie,oe=(Q==null?void 0:Q.error)||((W=Q[0])===null||W===void 0?void 0:W.error);if(oe){_e(Wt,`RPC '${e}' stream ${a} received error:`,oe);const Te=oe.status;let ge=(function(R){const k=mt[R];if(k!==void 0)return iv(k)})(Te),x=oe.message;ge===void 0&&(ge=X.INTERNAL,x="Unknown error status: "+Te+" with message "+oe.message),M=!0,B.__(new ye(ge,x)),S.close()}else _e(Wt,`RPC '${e}' stream ${a} received:`,ie),B.a_(ie)}})),q(m,Ey.STAT_EVENT,(F=>{F.stat===Jh.PROXY?_e(Wt,`RPC '${e}' stream ${a} detected buffering proxy`):F.stat===Jh.NOPROXY&&_e(Wt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{B.o_()}),0),B}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function $h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(i){return new k1(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n,s=1e3,a=1.5,u=6e4){this.Fi=e,this.timerId=n,this.d_=s,this.E_=a,this.A_=u,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-s);a>0&&_e("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="PersistentStream";class _v{constructor(e,n,s,a,u,h,m,g){this.Fi=e,this.w_=s,this.S_=a,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new vv(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Dr(n.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.b_===n&&this.W_(s,a)}),(s=>{e((()=>{const a=new ye(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)}))}))}W_(e,n){const s=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{s((()=>this.G_(a)))})),this.stream.onMessage((a=>{s((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return _e(Ig,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(_e(Ig,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RS extends _v{constructor(e,n,s,a,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,h),this.serializer=u}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=V1(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Ve.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ve.min():h.readTime?or(h.readTime):Ve.min()})(e);return this.listener.J_(n,s)}H_(e){const n={};n.database=uf(this.serializer),n.addTarget=(function(u,h){let m;const g=h.target;if(m=rf(g)?{documents:O1(u,g)}:{query:M1(u,g).Vt},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=av(u,h.resumeToken);const v=of(u,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ve.min())>0){m.readTime=Du(u,h.snapshotVersion.toTimestamp());const v=of(u,h.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const s=b1(this.serializer,e);s&&(n.labels=s),this.k_(n)}Y_(e){const n={};n.database=uf(this.serializer),n.removeTarget=e,this.k_(n)}}class CS extends _v{constructor(e,n,s,a,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,h),this.serializer=u}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=L1(e.writeResults,e.commitTime),s=or(e.commitTime);return this.listener.ta(s,n)}na(){const e={};e.database=uf(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>D1(this.serializer,s)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{}class kS extends PS{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new ye(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,af(n,s),a,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(X.UNKNOWN,u.toString())}))}Jo(e,n,s,a,u){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Jo(e,af(n,s),a,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ye(X.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class xS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Dr(n),this._a=!1):_e("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="RemoteStore";class NS{constructor(e,n,s,a,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=u,this.Ea.xo((h=>{s.enqueueAndForget((async()=>{ns(this)&&(_e(Zi,"Restarting streams for network reachability change."),await(async function(g){const v=De(g);v.Ia.add(4),await ja(v),v.Aa.set("Unknown"),v.Ia.delete(4),await Yu(v)})(this))}))})),this.Aa=new xS(s,a)}}async function Yu(i){if(ns(i))for(const e of i.da)await e(!0)}async function ja(i){for(const e of i.da)await e(!1)}function Ev(i,e){const n=De(i);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Wf(n)?$f(n):po(n).x_()&&zf(n,e))}function Bf(i,e){const n=De(i),s=po(n);n.Ta.delete(e),s.x_()&&wv(n,e),n.Ta.size===0&&(s.x_()?s.B_():ns(n)&&n.Aa.set("Unknown"))}function zf(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}po(i).H_(e)}function wv(i,e){i.Ra.$e(e),po(i).Y_(e)}function $f(i){i.Ra=new A1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),po(i).start(),i.Aa.aa()}function Wf(i){return ns(i)&&!po(i).M_()&&i.Ta.size>0}function ns(i){return De(i).Ia.size===0}function Tv(i){i.Ra=void 0}async function VS(i){i.Aa.set("Online")}async function DS(i){i.Ta.forEach(((e,n)=>{zf(i,e)}))}async function LS(i,e){Tv(i),Wf(i)?(i.Aa.la(e),$f(i)):i.Aa.set("Unknown")}async function OS(i,e,n){if(i.Aa.set("Online"),e instanceof ov&&e.state===2&&e.cause)try{await(async function(a,u){const h=u.cause;for(const m of u.targetIds)a.Ta.has(m)&&(await a.remoteSyncer.rejectListen(m,h),a.Ta.delete(m),a.Ra.removeTarget(m))})(i,e)}catch(s){_e(Zi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ou(i,s)}else if(e instanceof vu?i.Ra.Ye(e):e instanceof sv?i.Ra.it(e):i.Ra.et(e),!n.isEqual(Ve.min()))try{const s=await yv(i.localStore);n.compareTo(s)>=0&&await(function(u,h){const m=u.Ra.Pt(h);return m.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ta.get(v);E&&u.Ta.set(v,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,v)=>{const E=u.Ta.get(g);if(!E)return;u.Ta.set(g,E.withResumeToken(jt.EMPTY_BYTE_STRING,E.snapshotVersion)),wv(u,g);const S=new oi(E.target,g,v,E.sequenceNumber);zf(u,S)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){_e(Zi,"Failed to raise snapshot:",s),await Ou(i,s)}}async function Ou(i,e,n){if(!ho(e))throw e;i.Ia.add(1),await ja(i),i.Aa.set("Offline"),n||(n=()=>yv(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{_e(Zi,"Retrying IndexedDB access"),await n(),i.Ia.delete(1),await Yu(i)}))}function Sv(i,e){return e().catch((n=>Ou(i,n,e)))}async function Xu(i){const e=De(i),n=yi(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Cf;for(;MS(e);)try{const a=await yS(e.localStore,s);if(a===null){e.Pa.length===0&&n.B_();break}s=a.batchId,FS(e,a)}catch(a){await Ou(e,a)}Iv(e)&&Av(e)}function MS(i){return ns(i)&&i.Pa.length<10}function FS(i,e){i.Pa.push(e);const n=yi(i);n.x_()&&n.Z_&&n.X_(e.mutations)}function Iv(i){return ns(i)&&!yi(i).M_()&&i.Pa.length>0}function Av(i){yi(i).start()}async function bS(i){yi(i).na()}async function jS(i){const e=yi(i);for(const n of i.Pa)e.X_(n.mutations)}async function US(i,e,n){const s=i.Pa.shift(),a=Lf.from(s,e,n);await Sv(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Xu(i)}async function BS(i,e){e&&yi(i).Z_&&await(async function(s,a){if((function(h){return S1(h)&&h!==X.ABORTED})(a.code)){const u=s.Pa.shift();yi(s).N_(),await Sv(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,a))),await Xu(s)}})(i,e),Iv(i)&&Av(i)}async function Ag(i,e){const n=De(i);n.asyncQueue.verifyOperationInProgress(),_e(Zi,"RemoteStore received new credentials");const s=ns(n);n.Ia.add(3),await ja(n),s&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Yu(n)}async function zS(i,e){const n=De(i);e?(n.Ia.delete(2),await Yu(n)):e||(n.Ia.add(2),await ja(n),n.Aa.set("Unknown"))}function po(i){return i.Va||(i.Va=(function(n,s,a){const u=De(n);return u.ia(),new RS(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)})(i.datastore,i.asyncQueue,{Zo:VS.bind(null,i),e_:DS.bind(null,i),n_:LS.bind(null,i),J_:OS.bind(null,i)}),i.da.push((async e=>{e?(i.Va.N_(),Wf(i)?$f(i):i.Aa.set("Unknown")):(await i.Va.stop(),Tv(i))}))),i.Va}function yi(i){return i.ma||(i.ma=(function(n,s,a){const u=De(n);return u.ia(),new CS(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:bS.bind(null,i),n_:BS.bind(null,i),ea:jS.bind(null,i),ta:US.bind(null,i)}),i.da.push((async e=>{e?(i.ma.N_(),await Xu(i)):(await i.ma.stop(),i.Pa.length>0&&(_e(Zi,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))}))),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n,s,a,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=u,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,u){const h=Date.now()+s,m=new Gf(e,n,h,a,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hf(i,e){if(Dr("AsyncQueue",`${e}: ${i}`),ho(i))return new ye(X.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{static emptySet(e){return new Zs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Re.comparator(n.key,s.key):(n,s)=>Re.comparator(n.key,s.key),this.keyedMap=da(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=s.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Zs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this.fa=new at(Re.comparator)}track(e){const n=e.doc.key,s=this.fa.get(n);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(n,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(n):e.type===1&&s.type===2?this.fa=this.fa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ke(63341,{At:e,ga:s}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,s)=>{e.push(s)})),e}}class so{constructor(e,n,s,a,u,h,m,g,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,a,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new so(e,n,Zs.emptySet(n),h,s,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class WS{constructor(){this.queries=Cg(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,s){const a=De(n),u=a.queries;a.queries=Cg(),u.forEach(((h,m)=>{for(const g of m.wa)g.onError(s)}))})(this,new ye(X.ABORTED,"Firestore shutting down"))}}function Cg(){return new ts((i=>Gy(i)),Wu)}async function Rv(i,e){const n=De(i);let s=3;const a=e.query;let u=n.queries.get(a);u?!u.Sa()&&e.ba()&&(s=2):(u=new $S,s=e.ba()?0:1);try{switch(s){case 0:u.ya=await n.onListen(a,!0);break;case 1:u.ya=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(h){const m=Hf(h,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,u),u.wa.push(e),e.va(n.onlineState),u.ya&&e.Ca(u.ya)&&qf(n)}async function Cv(i,e){const n=De(i),s=e.query;let a=3;const u=n.queries.get(s);if(u){const h=u.wa.indexOf(e);h>=0&&(u.wa.splice(h,1),u.wa.length===0?a=e.ba()?0:1:!u.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function GS(i,e){const n=De(i);let s=!1;for(const a of e){const u=a.query,h=n.queries.get(u);if(h){for(const m of h.wa)m.Ca(a)&&(s=!0);h.ya=a}}s&&qf(n)}function HS(i,e,n){const s=De(i),a=s.queries.get(e);if(a)for(const u of a.wa)u.onError(n);s.queries.delete(e)}function qf(i){i.Da.forEach((e=>{e.next()}))}var ff,Pg;(Pg=ff||(ff={})).Fa="default",Pg.Cache="cache";class Pv{constructor(e,n,s){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new so(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const s=n!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=so.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this.key=e}}class xv{constructor(e){this.key=e}}class qS{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Me(),this.mutatedKeys=Me(),this.Xa=Hy(e),this.eu=new Zs(this.Xa)}get tu(){return this.Ha}nu(e,n){const s=n?n.ru:new Rg,a=n?n.eu:this.eu;let u=n?n.mutatedKeys:this.mutatedKeys,h=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((E,S)=>{const I=a.get(E),M=Gu(this.query,S)?S:null,B=!!I&&this.mutatedKeys.has(I.key),q=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let F=!1;I&&M?I.data.isEqual(M.data)?B!==q&&(s.track({type:3,doc:M}),F=!0):this.iu(I,M)||(s.track({type:2,doc:M}),F=!0,(g&&this.Xa(M,g)>0||v&&this.Xa(M,v)<0)&&(m=!0)):!I&&M?(s.track({type:0,doc:M}),F=!0):I&&!M&&(s.track({type:1,doc:I}),F=!0,(g||v)&&(m=!0)),F&&(M?(h=h.add(M),u=q?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{eu:h,ru:s,Ds:m,mutatedKeys:u}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const u=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((E,S)=>(function(M,B){const q=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{At:F})}};return q(M)-q(B)})(E.type,S.type)||this.Xa(E.doc,S.doc))),this.su(s),a=a!=null&&a;const m=n&&!a?this.ou():[],g=this.Za.size===0&&this.current&&!a?1:0,v=g!==this.Ya;return this.Ya=g,h.length!==0||v?{snapshot:new so(this.query,e.eu,u,h,e.mutatedKeys,g===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:m}:{_u:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Rg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Me(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const n=[];return e.forEach((s=>{this.Za.has(s)||n.push(new xv(s))})),this.Za.forEach((s=>{e.has(s)||n.push(new kv(s))})),n}uu(e){this.Ha=e.qs,this.Za=Me();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return so.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Qf="SyncEngine";class QS{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class KS{constructor(e){this.key=e,this.lu=!1}}class YS{constructor(e,n,s,a,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new ts((m=>Gy(m)),Wu),this.Tu=new Map,this.Iu=new Set,this.du=new at(Re.comparator),this.Eu=new Map,this.Au=new Ff,this.Ru={},this.Vu=new Map,this.mu=io.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function XS(i,e,n=!0){const s=Mv(i);let a;const u=s.Pu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.cu()):a=await Nv(s,e,n,!0),a}async function JS(i,e){const n=Mv(i);await Nv(n,e,!0,!1)}async function Nv(i,e,n,s){const a=await vS(i.localStore,ir(e)),u=a.targetId,h=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await ZS(i,e,u,h==="current",a.resumeToken)),i.isPrimaryClient&&n&&Ev(i.remoteStore,a),m}async function ZS(i,e,n,s,a){i.gu=(S,I,M)=>(async function(q,F,W,ie){let Q=F.view.nu(W);Q.Ds&&(Q=await Eg(q.localStore,F.query,!1).then((({documents:x})=>F.view.nu(x,Q))));const oe=ie&&ie.targetChanges.get(F.targetId),Te=ie&&ie.targetMismatches.get(F.targetId)!=null,ge=F.view.applyChanges(Q,q.isPrimaryClient,oe,Te);return xg(q,F.targetId,ge._u),ge.snapshot})(i,S,I,M);const u=await Eg(i.localStore,e,!0),h=new qS(e,u.qs),m=h.nu(u.documents),g=ba.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),v=h.applyChanges(m,i.isPrimaryClient,g);xg(i,n,v._u);const E=new QS(e,n,h);return i.Pu.set(e,E),i.Tu.has(n)?i.Tu.get(n).push(e):i.Tu.set(n,[e]),v.snapshot}async function eI(i,e,n){const s=De(i),a=s.Pu.get(e),u=s.Tu.get(a.targetId);if(u.length>1)return s.Tu.set(a.targetId,u.filter((h=>!Wu(h,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await cf(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),n&&Bf(s.remoteStore,a.targetId),df(s,a.targetId)})).catch(co)):(df(s,a.targetId),await cf(s.localStore,a.targetId,!0))}async function tI(i,e){const n=De(i),s=n.Pu.get(e),a=n.Tu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Bf(n.remoteStore,s.targetId))}async function nI(i,e,n){const s=uI(i);try{const a=await(function(h,m){const g=De(h),v=tt.now(),E=m.reduce(((M,B)=>M.add(B.key)),Me());let S,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let B=Lr(),q=Me();return g.Os.getEntries(M,E).next((F=>{B=F,B.forEach(((W,ie)=>{ie.isValidDocument()||(q=q.add(W))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,B))).next((F=>{S=F;const W=[];for(const ie of m){const Q=v1(ie,S.get(ie.key).overlayedDocument);Q!=null&&W.push(new Ei(ie.key,Q,Fy(Q.value.mapValue),sr.exists(!0)))}return g.mutationQueue.addMutationBatch(M,v,W,m)})).next((F=>{I=F;const W=F.applyToLocalDocumentSet(S,q);return g.documentOverlayCache.saveOverlays(M,F.batchId,W)}))})).then((()=>({batchId:I.batchId,changes:Qy(S)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(h,m,g){let v=h.Ru[h.currentUser.toKey()];v||(v=new at(Le)),v=v.insert(m,g),h.Ru[h.currentUser.toKey()]=v})(s,a.batchId,n),await Ua(s,a.changes),await Xu(s.remoteStore)}catch(a){const u=Hf(a,"Failed to persist write");n.reject(u)}}async function Vv(i,e){const n=De(i);try{const s=await mS(n.localStore,e);e.targetChanges.forEach(((a,u)=>{const h=n.Eu.get(u);h&&(We(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?h.lu=!0:a.modifiedDocuments.size>0?We(h.lu,14607):a.removedDocuments.size>0&&(We(h.lu,42227),h.lu=!1))})),await Ua(n,s,e)}catch(s){await co(s)}}function kg(i,e,n){const s=De(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Pu.forEach(((u,h)=>{const m=h.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(h,m){const g=De(h);g.onlineState=m;let v=!1;g.queries.forEach(((E,S)=>{for(const I of S.wa)I.va(m)&&(v=!0)})),v&&qf(g)})(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function rI(i,e,n){const s=De(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Eu.get(e),u=a&&a.key;if(u){let h=new at(Re.comparator);h=h.insert(u,Ht.newNoDocument(u,Ve.min()));const m=Me().add(u),g=new Qu(Ve.min(),new Map,new at(Le),h,m);await Vv(s,g),s.du=s.du.remove(u),s.Eu.delete(e),Kf(s)}else await cf(s.localStore,e,!1).then((()=>df(s,e,n))).catch(co)}async function iI(i,e){const n=De(i),s=e.batch.batchId;try{const a=await pS(n.localStore,e);Lv(n,s,null),Dv(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ua(n,a)}catch(a){await co(a)}}async function sI(i,e,n){const s=De(i);try{const a=await(function(h,m){const g=De(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return g.mutationQueue.lookupMutationBatch(v,m).next((S=>(We(S!==null,37113),E=S.keys(),g.mutationQueue.removeMutationBatch(v,S)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>g.localDocuments.getDocuments(v,E)))}))})(s.localStore,e);Lv(s,e,n),Dv(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ua(s,a)}catch(a){await co(a)}}function Dv(i,e){(i.Vu.get(e)||[]).forEach((n=>{n.resolve()})),i.Vu.delete(e)}function Lv(i,e,n){const s=De(i);let a=s.Ru[s.currentUser.toKey()];if(a){const u=a.get(e);u&&(n?u.reject(n):u.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function df(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Tu.get(e))i.Pu.delete(s),n&&i.hu.pu(s,n);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach((s=>{i.Au.containsKey(s)||Ov(i,s)}))}function Ov(i,e){i.Iu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Bf(i.remoteStore,n),i.du=i.du.remove(e),i.Eu.delete(n),Kf(i))}function xg(i,e,n){for(const s of n)s instanceof kv?(i.Au.addReference(s.key,e),oI(i,s)):s instanceof xv?(_e(Qf,"Document no longer in limbo: "+s.key),i.Au.removeReference(s.key,e),i.Au.containsKey(s.key)||Ov(i,s.key)):ke(19791,{yu:s})}function oI(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Iu.has(s)||(_e(Qf,"New document in limbo: "+n),i.Iu.add(s),Kf(i))}function Kf(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const n=new Re(Je.fromString(e)),s=i.mu.next();i.Eu.set(s,new KS(n)),i.du=i.du.insert(n,s),Ev(i.remoteStore,new oi(ir(Vf(n.path)),s,"TargetPurposeLimboResolution",Bu.ue))}}async function Ua(i,e,n){const s=De(i),a=[],u=[],h=[];s.Pu.isEmpty()||(s.Pu.forEach(((m,g)=>{h.push(s.gu(g,e,n).then((v=>{var E;if((v||n)&&s.isPrimaryClient){const S=v?!v.fromCache:(E=n==null?void 0:n.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(v){a.push(v);const S=jf.Es(g.targetId,v);u.push(S)}})))})),await Promise.all(h),s.hu.J_(a),await(async function(g,v){const E=De(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>J.forEach(v,(I=>J.forEach(I.Is,(M=>E.persistence.referenceDelegate.addReference(S,I.targetId,M))).next((()=>J.forEach(I.ds,(M=>E.persistence.referenceDelegate.removeReference(S,I.targetId,M)))))))))}catch(S){if(!ho(S))throw S;_e(Uf,"Failed to update sequence numbers: "+S)}for(const S of v){const I=S.targetId;if(!S.fromCache){const M=E.Fs.get(I),B=M.snapshotVersion,q=M.withLastLimboFreeSnapshotVersion(B);E.Fs=E.Fs.insert(I,q)}}})(s.localStore,u))}async function aI(i,e){const n=De(i);if(!n.currentUser.isEqual(e)){_e(Qf,"User change. New user:",e.toKey());const s=await gv(n.localStore,e);n.currentUser=e,(function(u,h){u.Vu.forEach((m=>{m.forEach((g=>{g.reject(new ye(X.CANCELLED,h))}))})),u.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ua(n,s.Bs)}}function lI(i,e){const n=De(i),s=n.Eu.get(e);if(s&&s.lu)return Me().add(s.key);{let a=Me();const u=n.Tu.get(e);if(!u)return a;for(const h of u){const m=n.Pu.get(h);a=a.unionWith(m.view.tu)}return a}}function Mv(i){const e=De(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rI.bind(null,e),e.hu.J_=GS.bind(null,e.eventManager),e.hu.pu=HS.bind(null,e.eventManager),e}function uI(i){const e=De(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sI.bind(null,e),e}class Mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ku(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return dS(this.persistence,new cS,e.initialUser,this.serializer)}Du(e){return new mv(bf.Vi,this.serializer)}bu(e){return new ES}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mu.provider={build:()=>new Mu};class cI extends Mu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){We(this.persistence.referenceDelegate instanceof Lu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new K1(s,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new mv((s=>Lu.Vi(s,n)),this.serializer)}}class pf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>kg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=aI.bind(null,this.syncEngine),await zS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new WS})()}createDatastore(e){const n=Ku(e.databaseInfo.databaseId),s=(function(u){return new AS(u)})(e.databaseInfo);return(function(u,h,m,g){return new kS(u,h,m,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,a,u,h,m){return new NS(s,a,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>kg(this.syncEngine,n,0)),(function(){return Sg.C()?new Sg:new wS})())}createSyncEngine(e,n){return(function(a,u,h,m,g,v,E){const S=new YS(a,u,h,m,g,v);return E&&(S.fu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const u=De(a);_e(Zi,"RemoteStore shutting down."),u.Ia.add(5),await ja(u),u.Ea.shutdown(),u.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}pf.provider={build:()=>new pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="FirestoreClient";class hI{constructor(e,n,s,a,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Gt.UNAUTHENTICATED,this.clientId=Rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{_e(vi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(_e(vi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Hf(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Wh(i,e){i.asyncQueue.verifyOperationInProgress(),_e(vi,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async a=>{s.isEqual(a)||(await gv(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>{hi("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then((()=>{_e("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{hi("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),i._offlineComponents=e}async function Ng(i,e){i.asyncQueue.verifyOperationInProgress();const n=await fI(i);_e(vi,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>Ag(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,a)=>Ag(e.remoteStore,a))),i._onlineComponents=e}async function fI(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){_e(vi,"Using user provided OfflineComponentProvider");try{await Wh(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;hi("Error using user provided cache. Falling back to memory cache: "+n),await Wh(i,new Mu)}}else _e(vi,"Using default OfflineComponentProvider"),await Wh(i,new cI(void 0));return i._offlineComponents}async function bv(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(_e(vi,"Using user provided OnlineComponentProvider"),await Ng(i,i._uninitializedComponentsProvider._online)):(_e(vi,"Using default OnlineComponentProvider"),await Ng(i,new pf))),i._onlineComponents}function dI(i){return bv(i).then((e=>e.syncEngine))}async function jv(i){const e=await bv(i),n=e.eventManager;return n.onListen=XS.bind(null,e.syncEngine),n.onUnlisten=eI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tI.bind(null,e.syncEngine),n}function pI(i,e,n={}){const s=new Pr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,v){const E=new Fv({next:I=>{E.Ou(),h.enqueueAndForget((()=>Cv(u,S)));const M=I.docs.has(m);!M&&I.fromCache?v.reject(new ye(X.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&I.fromCache&&g&&g.source==="server"?v.reject(new ye(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(I)},error:I=>v.reject(I)}),S=new Pv(Vf(m.path),E,{includeMetadataChanges:!0,ka:!0});return Rv(u,S)})(await jv(i),i.asyncQueue,e,n,s))),s.promise}function mI(i,e,n={}){const s=new Pr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,v){const E=new Fv({next:I=>{E.Ou(),h.enqueueAndForget((()=>Cv(u,S))),I.fromCache&&g.source==="server"?v.reject(new ye(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(I)},error:I=>v.reject(I)}),S=new Pv(m,E,{includeMetadataChanges:!0,ka:!0});return Rv(u,S)})(await jv(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="firestore.googleapis.com",Dg=!0;class Lg{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Bv,this.ssl=Dg}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Dg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<q1)throw new ye(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Uv((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ye(X.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ye(X.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ye(X.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ju{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new ST;switch(s.type){case"firstParty":return new CT(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Vg.get(n);s&&(_e("ComponentProvider","Removing Datastore"),Vg.delete(n),s.terminate())})(this),Promise.resolve()}}function gI(i,e,n,s={}){var a;i=fi(i,Ju);const u=Sf(e),h=i._getSettings(),m=Object.assign(Object.assign({},h),{emulatorOptions:i._getEmulatorOptions()}),g=`${e}:${n}`;u&&(J0(`https://${g}`),nw("Firestore",!0)),h.host!==Bv&&h.host!==g&&hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:g,ssl:u,emulatorOptions:s});if(!Su(v,m)&&(i._setSettings(v),s.mockUserToken)){let E,S;if(typeof s.mockUserToken=="string")E=s.mockUserToken,S=Gt.MOCK_USER;else{E=Z0(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new ye(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Gt(I)}i._authCredentials=new IT(new Iy(E,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class vt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Ma(n,vt._jsonSchema))return new vt(e,s||null,new Re(Je.fromString(n.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:yt("string",vt._jsonSchemaVersion),referencePath:yt("string")};class ci extends wi{constructor(e,n,s){super(e,n,Vf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new Re(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function At(i,e,...n){if(i=Nr(i),Ry("collection","path",e),i instanceof Ju){const s=Je.fromString(e,...n);return qm(s),new ci(i,null,s)}{if(!(i instanceof vt||i instanceof ci))throw new ye(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Je.fromString(e,...n));return qm(s),new ci(i.firestore,null,s)}}function kr(i,e,...n){if(i=Nr(i),arguments.length===1&&(e=Rf.newId()),Ry("doc","path",e),i instanceof Ju){const s=Je.fromString(e,...n);return Hm(s),new vt(i,null,new Re(s))}{if(!(i instanceof vt||i instanceof ci))throw new ye(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Je.fromString(e,...n));return Hm(s),new vt(i.firestore,i instanceof ci?i.converter:null,new Re(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="AsyncQueue";class Mg{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new vv(this,"async_queue_retry"),this.oc=()=>{const s=$h();s&&_e(Og,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const n=$h();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=$h();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Pr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ho(e))throw e;_e(Og,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,Dr("INTERNAL UNHANDLED ERROR: ",Fg(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=n,n}enqueueAfterDelay(e,n,s){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const a=Gf.createAndSchedule(this,e,n,s,(u=>this.lc(u)));return this.ec.push(a),a}ac(){this.tc&&ke(47125,{hc:Fg(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Fg(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Ba extends Ju{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new Mg,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mg(e),this._firestoreClient=void 0,await e}}}function yI(i,e){const n=typeof i=="object"?i:fT(),s=typeof i=="string"?i:Cu,a=aT(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const u=Y0("firestore");u&&gI(a,...u)}return a}function Yf(i){if(i._terminated)throw new ye(X.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||vI(i),i._firestoreClient}function vI(i){var e,n,s;const a=i._freezeSettings(),u=(function(m,g,v,E){return new $T(m,g,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Uv(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new hI(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(jt.fromBase64String(e))}catch(n){throw new ye(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ma(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:yt("string",Rn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ar._jsonSchemaVersion}}static fromJSON(e){if(Ma(e,ar._jsonSchema))return new ar(e.latitude,e.longitude)}}ar._jsonSchemaVersion="firestore/geoPoint/1.0",ar._jsonSchema={type:yt("string",ar._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==a[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:lr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ma(e,lr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new lr(e.vectorValues);throw new ye(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}lr._jsonSchemaVersion="firestore/vectorValue/1.0",lr._jsonSchema={type:yt("string",lr._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=/^__.*__$/;class EI{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ei(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fa(e,this.data,n,this.fieldTransforms)}}class zv{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ei(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $v(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ec:i})}}class Jf{constructor(e,n,s,a,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,u===void 0&&this.Ac(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fu(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if($v(this.Ec)&&_I.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class wI{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ku(e)}Dc(e,n,s,a=!1){return new Jf({Ec:e,methodName:n,bc:s,path:bt.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zf(i){const e=i._freezeSettings(),n=Ku(i._databaseId);return new wI(i._databaseId,!!e.ignoreUndefinedProperties,n)}function TI(i,e,n,s,a,u={}){const h=i.Dc(u.merge||u.mergeFields?2:0,e,n,a);ed("Data must be an object, but it was:",h,s);const m=Wv(s,h);let g,v;if(u.merge)g=new mn(h.fieldMask),v=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const S of u.mergeFields){const I=mf(e,S,n);if(!h.contains(I))throw new ye(X.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Hv(E,I)||E.push(I)}g=new mn(E),v=h.fieldTransforms.filter((S=>g.covers(S.field)))}else g=null,v=h.fieldTransforms;return new EI(new an(m),g,v)}class ec extends Xf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ec}}function SI(i,e,n,s){const a=i.Dc(1,e,n);ed("Data must be an object, but it was:",a,s);const u=[],h=an.empty();_i(s,((g,v)=>{const E=td(e,g,n);v=Nr(v);const S=a.gc(E);if(v instanceof ec)u.push(E);else{const I=za(v,S);I!=null&&(u.push(E),h.set(E,I))}}));const m=new mn(u);return new zv(h,m,a.fieldTransforms)}function II(i,e,n,s,a,u){const h=i.Dc(1,e,n),m=[mf(e,s,n)],g=[a];if(u.length%2!=0)throw new ye(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(mf(e,u[I])),g.push(u[I+1]);const v=[],E=an.empty();for(let I=m.length-1;I>=0;--I)if(!Hv(v,m[I])){const M=m[I];let B=g[I];B=Nr(B);const q=h.gc(M);if(B instanceof ec)v.push(M);else{const F=za(B,q);F!=null&&(v.push(M),E.set(M,F))}}const S=new mn(v);return new zv(E,S,h.fieldTransforms)}function AI(i,e,n,s=!1){return za(n,i.Dc(s?4:3,e))}function za(i,e){if(Gv(i=Nr(i)))return ed("Unsupported field value:",e,i),Wv(i,e);if(i instanceof Xf)return(function(s,a){if(!$v(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(a);u&&a.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,a){const u=[];let h=0;for(const m of s){let g=za(m,a.yc(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(i,e)}return(function(s,a){if((s=Nr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return f1(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=tt.fromDate(s);return{timestampValue:Du(a.serializer,u)}}if(s instanceof tt){const u=new tt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Du(a.serializer,u)}}if(s instanceof ar)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Rn)return{bytesValue:av(a.serializer,s._byteString)};if(s instanceof vt){const u=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw a.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Mf(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof lr)return(function(h,m){return{mapValue:{fields:{[Oy]:{stringValue:My},[Pu]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw m.wc("VectorValues must only contain numeric values.");return Df(m.serializer,v)}))}}}}}})(s,a);throw a.wc(`Unsupported field value: ${Uu(s)}`)})(i,e)}function Wv(i,e){const n={};return ky(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(i,((s,a)=>{const u=za(a,e.Vc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function Gv(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof tt||i instanceof ar||i instanceof Rn||i instanceof vt||i instanceof Xf||i instanceof lr)}function ed(i,e,n){if(!Gv(n)||!Cy(n)){const s=Uu(n);throw s==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+s)}}function mf(i,e,n){if((e=Nr(e))instanceof Zu)return e._internalPath;if(typeof e=="string")return td(i,e);throw Fu("Field path arguments must be of type string or ",i,!1,void 0,n)}const RI=new RegExp("[~\\*/\\[\\]]");function td(i,e,n){if(e.search(RI)>=0)throw Fu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Zu(...e.split("."))._internalPath}catch{throw Fu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Fu(i,e,n,s,a){const u=s&&!s.isEmpty(),h=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${a}`),g+=")"),new ye(X.INVALID_ARGUMENT,m+i+g)}function Hv(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n,s,a,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CI extends qv{data(){return super.data()}}function tc(i,e){return typeof e=="string"?td(i,e):e instanceof Zu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ye(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nd{}class rd extends nd{}function wa(i,e,...n){let s=[];e instanceof nd&&s.push(e),s=s.concat(n),(function(u){const h=u.filter((g=>g instanceof id)).length,m=u.filter((g=>g instanceof nc)).length;if(h>1||h>0&&m>0)throw new ye(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)i=a._apply(i);return i}class nc extends rd{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new nc(e,n,s)}_apply(e){const n=this._parse(e);return Qv(e._query,n),new wi(e.firestore,e.converter,sf(e._query,n))}_parse(e){const n=Zf(e.firestore);return(function(u,h,m,g,v,E,S){let I;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ye(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){jg(S,E);const B=[];for(const q of S)B.push(bg(g,u,q));I={arrayValue:{values:B}}}else I=bg(g,u,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||jg(S,E),I=AI(m,h,S,E==="in"||E==="not-in");return gt.create(v,E,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _u(i,e,n){const s=e,a=tc("where",i);return nc._create(a,s,n)}class id extends nd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new id(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,u){let h=a;const m=u.getFlattenedFilters();for(const g of m)Qv(h,g),h=sf(h,g)})(e._query,n),new wi(e.firestore,e.converter,sf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sd extends rd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new sd(e,n)}_apply(e){const n=(function(a,u,h){if(a.startAt!==null)throw new ye(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ye(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xa(u,h)})(e._query,this._field,this._direction);return new wi(e.firestore,e.converter,(function(a,u){const h=a.explicitOrderBy.concat([u]);return new fo(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function kI(i,e="asc"){const n=e,s=tc("orderBy",i);return sd._create(s,n)}class od extends rd{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new od(e,n,s)}_apply(e){return new wi(e.firestore,e.converter,xu(e._query,this._limit,this._limitType))}}function xI(i){return od._create("limit",i,"F")}function bg(i,e,n){if(typeof(n=Nr(n))=="string"){if(n==="")throw new ye(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wy(e)&&n.indexOf("/")!==-1)throw new ye(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Je.fromString(n));if(!Re.isDocumentKey(s))throw new ye(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return tg(i,new Re(s))}if(n instanceof vt)return tg(i,n._key);throw new ye(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uu(n)}.`)}function jg(i,e){if(!Array.isArray(i)||i.length===0)throw new ye(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qv(i,e){const n=(function(a,u){for(const h of a)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ye(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class NI{convertValue(e,n="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return _i(e,((a,u)=>{s[a]=this.convertValue(u,n)})),s}convertVectorValue(e){var n,s,a;const u=(a=(s=(n=e.fields)===null||n===void 0?void 0:n[Pu].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map((h=>ft(h.doubleValue)));return new lr(u)}convertGeoPoint(e){return new ar(ft(e.latitude),ft(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=$u(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ca(e));default:return null}}convertTimestamp(e){const n=pi(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Je.fromString(e);We(dv(s),9688,{name:e});const a=new Pa(s.get(1),s.get(3)),u=new Re(s.popFirst(5));return a.isEqual(n)||Dr(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class ma{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xi extends qv{constructor(e,n,s,a,u,h){super(e,n,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(tc("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xi._jsonSchema={type:yt("string",Xi._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Eu extends Xi{data(e={}){return super.data(e)}}class eo{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new ma(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Eu(this._firestore,this._userDataWriter,s.key,s,new ma(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,u){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map((m=>{const g=new Eu(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ma(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Eu(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ma(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,E=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:DI(m.type),doc:g,oldIndex:v,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),a.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DI(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(i){i=fi(i,vt);const e=fi(i.firestore,Ba);return pI(Yf(e),i._key).then((n=>OI(e,i,n)))}eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:yt("string",eo._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class Kv extends NI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function Vt(i){i=fi(i,wi);const e=fi(i.firestore,Ba),n=Yf(e),s=new Kv(e);return PI(i._query),mI(n,i._query).then((a=>new eo(e,s,i,a)))}function Ta(i,e,n,...s){i=fi(i,vt);const a=fi(i.firestore,Ba),u=Zf(a);let h;return h=typeof(e=Nr(e))=="string"||e instanceof Zu?II(u,"updateDoc",i._key,e,n,s):SI(u,"updateDoc",i._key,e),Yv(a,[h.toMutation(i._key,sr.exists(!0))])}function LI(i,e){const n=fi(i.firestore,Ba),s=kr(i),a=VI(i.converter,e);return Yv(n,[TI(Zf(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,sr.exists(!1))]).then((()=>s))}function Yv(i,e){return(function(s,a){const u=new Pr;return s.asyncQueue.enqueueAndForget((async()=>nI(await dI(s),a,u))),u.promise})(Yf(i),e)}function OI(i,e,n){const s=n.docs.get(e._key),a=new Kv(i);return new Xi(i,a,e._key,s,new ma(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){uo=a})(hT),Au(new Ia("firestore",((s,{instanceIdentifier:a,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new Ba(new AT(s.getProvider("auth-internal")),new PT(h,s.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ye(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(v.options.projectId,E)})(h,a),h);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Js(Bm,zm,e),Js(Bm,zm,"esm2017")})();var MI="firebase",FI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Js(MI,FI,"app");const bI={apiKey:"AIzaSyDxk3T_7oF_ObNbw97fj9GnUj5f4fTaqgU",authDomain:"acc-fantasy-667a8.firebaseapp.com",projectId:"acc-fantasy-667a8",storageBucket:"acc-fantasy-667a8.firebasestorage.app",messagingSenderId:"938894260054",appId:"1:938894260054:web:4748ebc7fbeaf254c808f7"},jI=py(bI),Ke=yI(jI),Ug=4;function UI(){const[i,e]=b.useState("loading"),[n,s]=b.useState(""),[a,u]=b.useState(1),[h,m]=b.useState(1),[g,v]=b.useState([]),[E,S]=b.useState([]),[I,M]=b.useState([]);b.useEffect(()=>{let W=!0;async function ie(){var Q;e("loading"),s("");try{const oe=await ad(kr(Ke,"league","main")),Te=Number((Q=oe.data())==null?void 0:Q.currentWeek)||1,[ge,x,T]=await Promise.all([Vt(At(Ke,"teams")),Vt(At(Ke,"matchups")),Vt(wa(At(Ke,"transactions"),kI("timestamp","desc"),xI(50)))]),R=ge.docs.map(L=>{const A=L.data()||{};return{id:L.id,teamId:A.teamId||L.id,name:A.teamName||A.owner||A.teamId||L.id}}),k=x.docs.map(L=>L.data()||{}),D=T.docs.map(L=>({id:L.id,...L.data()}));if(!W)return;u(Te),m(Te),v(R),S(k),M(D),e("success")}catch(oe){if(!W)return;s((oe==null?void 0:oe.message)||"Failed to load standings."),e("error")}}return ie(),()=>{W=!1}},[]);const B=b.useMemo(()=>{const W=Math.max(1,a);return Array.from({length:W},(ie,Q)=>Q+1)},[a]),q=b.useMemo(()=>{const W={};return g.forEach(Q=>{W[Q.teamId]={wins:0,losses:0,pf:0,pa:0}}),E.forEach(Q=>{const oe=Number(Q.week)||0;if(oe<1||oe>h)return;const Te=Q.team1,ge=Q.team2;if(!Te||!ge)return;W[Te]||(W[Te]={wins:0,losses:0,pf:0,pa:0}),W[ge]||(W[ge]={wins:0,losses:0,pf:0,pa:0});const x=Number(Q.team1Points)||0,T=Number(Q.team2Points)||0;if(W[Te].pf+=x,W[Te].pa+=T,W[ge].pf+=T,W[ge].pa+=x,Q.completed===!0&&Q.winner){const R=String(Q.winner),k=R===Te?ge:R===ge?Te:null;k&&(W[R].wins+=1,W[k].losses+=1)}}),g.map(Q=>{const oe=W[Q.teamId]||{wins:0,losses:0,pf:0,pa:0},Te=oe.wins+oe.losses,ge=Te?oe.wins/Te:0;return{...Q,...oe,winPct:ge}}).sort((Q,oe)=>oe.winPct!==Q.winPct?oe.winPct-Q.winPct:oe.pf!==Q.pf?oe.pf-Q.pf:oe.pa!==Q.pa?oe.pa-Q.pa:Q.name.localeCompare(oe.name)).map((Q,oe)=>({...Q,rank:oe+1}))},[g,E,h]),F=W=>W?(W.toDate?W.toDate():new Date(W)).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"";return V.jsxs("div",{className:"standings-page",children:[V.jsxs("div",{className:"standings-header",children:[V.jsx("h2",{children:"League Standings"}),V.jsxs("div",{className:"week-select",children:[V.jsx("span",{children:"Week"}),V.jsx("select",{value:h,onChange:W=>m(Number(W.target.value)),children:B.map(W=>V.jsx("option",{value:W,children:W},W))})]})]}),V.jsxs("div",{className:"standings-table",children:[V.jsxs("div",{className:"table-header",children:[V.jsx("div",{children:"Rank"}),V.jsx("div",{children:"Team"}),V.jsx("div",{children:"W"}),V.jsx("div",{children:"L"}),V.jsx("div",{children:"PF"}),V.jsx("div",{children:"PA"})]}),i==="loading"&&V.jsx("div",{className:"table-state",children:"Loading"}),i==="error"&&V.jsxs("div",{className:"table-state error",children:["Failed to load standings.",V.jsx("div",{className:"error-detail",children:n})]}),i==="success"&&q.map(W=>V.jsxs("div",{children:[V.jsxs("div",{className:"table-row",children:[V.jsx("div",{className:"rank",children:W.rank}),V.jsx("div",{className:"team-name",children:W.name}),V.jsx("div",{children:W.wins}),V.jsx("div",{children:W.losses}),V.jsx("div",{children:W.pf.toFixed(2)}),V.jsx("div",{children:W.pa.toFixed(2)})]}),W.rank===Ug&&q.length>Ug&&V.jsx("div",{className:"cutline"})]},W.teamId))]}),i==="success"&&I.length>0&&V.jsxs("div",{className:"transactions-section",children:[V.jsx("h3",{children:"Recent Transactions"}),V.jsx("div",{className:"transactions-list",children:I.map(W=>V.jsxs("div",{className:"transaction-item",children:[V.jsx("span",{className:"txn-time",children:F(W.timestamp)}),V.jsx("span",{className:"txn-team",children:W.teamName}),V.jsx("span",{className:"txn-action",children:W.type==="add"&&V.jsxs(V.Fragment,{children:["added ",V.jsx("strong",{children:W.playerAdded}),W.playerDropped&&V.jsxs(V.Fragment,{children:[", dropped ",V.jsx("strong",{children:W.playerDropped})]})]})})]},W.id))})]})]})}const BI=["G1","G2","F1","F2","FC","Bench","IR"];function hu(i){return(Number(i)||0).toFixed(2)}function zI(){const[i,e]=b.useState("loading"),[n,s]=b.useState(""),[a,u]=b.useState(1),[h,m]=b.useState(1),[g,v]=b.useState({}),[E,S]=b.useState({}),[I,M]=b.useState({}),[B,q]=b.useState({}),[F,W]=b.useState([]);b.useEffect(()=>{let T=!0;async function R(){e("loading"),s("");try{const D=(await ad(kr(Ke,"league","main"))).data()||{},L=Number(D.currentWeek)||1,[A,be]=await Promise.all([Vt(At(Ke,"teams")),Vt(At(Ke,"players"))]),fe={};A.docs.forEach(se=>{const Y=se.data()||{},ne=Y.teamId||se.id;fe[ne]={id:se.id,teamId:ne,name:Y.teamName||Y.owner||ne,roster:Y.roster||{}}});const pe={};if(be.docs.forEach(se=>{const Y=se.data()||{},ne=String(Y.playerId||se.id);pe[ne]={playerId:ne,name:Y.name||ne,teamId:Y.teamId??null}}),!T)return;u(L),m(L),v(fe),S(pe),e("success")}catch(k){if(!T)return;s((k==null?void 0:k.message)||"Failed to load matchups."),e("error")}}return R(),()=>{T=!1}},[]);const ie=b.useMemo(()=>Array.from({length:10},(R,k)=>k+1),[]);b.useEffect(()=>{if(i!=="success")return;(async()=>{try{const[R,k,D,L]=await Promise.all([Vt(wa(At(Ke,"matchups"),_u("week","==",h))),Vt(wa(At(Ke,"weeklyStats"),_u("week","==",h))),Vt(wa(At(Ke,"games"),_u("week","==",h))),Vt(At(Ke,"teams"))]),A={};L.docs.forEach(se=>{const Y=se.data()||{},ne=Y.teamId||se.id;A[ne]={id:se.id,teamId:ne,name:Y.teamName||Y.owner||ne,roster:Y.roster||{}}}),v(A);const be=R.docs.map(se=>se.data()||{}).sort((se,Y)=>String(se.matchupId||"").localeCompare(String(Y.matchupId||"")));W(be);const fe={};k.docs.forEach(se=>{const Y=se.data()||{},ne=String(Y.playerId||"");if(!ne)return;const K=Number(Y.totalFantasyPoints)||0,C=Number(Y.gamesPlayed)||0;fe[ne]={pts:K,gp:C}}),M(fe);const pe={};D.docs.forEach(se=>{const Y=se.data()||{},ne=Y.homeTeamId,K=Y.awayTeamId;typeof ne=="number"&&(pe[ne]=(pe[ne]||0)+1),typeof K=="number"&&(pe[K]=(pe[K]||0)+1)}),q(pe)}catch(R){s((R==null?void 0:R.message)||"Failed to load matchups."),e("error")}})()},[h,i]);const Q=T=>{var k;if(!T)return"";const R=String(T);return((k=E[R])==null?void 0:k.name)||R},oe=T=>{var k;if(!T)return 0;const R=String(T);return Number((k=I[R])==null?void 0:k.gp)||0},Te=T=>{var k;if(!T)return 0;const R=String(T);return Number((k=I[R])==null?void 0:k.pts)||0},ge=T=>{var D;if(!T)return null;const R=String(T),k=(D=E[R])==null?void 0:D.teamId;return typeof k=="number"?k:null},x=T=>{const R=T||{};let k=0;return["G1","G2","F1","F2","FC"].forEach(L=>{const A=R[L];if(!A)return;const be=ge(A);if(be==null)return;const fe=Number(B[be])||0,pe=oe(A),se=Math.max(0,fe-pe);k+=se}),k};return V.jsxs("div",{className:"matchups-page",children:[V.jsxs("div",{className:"matchups-header",children:[V.jsx("h2",{children:"Matchups"}),V.jsxs("div",{className:"week-select",children:[V.jsx("span",{children:"Week"}),V.jsx("select",{value:h,onChange:T=>m(Number(T.target.value)),children:ie.map(T=>V.jsx("option",{value:T,children:T},T))})]})]}),i==="loading"&&V.jsx("div",{className:"state",children:"Loading"}),i==="error"&&V.jsxs("div",{className:"state error",children:["Failed to load matchups.",V.jsx("div",{className:"error-detail",children:n})]}),i==="success"&&F.length===0&&V.jsxs("div",{className:"state",children:["No matchups for week ",h,"."]}),i==="success"&&F.map(T=>{const R=String(T.team1||""),k=String(T.team2||""),D=g[R],L=g[k],A=(D==null?void 0:D.name)||R,be=(L==null?void 0:L.name)||k,fe=(D==null?void 0:D.roster)||{},pe=(L==null?void 0:L.roster)||{},se=Number(T.team1Points)||0,Y=Number(T.team2Points)||0,ne=String(T.winner||""),K=ne&&ne===R,C=ne&&ne===k,z=x(fe),Z=x(pe);return V.jsxs("div",{className:"matchup-card",children:[V.jsxs("div",{className:"matchup-top",children:[V.jsxs("div",{className:`team-name ${K?"winner":""}`,children:[A,V.jsxs("div",{className:"subline",children:["GR: ",z]})]}),V.jsxs("div",{className:"score",children:[hu(se)," - ",hu(Y)]}),V.jsxs("div",{className:`team-name right ${C?"winner":""}`,children:[be,V.jsxs("div",{className:"subline right",children:["GR: ",Z]})]})]}),V.jsxs("div",{className:"slot-header",children:[V.jsx("div",{className:"pos",children:"POS"}),V.jsx("div",{className:"player left",children:"PLAYER"}),V.jsx("div",{className:"gp",children:"GP"}),V.jsx("div",{className:"pts",children:"PTS"}),V.jsx("div",{className:"pts",children:"PTS"}),V.jsx("div",{className:"gp",children:"GP"}),V.jsx("div",{className:"player right",children:"PLAYER"}),V.jsx("div",{className:"pos",children:"POS"})]}),BI.map(me=>{const ae=fe[me],ue=pe[me];return V.jsxs("div",{className:"slot-row",children:[V.jsx("div",{className:"pos",children:me}),V.jsx("div",{className:"player left",children:Q(ae)}),V.jsx("div",{className:"gp",children:oe(ae)}),V.jsx("div",{className:"pts",children:hu(Te(ae))}),V.jsx("div",{className:"pts",children:hu(Te(ue))}),V.jsx("div",{className:"gp",children:oe(ue)}),V.jsx("div",{className:"player right",children:Q(ue)}),V.jsx("div",{className:"pos",children:me})]},`${T.matchupId||"m"}_${me}`)})]},T.matchupId||`${R}_${k}_${T.week}`)})]})}const $I=["G1","G2","F1","F2","FC","Bench","IR"];function WI(){const[i,e]=b.useState("loading"),[n,s]=b.useState(""),[a,u]=b.useState(1),[h,m]=b.useState(1),[g,v]=b.useState([]),[E,S]=b.useState({}),[I,M]=b.useState({}),[B,q]=b.useState(null),[F,W]=b.useState(null),[ie,Q]=b.useState(!1);b.useEffect(()=>{let fe=!0;async function pe(){var se;e("loading"),s("");try{const[Y,ne,K,C]=await Promise.all([ad(kr(Ke,"league","main")),Vt(At(Ke,"teams")),Vt(At(Ke,"players")),Vt(At(Ke,"matchups"))]),z=Number((se=Y.data())==null?void 0:se.currentWeek)||1,Z={};C.docs.forEach(ue=>{const ce=ue.data()||{};if(!ce.completed)return;const de=ce.team1,we=ce.team2;Z[de]||(Z[de]={wins:0,losses:0,ties:0}),Z[we]||(Z[we]={wins:0,losses:0,ties:0});const Ne=String(ce.winner||"");Ne===de?(Z[de].wins++,Z[we].losses++):Ne===we?(Z[we].wins++,Z[de].losses++):Ne==="tie"&&(Z[de].ties++,Z[we].ties++)});const me=ne.docs.map(ue=>{const ce=ue.data()||{},de=ce.teamId||ue.id,we=Z[de]||{wins:0,losses:0,ties:0};return{id:ue.id,teamId:de,name:ce.teamName||ce.owner||ue.id,roster:ce.roster||{},record:we}}).sort((ue,ce)=>ue.name.localeCompare(ce.name)),ae={};if(K.docs.forEach(ue=>{const ce=ue.data()||{},de=String(ce.playerId||ue.id);ae[de]={playerId:de,name:ce.name||de,position:ce.position||"?",teamId:ce.teamId??null}}),!fe)return;u(z),m(z),v(me),S(ae),e("success")}catch(Y){if(!fe)return;s((Y==null?void 0:Y.message)||"Failed to load teams."),e("error")}}return pe(),()=>{fe=!1}},[]);const oe=b.useMemo(()=>{const fe=Math.max(1,a);return Array.from({length:fe},(pe,se)=>se+1)},[a]);b.useEffect(()=>{if(i!=="success")return;(async()=>{try{const pe=await Vt(wa(At(Ke,"gameStats"),_u("week","==",h))),se={};pe.docs.forEach(Y=>{const ne=Y.data()||{},K=String(ne.playerId||"");if(!K)return;se[K]||(se[K]={gamesPlayed:0,lastGamePoints:0,totalFantasyPoints:0,stats:{points:0,rebounds:0,assists:0,steals:0,blocks:0,turnovers:0,fouls:0,fieldGoalsMade:0,fieldGoalsAttempted:0,threePointFieldGoalsMade:0}}),se[K].gamesPlayed+=1,se[K].lastGamePoints=Number(ne.fantasyPoints)||0,se[K].totalFantasyPoints+=Number(ne.fantasyPoints)||0;const C=ne.stats||{};se[K].stats.points+=Number(C.points)||0,se[K].stats.rebounds+=Number(C.rebounds)||0,se[K].stats.assists+=Number(C.assists)||0,se[K].stats.steals+=Number(C.steals)||0,se[K].stats.blocks+=Number(C.blocks)||0,se[K].stats.turnovers+=Number(C.turnovers)||0,se[K].stats.fouls+=Number(C.fouls)||0,se[K].stats.fieldGoalsMade+=Number(C.fieldGoalsMade)||0,se[K].stats.fieldGoalsAttempted+=Number(C.fieldGoalsAttempted)||0,se[K].stats.threePointFieldGoalsMade+=Number(C.threePointFieldGoalsMade)||0}),M(se)}catch(pe){console.error("Error loading stats:",pe)}})()},[h,i]);const Te=h===a,ge=fe=>fe&&I[String(fe)]||null,x=fe=>{const pe=ge(fe);return pe&&pe.gamesPlayed>0},T=fe=>{const pe=ge(fe);return pe?pe.lastGamePoints===0:!0},R=fe=>{const pe=ge(fe);return pe&&pe.lastGamePoints>0},k=(fe,pe)=>fe==="Bench"||fe==="IR"?!0:fe==="G1"||fe==="G2"?pe==="G":fe==="F1"||fe==="F2"?pe==="F":fe==="FC"?pe==="F"||pe==="C":!1,D=(fe,pe,se)=>{Te&&(x(se)||(B===fe&&(F==null?void 0:F.slot)===pe?(q(null),W(null)):(q(fe),W({slot:pe,playerId:se}))))},L=async(fe,pe,se)=>{if(!Te||!F||ie)return;const Y=g.find(ae=>ae.teamId===fe);if(!Y)return;const ne=F.slot,K=F.playerId;if(ne===pe){q(null),W(null);return}if(se&&x(se))return;const C=E[K];if(!se){if(!C)return;const ae=C.position;if(!k(pe,ae)){alert(`${C.name} (${ae}) cannot be moved to ${pe}.`);return}if(pe==="IR"&&!T(K)){alert("Can only move players to IR if they scored 0 in their last game.");return}Q(!0);try{const ue={...Y.roster};ue[ne]=null,ue[pe]=K,await Ta(kr(Ke,"teams",Y.id),{roster:ue}),v(ce=>ce.map(de=>de.teamId===fe?{...de,roster:ue}:de)),q(null),W(null)}catch(ue){alert("Error moving player: "+ue.message)}finally{Q(!1)}return}const z=E[se];if(!C||!z)return;const Z=C.position,me=z.position;if(!k(pe,Z)){alert(`${C.name} (${Z}) cannot play ${pe}.`);return}if(!k(ne,me)){alert(`${z.name} (${me}) cannot play ${ne}.`);return}if(pe==="IR"&&!T(K)){alert("Can only move players to IR if they scored 0 in their last game.");return}if(ne==="IR"&&!T(se)){alert("Can only move players to IR if they scored 0 in their last game.");return}Q(!0);try{const ae={...Y.roster};ae[ne]=se,ae[pe]=K,await Ta(kr(Ke,"teams",Y.id),{roster:ae}),v(ue=>ue.map(ce=>ce.teamId===fe?{...ce,roster:ae}:ce)),q(null),W(null)}catch(ae){alert("Error swapping players: "+ae.message)}finally{Q(!1)}},A=fe=>fe?fe.toFixed(1):"0.0",be=(fe,pe)=>pe?(fe/pe).toFixed(3):".000";return V.jsxs("div",{className:"teams-page",children:[V.jsxs("div",{className:"teams-header",children:[V.jsx("h2",{children:"Team Rosters"}),V.jsxs("div",{className:"week-select",children:[V.jsx("span",{children:"Week"}),V.jsx("select",{value:h,onChange:fe=>{m(Number(fe.target.value)),q(null),W(null)},children:oe.map(fe=>V.jsx("option",{value:fe,children:fe},fe))})]})]}),!Te&&V.jsx("div",{className:"past-week-notice",children:"Viewing past week. Roster changes are disabled."}),i==="loading"&&V.jsx("div",{className:"state",children:"Loading"}),i==="error"&&V.jsxs("div",{className:"state error",children:["Failed to load teams.",V.jsx("div",{className:"error-detail",children:n})]}),i==="success"&&g.map(fe=>{const pe=B===fe.teamId;return V.jsxs("div",{className:"team-section",children:[V.jsxs("h3",{children:[fe.name,V.jsxs("span",{className:"team-record",children:["(",fe.record.wins,"-",fe.record.losses,fe.record.ties>0&&`-${fe.record.ties}`,")"]})]}),V.jsx("div",{className:"roster-table-container",children:V.jsxs("table",{className:"roster-table",children:[V.jsx("thead",{children:V.jsxs("tr",{children:[V.jsx("th",{children:"POS"}),V.jsx("th",{className:"name-col",children:"NAME"}),V.jsx("th",{children:"PTS"}),V.jsx("th",{children:"REB"}),V.jsx("th",{children:"AST"}),V.jsx("th",{children:"STL"}),V.jsx("th",{children:"BLK"}),V.jsx("th",{children:"FG%"}),V.jsx("th",{children:"3PM"}),V.jsx("th",{children:"TO"}),V.jsx("th",{children:"FOUL"}),V.jsx("th",{children:"FPTS"}),V.jsx("th",{children:"GP"})]})}),V.jsx("tbody",{children:$I.map(se=>{const Y=fe.roster[se],ne=Y?E[String(Y)]:null,K=ge(Y),C=x(Y),z=se==="IR"&&R(Y),Z=pe&&(F==null?void 0:F.slot)===se&&(F==null?void 0:F.playerId)===Y,me=Te&&Y&&!C,ae=pe&&F&&F.slot!==se&&!C,ue=()=>{ae?L(fe.teamId,se,Y):me&&D(fe.teamId,se,Y)},ce=`
                        ${Te?"":"past-week"}
                        ${C?"has-played":""}
                        ${Z?"selected":""}
                        ${ae?"swap-target":""}
                        ${me||ae?"clickable":""}
                        ${z?"needs-ir-move":""}
                      `.trim();return V.jsxs("tr",{className:ce,onClick:ue,children:[V.jsx("td",{className:"pos-cell",children:se}),V.jsx("td",{className:"name-cell",children:ne?ne.name:""}),V.jsx("td",{children:K?A(K.stats.points):""}),V.jsx("td",{children:K?A(K.stats.rebounds):""}),V.jsx("td",{children:K?A(K.stats.assists):""}),V.jsx("td",{children:K?A(K.stats.steals):""}),V.jsx("td",{children:K?A(K.stats.blocks):""}),V.jsx("td",{children:K?be(K.stats.fieldGoalsMade,K.stats.fieldGoalsAttempted):""}),V.jsx("td",{children:K?A(K.stats.threePointFieldGoalsMade):""}),V.jsx("td",{children:K?A(K.stats.turnovers):""}),V.jsx("td",{children:K?A(K.stats.fouls):""}),V.jsx("td",{className:"fpts-cell",children:K?A(K.totalFantasyPoints):""}),V.jsx("td",{children:K?K.gamesPlayed:"0"})]},se)})})]})})]},fe.teamId)})]})}function GI(){const[i,e]=b.useState("loading"),[n,s]=b.useState(""),[a,u]=b.useState([]),[h,m]=b.useState([]),[g,v]=b.useState({}),[E,S]=b.useState("All"),[I,M]=b.useState("ppg"),[B,q]=b.useState("desc"),[F,W]=b.useState(!1),[ie,Q]=b.useState(null),[oe,Te]=b.useState(""),[ge,x]=b.useState(""),[T,R]=b.useState(!1);b.useEffect(()=>{let C=!0;async function z(){e("loading"),s("");try{const[Z,me,ae]=await Promise.all([Vt(At(Ke,"teams")),Vt(At(Ke,"players")),Vt(At(Ke,"weeklyStats"))]),ue=Z.docs.map(we=>{const Ne=we.data()||{};return{id:we.id,teamId:Ne.teamId||we.id,name:Ne.teamName||Ne.owner||we.id,roster:Ne.roster||{}}}).sort((we,Ne)=>we.name.localeCompare(Ne.name)),ce=me.docs.map(we=>{const Ne=we.data()||{};return{id:we.id,playerId:String(Ne.playerId||we.id),name:Ne.name||"Unknown",position:Ne.position||"?",ncaaTeamId:Ne.teamId??null,status:Ne.status||"free_agent",fantasyTeam:Ne.fantasyTeam||null}}),de={};if(ae.docs.forEach(we=>{const Ne=we.data()||{},Ge=String(Ne.playerId||"");if(!Ge)return;de[Ge]||(de[Ge]={totalGames:0,totalPoints:0,totalRebounds:0,totalAssists:0,totalSteals:0,totalBlocks:0,totalTurnovers:0,totalFouls:0,totalFGM:0,totalFGA:0,total3PM:0,totalFantasyPoints:0});const _t=Ne.aggregatedStats||{};de[Ge].totalGames+=Number(Ne.gamesPlayed)||0,de[Ge].totalPoints+=Number(_t.points)||0,de[Ge].totalRebounds+=Number(_t.rebounds)||0,de[Ge].totalAssists+=Number(_t.assists)||0,de[Ge].totalSteals+=Number(_t.steals)||0,de[Ge].totalBlocks+=Number(_t.blocks)||0,de[Ge].totalTurnovers+=Number(_t.turnovers)||0,de[Ge].totalFouls+=Number(_t.fouls)||0,de[Ge].totalFGM+=Number(_t.fieldGoalsMade)||0,de[Ge].totalFGA+=Number(_t.fieldGoalsAttempted)||0,de[Ge].total3PM+=Number(_t.threePointFieldGoalsMade)||0,de[Ge].totalFantasyPoints+=Number(Ne.totalFantasyPoints)||0}),!C)return;u(ue),m(ce),v(de),e("success")}catch(Z){if(!C)return;s((Z==null?void 0:Z.message)||"Failed to load free agents."),e("error")}}return z(),()=>{C=!1}},[]);const k=b.useMemo(()=>h.filter(C=>C.status==="free_agent"),[h]),D=b.useMemo(()=>{let C=k;return E!=="All"&&(C=C.filter(z=>z.position===E)),C},[k,E]),L=b.useMemo(()=>{const C=[...D];return C.sort((z,Z)=>{const me=g[z.playerId]||{},ae=g[Z.playerId]||{},ue=me.totalGames||0,ce=ae.totalGames||0;let de,we;switch(I){case"name":return B==="asc"?z.name.localeCompare(Z.name):Z.name.localeCompare(z.name);case"position":return B==="asc"?z.position.localeCompare(Z.position):Z.position.localeCompare(z.position);case"ppg":de=ue>0?me.totalPoints/ue:0,we=ce>0?ae.totalPoints/ce:0;break;case"rpg":de=ue>0?me.totalRebounds/ue:0,we=ce>0?ae.totalRebounds/ce:0;break;case"apg":de=ue>0?me.totalAssists/ue:0,we=ce>0?ae.totalAssists/ce:0;break;case"spg":de=ue>0?me.totalSteals/ue:0,we=ce>0?ae.totalSteals/ce:0;break;case"bpg":de=ue>0?me.totalBlocks/ue:0,we=ce>0?ae.totalBlocks/ce:0;break;case"fgpct":de=me.totalFGA>0?me.totalFGM/me.totalFGA:0,we=ae.totalFGA>0?ae.totalFGM/ae.totalFGA:0;break;case"3pmpg":de=ue>0?me.total3PM/ue:0,we=ce>0?ae.total3PM/ce:0;break;case"topg":de=ue>0?me.totalTurnovers/ue:0,we=ce>0?ae.totalTurnovers/ce:0;break;case"fpg":de=ue>0?me.totalFouls/ue:0,we=ce>0?ae.totalFouls/ce:0;break;default:return 0}return B==="asc"?de-we:we-de}),C},[D,I,B,g]),A=C=>{I===C?q(B==="asc"?"desc":"asc"):(M(C),q("desc"))},be=C=>{Q(C),Te(""),x(""),W(!0)},fe=async()=>{if(!oe||!ie){alert("Please select a team.");return}const C=a.find(ae=>ae.teamId===oe);if(!C)return;const z=C.roster||{},Z=["G1","G2","F1","F2","FC","Bench"],me=Z.filter(ae=>z[ae]).length;if(me>=6&&!ge){alert("You must drop a player first.");return}if(me>=6&&ge==="none"){alert("You must drop a player first.");return}R(!0);try{let ae=null;for(const qe of Z)if(!z[qe]){ae=qe;break}let ue=null;if(ge&&ge!=="none"){for(const qe of Z)if(z[qe]===ge){ue=qe;break}}const ce=ue||ae;if(!ce){alert("No available roster spot."),R(!1);return}const de={...z};de[ce]=ie.playerId,await Ta(kr(Ke,"teams",C.id),{roster:de}),await Ta(kr(Ke,"players",ie.id),{status:"rostered",fantasyTeam:oe,rosterSpot:ce});let we=null;if(ge&&ge!=="none"){const qe=h.find(lt=>lt.playerId===ge);qe&&(we=qe.name,await Ta(kr(Ke,"players",qe.id),{status:"free_agent",fantasyTeam:null,rosterSpot:null}))}await LI(At(Ke,"transactions"),{type:"add",teamId:oe,teamName:C.name,playerAdded:ie.name,playerAddedId:ie.playerId,playerDropped:we,playerDroppedId:ge&&ge!=="none"?ge:null,timestamp:new Date});const[Ne,Ge]=await Promise.all([Vt(At(Ke,"teams")),Vt(At(Ke,"players"))]),_t=Ne.docs.map(qe=>{const lt=qe.data()||{};return{id:qe.id,teamId:lt.teamId||qe.id,name:lt.teamName||lt.owner||qe.id,roster:lt.roster||{}}}).sort((qe,lt)=>qe.name.localeCompare(lt.name)),Gn=Ge.docs.map(qe=>{const lt=qe.data()||{};return{id:qe.id,playerId:String(lt.playerId||qe.id),name:lt.name||"Unknown",position:lt.position||"?",ncaaTeamId:lt.teamId??null,status:lt.status||"free_agent",fantasyTeam:lt.fantasyTeam||null}});u(_t),m(Gn),W(!1),Q(null),Te(""),x("")}catch(ae){alert("Error adding player: "+ae.message)}finally{R(!1)}},pe=C=>C?C.toFixed(1):"0.0",se=(C,z)=>z?(C/z).toFixed(3):".000",ne=(()=>{if(!oe)return[];const C=a.find(me=>me.teamId===oe);if(!C)return[];const z=C.roster||{};return["G1","G2","F1","F2","FC","Bench"].map(me=>{const ae=z[me];if(!ae)return null;const ue=h.find(ce=>ce.playerId===ae);return ue?{...ue,slot:me}:null}).filter(Boolean)})(),K=oe&&ne.length>=6;return V.jsxs("div",{className:"free-agents-page",children:[V.jsxs("div",{className:"fa-header",children:[V.jsx("h2",{children:"Free Agents"}),V.jsx("div",{className:"fa-filters",children:V.jsxs("label",{children:["Position:",V.jsxs("select",{value:E,onChange:C=>S(C.target.value),children:[V.jsx("option",{value:"All",children:"All"}),V.jsx("option",{value:"G",children:"G"}),V.jsx("option",{value:"F",children:"F"}),V.jsx("option",{value:"C",children:"C"})]})]})})]}),i==="loading"&&V.jsx("div",{className:"state",children:"Loading"}),i==="error"&&V.jsxs("div",{className:"state error",children:["Failed to load free agents.",V.jsx("div",{className:"error-detail",children:n})]}),i==="success"&&V.jsx("div",{className:"fa-table-container",children:V.jsxs("table",{className:"fa-table",children:[V.jsx("thead",{children:V.jsxs("tr",{children:[V.jsx("th",{className:"add-col"}),V.jsxs("th",{onClick:()=>A("name"),className:"sortable",children:["Name ",I==="name"&&(B==="asc"?"":"")]}),V.jsxs("th",{onClick:()=>A("position"),className:"sortable",children:["Pos ",I==="position"&&(B==="asc"?"":"")]}),V.jsxs("th",{onClick:()=>A("ppg"),className:"sortable",children:["PPG ",I==="ppg"&&(B==="asc"?"":"")]}),V.jsxs("th",{onClick:()=>A("rpg"),className:"sortable",children:["RPG ",I==="rpg"&&(B==="asc"?"":"")]}),V.jsxs("th",{onClick:()=>A("apg"),className:"sortable",children:["APG ",I==="apg"&&(B==="asc"?"":"")]}),V.jsxs("th",{onClick:()=>A("spg"),className:"sortable",children:["SPG ",I==="spg"&&(B==="asc"?"":"")]}),V.jsxs("th",{onClick:()=>A("bpg"),className:"sortable",children:["BPG ",I==="bpg"&&(B==="asc"?"":"")]}),V.jsxs("th",{onClick:()=>A("fgpct"),className:"sortable",children:["FG% ",I==="fgpct"&&(B==="asc"?"":"")]}),V.jsxs("th",{onClick:()=>A("3pmpg"),className:"sortable",children:["3PMPG ",I==="3pmpg"&&(B==="asc"?"":"")]}),V.jsxs("th",{onClick:()=>A("topg"),className:"sortable",children:["TOPG ",I==="topg"&&(B==="asc"?"":"")]}),V.jsxs("th",{onClick:()=>A("fpg"),className:"sortable",children:["FPG ",I==="fpg"&&(B==="asc"?"":"")]})]})}),V.jsx("tbody",{children:L.map(C=>{const z=g[C.playerId]||{},Z=z.totalGames||0,me=Z>0?z.totalPoints/Z:0,ae=Z>0?z.totalRebounds/Z:0,ue=Z>0?z.totalAssists/Z:0,ce=Z>0?z.totalSteals/Z:0,de=Z>0?z.totalBlocks/Z:0;z.totalFGA>0&&z.totalFGM/z.totalFGA;const we=Z>0?z.total3PM/Z:0,Ne=Z>0?z.totalTurnovers/Z:0,Ge=Z>0?z.totalFouls/Z:0;return V.jsxs("tr",{children:[V.jsx("td",{className:"add-col",children:V.jsx("button",{className:"add-btn",onClick:()=>be(C),title:"Add player",children:"+"})}),V.jsx("td",{className:"name-cell",children:C.name}),V.jsx("td",{children:C.position}),V.jsx("td",{children:pe(me)}),V.jsx("td",{children:pe(ae)}),V.jsx("td",{children:pe(ue)}),V.jsx("td",{children:pe(ce)}),V.jsx("td",{children:pe(de)}),V.jsx("td",{children:se(z.totalFGM,z.totalFGA)}),V.jsx("td",{children:pe(we)}),V.jsx("td",{children:pe(Ne)}),V.jsx("td",{children:pe(Ge)})]},C.playerId)})})]})}),F&&ie&&V.jsx("div",{className:"modal-overlay",onClick:()=>W(!1),children:V.jsxs("div",{className:"modal-content",onClick:C=>C.stopPropagation(),children:[V.jsxs("h3",{children:["Add ",ie.name]}),V.jsxs("div",{className:"modal-field",children:[V.jsx("label",{children:"Select Team:"}),V.jsxs("select",{value:oe,onChange:C=>{Te(C.target.value),x("")},children:[V.jsx("option",{value:"",children:"-- Select Team --"}),a.map(C=>V.jsx("option",{value:C.teamId,children:C.name},C.teamId))]})]}),oe&&V.jsxs("div",{className:"modal-field",children:[V.jsx("label",{children:K?"Drop Player:":"Drop Player (optional):"}),V.jsxs("select",{value:ge,onChange:C=>x(C.target.value),children:[V.jsx("option",{value:"",children:"-- Select --"}),!K&&V.jsx("option",{value:"none",children:"Don't drop anyone"}),ne.map(C=>V.jsxs("option",{value:C.playerId,children:[C.name," (",C.slot,")"]},C.playerId))]})]}),V.jsxs("div",{className:"modal-actions",children:[V.jsx("button",{className:"btn-cancel",onClick:()=>W(!1),disabled:T,children:"Cancel"}),V.jsx("button",{className:"btn-confirm",onClick:fe,disabled:T||!oe||K&&!ge,children:T?"Adding...":"Add Player"})]})]})})]})}function HI(){return V.jsx(x0,{children:V.jsxs("div",{className:"app",children:[V.jsxs("header",{className:"header",children:[V.jsx("h1",{children:" ACC Fantasy Basketball"}),V.jsxs("nav",{className:"nav",children:[V.jsx(Xs,{to:"/",children:"Standings"}),V.jsx(Xs,{to:"/matchups",children:"Matchups"}),V.jsx(Xs,{to:"/teams",children:"Teams"}),V.jsx(Xs,{to:"/free-agents",children:"Free Agents"})]})]}),V.jsx("main",{className:"main",children:V.jsxs(o0,{children:[V.jsx(ha,{path:"/",element:V.jsx(UI,{})}),V.jsx(ha,{path:"/matchups",element:V.jsx(zI,{})}),V.jsx(ha,{path:"/teams",element:V.jsx(WI,{})}),V.jsx(ha,{path:"/free-agents",element:V.jsx(GI,{})})]})})]})})}lE.createRoot(document.getElementById("root")).render(V.jsx(b.StrictMode,{children:V.jsx(HI,{})}));
